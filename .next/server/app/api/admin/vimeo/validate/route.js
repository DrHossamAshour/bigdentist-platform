"use strict";(()=>{var e={};e.id=9273,e.ids=[9273],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},64114:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>v,originalPathname:()=>f,patchFetch:()=>V,requestAsyncStorage:()=>m,routeModule:()=>u,serverHooks:()=>p,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>h});var i={};r.r(i),r.d(i,{POST:()=>l});var o=r(95419),a=r(69108),n=r(99678),d=r(78070),s=r(7042);async function l(e){try{let{url:t}=await e.json();if(!t)return d.Z.json({error:"Video URL is required"},{status:400});let r=await s.b.validateVideoUrl(t);if(!r.isValid)return d.Z.json({isValid:!1,error:r.error},{status:400});let i=r.video,o=s.b.extractVideoId(t);return d.Z.json({isValid:!0,video:{id:o,title:i.title,description:i.description,duration:i.duration,durationFormatted:s.b.formatDuration(i.duration),thumbnail:s.b.getThumbnailUrl(o,"medium"),embedUrl:s.b.getEmbedUrl(o),privacy:i.privacy.view,stats:{plays:i.stats.plays,likes:i.stats.likes},createdTime:i.created_time,modifiedTime:i.modified_time}})}catch(e){return console.error("Error validating Vimeo URL:",e),d.Z.json({error:"Failed to validate video URL"},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/admin/vimeo/validate/route",pathname:"/api/admin/vimeo/validate",filename:"route",bundlePath:"app/api/admin/vimeo/validate/route"},resolvedPagePath:"E:\\BigDentist Website\\app\\api\\admin\\vimeo\\validate\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:m,staticGenerationAsyncStorage:c,serverHooks:p,headerHooks:v,staticGenerationBailout:h}=u,f="/api/admin/vimeo/validate/route";function V(){return(0,n.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:c})}},7042:(e,t,r)=>{r.d(t,{b:()=>o});class i{constructor(){this.accessToken=process.env.VIMEO_ACCESS_TOKEN||""}extractVideoId(e){for(let t of[/vimeo\.com\/(\d+)/,/vimeo\.com\/video\/(\d+)/,/player\.vimeo\.com\/video\/(\d+)/]){let r=e.match(t);if(r)return r[1]}return null}isValidVimeoUrl(e){return null!==this.extractVideoId(e)}async getVideoInfo(e){if(!this.accessToken)return console.warn("Vimeo access token not configured"),null;try{let t=await fetch(`https://api.vimeo.com/videos/${e}`,{headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"}});if(!t.ok){if(404===t.status)throw Error("Video not found or is private");throw Error(`Vimeo API error: ${t.status}`)}return await t.json()}catch(e){return console.error("Error fetching Vimeo video info:",e),null}}async validateVideoUrl(e){if(!this.isValidVimeoUrl(e))return{isValid:!1,error:"Invalid Vimeo URL format"};let t=this.extractVideoId(e);if(!t)return{isValid:!1,error:"Could not extract video ID from URL"};let r=await this.getVideoInfo(t);return r?"nobody"===r.privacy.view?{isValid:!1,error:"Video is private and cannot be embedded"}:{isValid:!0,video:r}:{isValid:!1,error:"Video not found or is private"}}getEmbedUrl(e,t={}){let r=new URLSearchParams;t.autoplay&&r.append("autoplay","1"),t.muted&&r.append("muted","1"),!1!==t.controls&&r.append("controls","1"),!1!==t.responsive&&r.append("responsive","1");let i=r.toString();return`https://player.vimeo.com/video/${e}${i?`?${i}`:""}`}formatDuration(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),i=e%60;return t>0?`${t}:${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${r}:${i.toString().padStart(2,"0")}`}getThumbnailUrl(e,t="medium"){return`https://vumbnail.com/${e}_${({small:"640x360",medium:"1280x720",large:"1920x1080"})[t]}.jpg`}}let o=new i}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[1638,6206],()=>r(64114));module.exports=i})();