(()=>{var e={};e.id=4811,e.ids=[4811],e.modules={30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},12781:e=>{"use strict";e.exports=require("stream")},73837:e=>{"use strict";e.exports=require("util")},94583:(e,t,s)=>{"use strict";let n,i,r;s.r(t),s.d(t,{headerHooks:()=>TP,originalPathname:()=>TD,patchFetch:()=>Tz,requestAsyncStorage:()=>TC,routeModule:()=>TM,serverHooks:()=>TU,staticGenerationAsyncStorage:()=>TL,staticGenerationBailout:()=>T$});var a,o,l,c,u,p,m,h={};s.r(h),s.d(h,{GET:()=>TF,POST:()=>Tj});var d=s(95419),f=s(69108),g=s(99678);let b=function(e,t){if("function"==typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw RangeError(`Invalid arity ${e}`);case 2:return function(e,s){return arguments.length>=2?t(e,s):function(s){return t(s,e)}};case 3:return function(e,s,n){return arguments.length>=3?t(e,s,n):function(n){return t(n,e,s)}};case 4:return function(e,s,n,i){return arguments.length>=4?t(e,s,n,i):function(i){return t(i,e,s,n)}};case 5:return function(e,s,n,i,r){return arguments.length>=5?t(e,s,n,i,r):function(r){return t(r,e,s,n,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let s=arguments;return function(e){return t(e,...s)}}}},x=e=>e,y=e=>()=>e,v=y(!0),_=y(!1),S=y(void 0);function w(e,t,s,n,i,r,a,o,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return n(s(t(e)));case 5:return i(n(s(t(e))));case 6:return r(i(n(s(t(e)))));case 7:return a(r(i(n(s(t(e))))));case 8:return o(a(r(i(n(s(t(e)))))));case 9:return l(o(a(r(i(n(s(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}let k=()=>"3.4.8",O=Symbol.for(`effect/GlobalValue/globalStoreId/${k()}`);O in globalThis||(globalThis[O]=new Map);let E=globalThis[O],I=(e,t)=>(E.has(e)||E.set(e,t()),E.get(e)),T=e=>!!e,R=e=>"string"==typeof e,N=e=>"number"==typeof e,A=e=>"boolean"==typeof e,F=e=>"bigint"==typeof e,j=e=>"symbol"==typeof e,M=e=>"function"==typeof e,C=e=>void 0===e,L=e=>void 0!==e,U=e=>null!==e,P=e=>!1,$=e=>"object"==typeof e&&null!==e,D=e=>$(e)||M(e),z=b(2,(e,t)=>D(e)&&t in e),B=b(2,(e,t)=>z(e,"_tag")&&e._tag===t),q=e=>null==e,J=e=>null!=e,K=e=>e instanceof Date,V=e=>z(e,Symbol.iterator),G=e=>$(e)&&!Array.isArray(e),H=e=>z(e,"then")&&M(e.then),W=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;Symbol.iterator;class Y{constructor(e){this.called=!1,this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new Y(this.self)}}class Q{constructor(e,t,s,n){return q(t)&&q(e)?(t=4294967295*Math.random()>>>0,e=0):q(t)&&(t=e,e=0),q(n)&&q(s)?(n=this._state?this._state[3]:4150755663,s=this._state?this._state[2]:335903614):q(n)&&(n=s,s=0),this._state=new Int32Array([0,0,s>>>0,(1|(n||0))>>>0]),this._next(),X(this._state,this._state[0],this._state[1],e>>>0,t>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=1|e[3]}integer(e){if(!e)return this._next();if(((e>>>=0)&e-1)==0)return this._next()&e-1;let t=0,s=(-e>>>0)%e>>>0;for(t=this._next();t<s;t=this._next());return t%e}number(){return((67108863&this._next())*134217728+(134217727&this._next())*1)/9007199254740992}_next(){var e;let t,s,n,i;let r=this._state[0]>>>0,a=this._state[1]>>>0;e=this._state,t=(a>>>16)*32557>>>0,s=(65535&a)*19605>>>0,n=(65535&a)*32557>>>0,i=(a>>>16)*19605+((s>>>16)+(t>>>16))>>>0,(n=n+(s=s<<16>>>0)>>>0)>>>0<s>>>0&&(i=i+1>>>0),(n=n+(t=t<<16>>>0)>>>0)>>>0<t>>>0&&(i=i+1>>>0),i=(i=i+Math.imul(a,1481765933)>>>0)+Math.imul(r,1284865837)>>>0,e[0]=i,e[1]=n,X(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=r>>>18,l=(a>>>18|r<<14)>>>0;o=(o^r)>>>0;let c=((l=(l^a)>>>0)>>>27|o<<5)>>>0,u=r>>>27;return(c>>>u|c<<((-u>>>0&31)>>>0))>>>0}}function X(e,t,s,n,i){let r=t+n>>>0,a=s+i>>>0;a>>>0<s>>>0&&(r=r+1|0),e[0]=r,e[1]=a}let Z=Symbol.for("effect/Utils/YieldWrap");class ee{#e;constructor(e){this.#e=e}[Z](){return this.#e}}function et(e){if("object"==typeof e&&null!==e&&Z in e)return e[Z]();throw Error(W("yieldWrapGet"))}let es=I("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),en=(e=>{let t={[e]:e=>e()};return function(s){return t[e](s)}})("effect_internal_function"),ei=I(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),er=Symbol.for("effect/Hash"),ea=e=>{if(!0===es.enabled)return 0;switch(typeof e){case"number":return ep(e);case"bigint":return em(e.toString(10));case"boolean":case"symbol":return em(String(e));case"string":return em(e);case"undefined":return em("undefined");case"function":case"object":if(null===e)return em("null");if(e instanceof Date)return ea(e.toISOString());if(eu(e))return e[er]();return eo(e);default:throw Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},eo=e=>(ei.has(e)||ei.set(e,ep(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),ei.get(e)),el=e=>t=>53*t^e,ec=e=>3221225471&e|e>>>1&1073741824,eu=e=>z(e,er),ep=e=>{if(e!=e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return ec(e)},em=e=>{let t=5381,s=e.length;for(;s;)t=33*t^e.charCodeAt(--s);return ec(t)},eh=(e,t)=>{let s=12289;for(let n=0;n<t.length;n++)s^=w(em(t[n]),el(ea(e[t[n]])));return ec(s)},ed=e=>eh(e,Object.keys(e)),ef=e=>{let t=6151;for(let s=0;s<e.length;s++)t=w(t,el(ea(e[s])));return ec(t)},eg=function(){if(1==arguments.length){let e=arguments[0];return function(t){return Object.defineProperty(e,er,{value:()=>t,enumerable:!1}),t}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,er,{value:()=>t,enumerable:!1}),t},eb=Symbol.for("effect/Equal");function ex(){return 1==arguments.length?e=>ey(e,arguments[0]):ey(arguments[0],arguments[1])}function ey(e,t){if(e===t)return!0;let s=typeof e;if(s!==typeof t)return!1;if("object"===s||"function"===s){if(null!==e&&null!==t){if(ev(e)&&ev(t))return!!(ea(e)===ea(t)&&e[eb](t))||!!es.enabled&&!!es.tester&&es.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(es.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,s)=>ey(e,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let s=Object.keys(e),n=Object.keys(t);if(s.length===n.length){for(let n of s)if(!(n in t&&ey(e[n],t[n])))return!!es.tester&&es.tester(e,t);return!0}}return!!es.tester&&es.tester(e,t)}}return!!es.enabled&&!!es.tester&&es.tester(e,t)}let ev=e=>z(e,eb),e_=()=>ex,eS=Symbol.for("nodejs.util.inspect.custom"),ew=e=>z(e,"toJSON")&&M(e.toJSON)&&0===e.toJSON.length?e.toJSON():Array.isArray(e)?e.map(ew):e,ek=e=>JSON.stringify(e,null,2),eO=(e,t=2)=>{try{return"object"==typeof e?eE(e,t):String(e)}catch(t){return String(e)}},eE=(e,t)=>{let s=[],n=JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t?s.includes(t)?void 0:s.push(t)&&t:t,t);return s=void 0,n},eI=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let s=e;for(let e=0,n=t.length;e<n;e++)s=t[e](s);return s}}},eT="Async",eR="Commit",eN="Failure",eA="OnFailure",eF="OnSuccess",ej="OnSuccessAndFailure",eM="Success",eC="Sync",eL="UpdateRuntimeFlags",eU="While",eP="WithRuntime",e$="Yield",eD="RevertFlags",ez=Symbol.for("effect/Effect"),eB=Symbol.for("effect/Stream"),eq=Symbol.for("effect/Sink"),eJ=Symbol.for("effect/Channel"),eK={_R:e=>e,_E:e=>e,_A:e=>e,_V:k()},eV={[ez]:eK,[eB]:eK,[eq]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[eJ]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[eb](e){return this===e},[er](){return eg(this,eo(this))},[Symbol.iterator](){return new Y(new ee(this))},pipe(){return eI(this,arguments)}},eG={[er](){return eg(this,ed(this))},[eb](e){let t=Object.keys(this),s=Object.keys(e);if(t.length!==s.length)return!1;for(let s of t)if(!(s in e&&ex(this[s],e[s])))return!1;return!0}},eH={...{...eV,_op:eR},...eG},eW=Symbol.for("effect/Option"),eY={...eV,[eW]:{_A:e=>e},[eS](){return this.toJSON()},toString(){return ek(this.toJSON())}},eQ=Object.assign(Object.create(eY),{_tag:"Some",_op:"Some",[eb](e){return e0(e)&&e2(e)&&ex(this.value,e.value)},[er](){return eg(this,el(ea(this._tag))(ea(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:ew(this.value)}}}),eX=ea("None"),eZ=Object.assign(Object.create(eY),{_tag:"None",_op:"None",[eb]:e=>e0(e)&&e1(e),[er]:()=>eX,toJSON(){return{_id:"Option",_tag:this._tag}}}),e0=e=>z(e,eW),e1=e=>"None"===e._tag,e2=e=>"Some"===e._tag,e3=Object.create(eZ),e5=e=>{let t=Object.create(eQ);return t.value=e,t},e4=Symbol.for("effect/Context/Tag"),e6=Symbol.for("effect/STM"),e8={...eV,_tag:"Tag",_op:"Tag",[e6]:eK,[e4]:{_Service:e=>e,_Identifier:e=>e},toString(){return ek(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[eS](){return this.toJSON()},of:e=>e,context(e){return ti(this,e)}},e7=Symbol.for("effect/Context"),e9={[e7]:{_Services:e=>e},[eb](e){if(ts(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!ex(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[er](){return eg(this,ep(this.unsafeMap.size))},pipe(){return eI(this,arguments)},toString(){return ek(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(ew)}},[eS](){return this.toJSON()}},te=e=>{let t=Object.create(e9);return t.unsafeMap=e,t},tt=e=>{let t=Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let s=e.stack.split("\n");if(s.length>2){let e=s[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){let e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t},ts=e=>z(e,e7),tn=te(new Map),ti=(e,t)=>te(new Map([[e.key,t]])),tr=b(3,(e,t,s)=>{let n=new Map(e.unsafeMap);return n.set(t.key,s),te(n)}),ta=b(2,(e,t)=>{if(!e.unsafeMap.has(t.key))throw tt(t);return e.unsafeMap.get(t.key)}),to=b(2,(e,t)=>e.unsafeMap.has(t.key)?e5(e.unsafeMap.get(t.key)):e3),tl=b(2,(e,t)=>{let s=new Map(e.unsafeMap);for(let[e,n]of t.unsafeMap)s.set(e,n);return te(s)}),tc=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let s=Error();Error.stackTraceLimit=t;let n=Object.create(e8);return Object.defineProperty(n,"stack",{get:()=>s.stack}),n.key=e,n},tu=e=>z(e,e4),tp=()=>tn,tm=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let s=Error();function n(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(n,e8),n.key=e,Object.defineProperty(n,"stack",{get:()=>s.stack}),n},th=Symbol.for("effect/Either"),td={...eV,[th]:{_R:e=>e},[eS](){return this.toJSON()},toString(){return ek(this.toJSON())}},tf=Object.assign(Object.create(td),{_tag:"Right",_op:"Right",[eb](e){return tb(e)&&ty(e)&&ex(this.right,e.right)},[er](){return el(ea(this._tag))(ea(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:ew(this.right)}}}),tg=Object.assign(Object.create(td),{_tag:"Left",_op:"Left",[eb](e){return tb(e)&&tx(e)&&ex(this.left,e.left)},[er](){return el(ea(this._tag))(ea(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:ew(this.left)}}}),tb=e=>z(e,th),tx=e=>"Left"===e._tag,ty=e=>"Right"===e._tag,tv=e=>{let t=Object.create(tg);return t.left=e,t},t_=e=>{let t=Object.create(tf);return t.right=e,t},tS=b(2,(e,t)=>e1(e)?tv(t()):t_(e.value)),tw=b(2,(e,{onLeft:t,onRight:s})=>tx(e)?t(e.left):s(e.right))({onLeft:x,onRight:x}),tk=b(2,(e,t)=>{if(ty(e))return e.right;throw t(e.left)}),tO=tk(()=>Error("getOrThrow called on a Left"));class tE{constructor(e){this.called=!1,this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new tE(this.self)}}let tI=Symbol.for("effect/Micro"),tT=Symbol.for("effect/Micro/runSymbol"),tR=e=>"object"==typeof e&&null!==e&&tI in e,tN=Symbol.for("effect/Micro/MicroCause"),tA={_E:x};class tF extends globalThis.Error{constructor(e,t,s){let n,i,r;let a=`MicroCause.${e}`;if(t instanceof globalThis.Error){n=`(${a}) ${t.name}`;let e=(i=t.message).split("\n").length;r=t.stack?`(${a}) ${t.stack.split("\n").slice(0,e+3).join("\n")}`:`${n}: ${i}`}else n=a,i=eO(t,0),r=`${n}: ${i}`;s.length>0&&(r+=`
    ${s.join("\n    ")}`),super(i),this._tag=e,this.traces=s,this[tN]=tA,this.name=n,this.stack=r}pipe(){return eI(this,arguments)}toString(){return this.stack}[eS](){return this.stack}}class tj extends tF{constructor(e,t=[]){super("Fail",e,t),this.error=e}}let tM=(e,t=[])=>new tj(e,t);class tC extends tF{constructor(e,t=[]){super("Die",e,t),this.defect=e}}let tL=(e,t=[])=>new tC(e,t);class tU extends tF{constructor(e=[]){super("Interrupt","interrupted",e)}}let tP=(e=[])=>new tU(e),t$=b(2,(e,t)=>{let s=[...e.traces,t];switch(e._tag){case"Die":return tL(e.defect,s);case"Interrupt":return tP(s);case"Fail":return tM(e.error,s)}}),tD=tv(tP()),tz=e=>tv(tM(e)),tB=e=>tv(tL(e)),tq=Symbol.for("effect/Micro/Env"),tJ=Symbol.for("effect/Micro/EnvRef"),tK={[tq]:{_R:x},pipe(){return eI(this,arguments)}},tV=e=>{let t=Object.create(tK);return t.refs=e,t},tG=()=>{let e=new AbortController,t=Object.create(null);return t[t0.key]=e,t[t1.key]=e.signal,tV(t)},tH=b(2,(e,t)=>t.key in e.refs?e.refs[t.key]:t.initial),tW=b(3,(e,t,s)=>{let n=Object.assign(Object.create(null),e.refs);return n[t.key]=s,tV(n)}),tY=b(2,(e,t)=>tV(t(Object.assign(Object.create(null),e.refs)))),tQ=e=>t9(function(t,s){s(t_(ta(tH(t,t2),e)))}),tX={[tJ]:tJ},tZ=(e,t)=>I(e,()=>{let s=Object.create(tX);return s.key=e,s.initial=t(),s}),t0=tZ("effect/Micro/currentAbortController",()=>void 0),t1=tZ("effect/Micro/currentAbortSignal",()=>void 0),t2=tZ("effect/Micro/currentContext",()=>tp()),t3=tZ("effect/Micro/currentMaxDepthBeforeYield",()=>2048),t5=tZ("effect/Micro/currentInterruptible",()=>!0),t4={...eV,_op:"Micro",[tI]:{_A:x,_E:x,_R:x},[Symbol.iterator](){return new tE(new ee(this))}},t6=I("effect/Micro/microDepthState",()=>({depth:0,maxDepthBeforeYield:t3.initial})),t8=e=>{let t=Object.create(t4);return t[tT]=e,t},t7=(e,t)=>t8(function s(n,i){if(t&&!1!==n.refs[t5.key]&&n.refs[t1.key].aborted)return i(tD);if(t6.depth++,1===t6.depth&&(t6.maxDepthBeforeYield=tH(n,t3)),t6.depth>=t6.maxDepthBeforeYield)sm(()=>s(n,i));else try{e(n,i)}catch(e){i(tB(e))}t6.depth--}),t9=e=>t7(e,!0),se=e=>t9(function(t,s){s(e)}),st=e=>se(t_(e)),ss=e=>se(tz(e)),sn=e=>t9(function(t,s){s(t_(e()))}),si=e=>t9(function(t,s){e()[tT](t,s)}),sr=st(void 0),sa=e=>t9(function(t,s){let n,i=!1,r=e.length>1?new AbortController:void 0,a=tH(t,t1);function o(){n?l(sS(sg(n,se(tD)))):l(se(tD)),void 0!==r&&r.abort()}function l(e){i||(i=!0,a.removeEventListener("abort",o),e[tT](t,s))}n=void 0===r?e(l):e(l,r.signal),i||a.addEventListener("abort",o)}),so=e=>t9(function(t,s){try{s(t_(e.try()))}catch(t){s(tz(e.catch(t)))}}),sl=e=>sa(function(t,s){try{e.try(s).then(e=>t(st(e)),s=>t(ss(e.catch(s))))}catch(s){t(ss(e.catch(s)))}}),sc=I("effect/Micro/yieldState",()=>({tasks:[],working:!1})),su=()=>{let e=sc.tasks;sc.tasks=[];for(let t=0,s=e.length;t<s;t++)e[t]()},sp="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0),sm=e=>{sc.tasks.push(e),sc.working||(sc.working=!0,sp(()=>{sc.working=!1,su()}))},sh=(...e)=>t9(function(t,s){let n;let i=1===e.length?e[0]():e[1].call(e[0]),r=!1;!function e(){r=!0;try{let a=!0;for(;a;){let o=i.next(n);if(o.done)return s(t_(o.value));a=!1,et(o.value)[tT](t,function(t){"Left"===t._tag?s(t):(a=!0,n=t.right,r||e())})}}catch(e){s(tB(e))}r=!1}()}),sd=b(2,(e,t)=>t9(function(s,n){e[tT](s,function(e){n("Left"===e._tag?e:t_(t(e.right)))})})),sf=b(2,(e,t)=>t9(function(s,n){e[tT](s,function(e){if("Left"===e._tag)return n(e);t(e.right)[tT](s,n)})})),sg=b(2,(e,t)=>t9(function(s,n){e[tT](s,function(e){if("Left"===e._tag)return n(e);if(tH(s,t1).aborted)return n(tD);let i=tR(t)?t:"function"==typeof t?t(e.right):t;tR(i)?i[tT](s,n):n(t_(i))})})),sb=e=>sd(e,e=>void 0),sx=e=>t9(function(t,s){e[tT](t,function(e){s(t_(e))})}),sy=b(e=>tR(e[0]),(e,t,s)=>sf(e,e=>t(e)?st(e):ss(s(e)))),sv=function(){let e=globalThis.Error.stackTraceLimit;globalThis.Error.stackTraceLimit=2;let t=new globalThis.Error;globalThis.Error.stackTraceLimit=e;let s=e=>s=>t7(function(n,i){s[tT](n,function(s){i("Left"===s._tag?tv(function(e,s){let n=t.stack;if(!n)return s;let i=n.split("\n")[2]?.trim().replace(/^at /,"");if(!i)return s;let r=i.match(/\((.*)\)$/);return t$(s,`at ${e} (${r?r[1]:i})`)}(e,s.left)):s)})},!1);return 2==arguments.length?s(arguments[1])(arguments[0]):s(arguments[0])};class s_{constructor(){this.state={_tag:"Open",finalizers:new Set},this[null]=null}unsafeAddFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.add(e)}addFinalizer(e){return si(()=>"Open"===this.state._tag?(this.state.finalizers.add(e),sr):e(this.state.exit))}unsafeRemoveFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.delete(e)}close(e){return si(()=>{if("Open"===this.state._tag){let t=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",exit:e},sf(sw(t,t=>sx(t(e))),e=>sb(se(Either.all(e))))}return sr})}get fork(){return sn(()=>{let e=new s_;if("Closed"===this.state._tag)return e.state=this.state,e;function t(t){return e.close(t)}return this.state.finalizers.add(t),e.unsafeAddFinalizer(e=>sn(()=>this.unsafeRemoveFinalizer(t))),e})}}let sS=e=>t7(function(t,s){let n=tY(t,function(e){return e[t5.key]=!1,e[t1.key]=new AbortController().signal,e});e[tT](n,s)},!1),sw=(e,t,s)=>t9(function(n,i){let r;let a=s?.concurrency==="inherit"?tH(n,null):s?.concurrency??1,o="unbounded"===a?Number.POSITIVE_INFINITY:Math.max(1,a),[l,c]=function(e){let t=new AbortController,s=tH(e,t1);function n(){t.abort(),s.removeEventListener("abort",n)}return s.addEventListener("abort",n),[tY(e,function(e){return e[t0.key]=t,e[t1.key]=t.signal,e}),n]}(n),u=Array.from(e),p=u.length,m=s?.discard?void 0:Array(p),h=0,d=0,f=0,g=!1;!function e(){for(g=!0;d<o&&h<p;){let s=h,n=u[s];h++,d++;try{t(n,s)[tT](l,function(t){"Left"===t._tag?void 0===r&&(r=t,p=h,c()):void 0!==m&&(m[s]=t.right),f++,d--,f===p?i(r??Either.right(m)):!g&&d<o&&e()})}catch(e){r=tB(e),p=h,c()}}g=!1}()}),sk=function(){class e extends globalThis.Error{[tT](e,t){t(tz(this))}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[eS](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,t4,eG),e}(),sO=class extends sk{constructor(e){super(),e&&Object.assign(this,e)}},sE=e=>{class t extends sO{constructor(...t){super(...t),this._tag=e}}return t.prototype.name=e,t};sE("TimeoutException");let sI=Object.create(null),sT=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?sI:globalThis),sR=new Proxy(sI,{get:(e,t)=>sT()[t]??sI[t],has:(e,t)=>t in sT()||t in sI,set:(e,t,s)=>(sT(!0)[t]=s,!0),deleteProperty(e,t){if(!t)return!1;let s=sT(!0);return delete s[t],!0},ownKeys:()=>Object.keys(sT(!0))}),sN="u">typeof process&&process.env&&"production"||"",sA=[["APPVEYOR"],["AWS_AMPLIFY","AWS_APP_ID",{ci:!0}],["AZURE_PIPELINES","SYSTEM_TEAMFOUNDATIONCOLLECTIONURI"],["AZURE_STATIC","INPUT_AZURE_STATIC_WEB_APPS_API_TOKEN"],["APPCIRCLE","AC_APPCIRCLE"],["BAMBOO","bamboo_planKey"],["BITBUCKET","BITBUCKET_COMMIT"],["BITRISE","BITRISE_IO"],["BUDDY","BUDDY_WORKSPACE_ID"],["BUILDKITE"],["CIRCLE","CIRCLECI"],["CIRRUS","CIRRUS_CI"],["CLOUDFLARE_PAGES","CF_PAGES",{ci:!0}],["CLOUDFLARE_WORKERS","WORKERS_CI",{ci:!0}],["CODEBUILD","CODEBUILD_BUILD_ARN"],["CODEFRESH","CF_BUILD_ID"],["DRONE"],["DRONE","DRONE_BUILD_EVENT"],["DSARI"],["GITHUB_ACTIONS"],["GITLAB","GITLAB_CI"],["GITLAB","CI_MERGE_REQUEST_ID"],["GOCD","GO_PIPELINE_LABEL"],["LAYERCI"],["HUDSON","HUDSON_URL"],["JENKINS","JENKINS_URL"],["MAGNUM"],["NETLIFY"],["NETLIFY","NETLIFY_LOCAL",{ci:!1}],["NEVERCODE"],["RENDER"],["SAIL","SAILCI"],["SEMAPHORE"],["SCREWDRIVER"],["SHIPPABLE"],["SOLANO","TDDIUM"],["STRIDER"],["TEAMCITY","TEAMCITY_VERSION"],["TRAVIS"],["VERCEL","NOW_BUILDER"],["VERCEL","VERCEL",{ci:!1}],["VERCEL","VERCEL_ENV",{ci:!1}],["APPCENTER","APPCENTER_BUILD_ID"],["CODESANDBOX","CODESANDBOX_SSE",{ci:!1}],["CODESANDBOX","CODESANDBOX_HOST",{ci:!1}],["STACKBLITZ"],["STORMKIT"],["CLEAVR"],["ZEABUR"],["CODESPHERE","CODESPHERE_APP_ID",{ci:!0}],["RAILWAY","RAILWAY_PROJECT_ID"],["RAILWAY","RAILWAY_SERVICE_ID"],["DENO-DEPLOY","DENO_DEPLOYMENT_ID"],["FIREBASE_APP_HOSTING","FIREBASE_APP_HOSTING",{ci:!0}]],sF=function(){if(globalThis.process?.env)for(let e of sA){let t=e[1]||e[0];if(globalThis.process?.env[t])return{name:e[0].toLowerCase(),...e[2]}}return globalThis.process?.env?.SHELL==="/bin/jsh"&&globalThis.process?.versions?.webcontainer?{name:"stackblitz",ci:!1}:{name:"",ci:!1}}();function sj(e){return!!e&&"false"!==e}sF.name;let sM=globalThis.process?.platform||"",sC=(sj(sR.CI)||sF.ci,sj(globalThis.process?.stdout&&globalThis.process?.stdout.isTTY)),sL=(sj(sR.DEBUG),"test"===sN||sj(sR.TEST),"dev"===sN||"development"===sN),sU=(sj(sR.MINIMAL),/^win/i.test(sM)),sP=(/^linux/i.test(sM),/^darwin/i.test(sM),!sj(sR.NO_COLOR)&&(sj(sR.FORCE_COLOR)||(sC||sU)&&sR.TERM),(globalThis.process?.versions?.node||"").replace(/^v/,"")||null),s$=(sP?.split(".")[0],globalThis.process||Object.create(null)),sD={versions:{}},sz=new Proxy(s$,{get:(e,t)=>"env"===t?sR:t in e?e[t]:t in sD?sD[t]:void 0}),sB=globalThis.process?.release?.name==="node",sq=!!globalThis.Bun||!!globalThis.process?.versions?.bun,sJ=!!globalThis.Deno,sK=!!globalThis.fastly,sV=[[!!globalThis.Netlify,"netlify"],[!!globalThis.EdgeRuntime,"edge-light"],[globalThis.navigator?.userAgent==="Cloudflare-Workers","workerd"],[sK,"fastly"],[sJ,"deno"],[sq,"bun"],[sB,"node"]],sG=function(){let e=sV.find(e=>e[0]);if(e)return{name:e[1]}}();sG?.name;let sH={"application/andrew-inset":{source:"iana",extensions:["ez"],compressible:null},"application/applixware":{source:"apache",extensions:["aw"],compressible:null},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"],compressible:null},"application/cdmi-container":{source:"iana",extensions:["cdmic"],compressible:null},"application/cdmi-domain":{source:"iana",extensions:["cdmid"],compressible:null},"application/cdmi-object":{source:"iana",extensions:["cdmio"],compressible:null},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"],compressible:null},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/cu-seeme":{source:"apache",extensions:["cu"],compressible:null},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dicom":{source:"iana",compressible:!1,extensions:["dcm"]},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dssc+der":{source:"iana",extensions:["dssc"],compressible:null},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/exi":{source:"iana",extensions:["exi"],compressible:null},"application/express":{source:"iana",extensions:["exp"],compressible:null},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/font-tdpfr":{source:"iana",extensions:["pfr"],compressible:null},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"],compressible:null},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/hyperstudio":{source:"iana",extensions:["stk"],compressible:null},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/ipfix":{source:"iana",extensions:["ipfix"],compressible:null},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/mac-binhex40":{source:"iana",extensions:["hqx"],compressible:null},"application/mac-compactpro":{source:"apache",extensions:["cpt"],compressible:null},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"],compressible:null},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"],compressible:null},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mbox":{source:"iana",extensions:["mbox"],compressible:null},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/mp21":{source:"iana",extensions:["m21","mp21"],compressible:null},"application/mp4":{source:"iana",extensions:["mp4s","m4p"],compressible:null},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mxf":{source:"iana",extensions:["mxf"],compressible:null},"application/n-quads":{source:"iana",extensions:["nq"],compressible:null},"application/n-triples":{source:"iana",extensions:["nt"],compressible:null},"application/node":{source:"iana",extensions:["cjs"],compressible:null},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"],compressible:null},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"],compressible:null},"application/oxps":{source:"iana",extensions:["oxps"],compressible:null},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"],compressible:null},"application/pgp-signature":{source:"iana",extensions:["asc","sig"],compressible:null},"application/pics-rules":{source:"apache",extensions:["prf"],compressible:null},"application/pkcs10":{source:"iana",extensions:["p10"],compressible:null},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"],compressible:null},"application/pkcs7-signature":{source:"iana",extensions:["p7s"],compressible:null},"application/pkcs8":{source:"iana",extensions:["p8"],compressible:null},"application/pkix-attr-cert":{source:"iana",extensions:["ac"],compressible:null},"application/pkix-cert":{source:"iana",extensions:["cer"],compressible:null},"application/pkix-crl":{source:"iana",extensions:["crl"],compressible:null},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"],compressible:null},"application/pkixcmp":{source:"iana",extensions:["pki"],compressible:null},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.cww":{source:"iana",extensions:["cww"],compressible:null},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"],compressible:null},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"],compressible:null},"application/rpki-manifest":{source:"iana",extensions:["mft"],compressible:null},"application/rpki-roa":{source:"iana",extensions:["roa"],compressible:null},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scvp-cv-request":{source:"iana",extensions:["scq"],compressible:null},"application/scvp-cv-response":{source:"iana",extensions:["scs"],compressible:null},"application/scvp-vp-request":{source:"iana",extensions:["spq"],compressible:null},"application/scvp-vp-response":{source:"iana",extensions:["spp"],compressible:null},"application/sdp":{source:"iana",extensions:["sdp"],compressible:null},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/set-payment-initiation":{source:"iana",extensions:["setpay"],compressible:null},"application/set-registration-initiation":{source:"iana",extensions:["setreg"],compressible:null},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"],compressible:null},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/sparql-query":{source:"iana",extensions:["rq"],compressible:null},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/srgs":{source:"iana",extensions:["gram"],compressible:null},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamped-data":{source:"iana",extensions:["tsd"],compressible:null},"application/trig":{source:"iana",extensions:["trig"],compressible:null},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"],compressible:null},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"],compressible:null},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"],compressible:null},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"],compressible:null},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"],compressible:null},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"],compressible:null},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"],compressible:null},"application/vnd.acucobol":{source:"iana",extensions:["acu"],compressible:null},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"],compressible:null},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"],compressible:null},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"],compressible:null},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"],compressible:null},"application/vnd.age":{source:"iana",extensions:["age"],compressible:null},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"],compressible:null},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"],compressible:null},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"],compressible:null},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"],compressible:null},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"],compressible:null},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"],compressible:null},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"],compressible:null},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"],compressible:null},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"],compressible:null},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"],compressible:null},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"],compressible:null},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"],compressible:null},"application/vnd.apple.pages":{source:"iana",extensions:["pages"],compressible:null},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"],compressible:null},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"],compressible:null},"application/vnd.audiograph":{source:"iana",extensions:["aep"],compressible:null},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"],compressible:null},"application/vnd.bmi":{source:"iana",extensions:["bmi"],compressible:null},"application/vnd.businessobjects":{source:"iana",extensions:["rep"],compressible:null},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"],compressible:null},"application/vnd.cinderella":{source:"iana",extensions:["cdy"],compressible:null},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"],compressible:null},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"],compressible:null},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"],compressible:null},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"],compressible:null},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"],compressible:null},"application/vnd.commonspace":{source:"iana",extensions:["csp"],compressible:null},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"],compressible:null},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"],compressible:null},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"],compressible:null},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"],compressible:null},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"],compressible:null},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"],compressible:null},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"],compressible:null},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"],compressible:null},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"],compressible:null},"application/vnd.curl.car":{source:"apache",extensions:["car"],compressible:null},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"],compressible:null},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"],compressible:null},"application/vnd.dbf":{source:"iana",extensions:["dbf"],compressible:null},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"],compressible:null},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"],compressible:null},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"],compressible:null},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"],compressible:null},"application/vnd.dna":{source:"iana",extensions:["dna"],compressible:null},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"],compressible:null},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"],compressible:null},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"],compressible:null},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"],compressible:null},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"],compressible:null},"application/vnd.dvb.service":{source:"iana",extensions:["svc"],compressible:null},"application/vnd.dynageo":{source:"iana",extensions:["geo"],compressible:null},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"],compressible:null},"application/vnd.enliven":{source:"iana",extensions:["nml"],compressible:null},"application/vnd.epson.esf":{source:"iana",extensions:["esf"],compressible:null},"application/vnd.epson.msf":{source:"iana",extensions:["msf"],compressible:null},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"],compressible:null},"application/vnd.epson.salt":{source:"iana",extensions:["slt"],compressible:null},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"],compressible:null},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"],compressible:null},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"],compressible:null},"application/vnd.fdf":{source:"iana",extensions:["fdf"],compressible:null},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"],compressible:null},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"],compressible:null},"application/vnd.flographit":{source:"iana",extensions:["gph"],compressible:null},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"],compressible:null},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"],compressible:null},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"],compressible:null},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"],compressible:null},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"],compressible:null},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"],compressible:null},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"],compressible:null},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"],compressible:null},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"],compressible:null},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"],compressible:null},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"],compressible:null},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"],compressible:null},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"],compressible:null},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"],compressible:null},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"],compressible:null},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"],compressible:null},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"],compressible:null},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"],compressible:null},"application/vnd.geonext":{source:"iana",extensions:["gxt"],compressible:null},"application/vnd.geoplan":{source:"iana",extensions:["g2w"],compressible:null},"application/vnd.geospace":{source:"iana",extensions:["g3w"],compressible:null},"application/vnd.gmx":{source:"iana",extensions:["gmx"],compressible:null},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"],compressible:null},"application/vnd.groove-account":{source:"iana",extensions:["gac"],compressible:null},"application/vnd.groove-help":{source:"iana",extensions:["ghf"],compressible:null},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"],compressible:null},"application/vnd.groove-injector":{source:"iana",extensions:["grv"],compressible:null},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"],compressible:null},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"],compressible:null},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"],compressible:null},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"],compressible:null},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"],compressible:null},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"],compressible:null},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"],compressible:null},"application/vnd.hp-hps":{source:"iana",extensions:["hps"],compressible:null},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"],compressible:null},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"],compressible:null},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"],compressible:null},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"],compressible:null},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"],compressible:null},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"],compressible:null},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"],compressible:null},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"],compressible:null},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"],compressible:null},"application/vnd.igloader":{source:"iana",extensions:["igl"],compressible:null},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"],compressible:null},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"],compressible:null},"application/vnd.insors.igm":{source:"iana",extensions:["igm"],compressible:null},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"],compressible:null},"application/vnd.intergeo":{source:"iana",extensions:["i2g"],compressible:null},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"],compressible:null},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"],compressible:null},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"],compressible:null},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"],compressible:null},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"],compressible:null},"application/vnd.jam":{source:"iana",extensions:["jam"],compressible:null},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"],compressible:null},"application/vnd.jisp":{source:"iana",extensions:["jisp"],compressible:null},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"],compressible:null},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"],compressible:null},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"],compressible:null},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"],compressible:null},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"],compressible:null},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"],compressible:null},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"],compressible:null},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"],compressible:null},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"],compressible:null},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"],compressible:null},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"],compressible:null},"application/vnd.kidspiration":{source:"iana",extensions:["kia"],compressible:null},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"],compressible:null},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"],compressible:null},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"],compressible:null},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"],compressible:null},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"],compressible:null},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"],compressible:null},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"],compressible:null},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"],compressible:null},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"],compressible:null},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"],compressible:null},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"],compressible:null},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"],compressible:null},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"],compressible:null},"application/vnd.mcd":{source:"iana",extensions:["mcd"],compressible:null},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"],compressible:null},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"],compressible:null},"application/vnd.mfer":{source:"iana",extensions:["mwf"],compressible:null},"application/vnd.mfmp":{source:"iana",extensions:["mfm"],compressible:null},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"],compressible:null},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"],compressible:null},"application/vnd.mif":{source:"iana",extensions:["mif"],compressible:null},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"],compressible:null},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"],compressible:null},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"],compressible:null},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"],compressible:null},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"],compressible:null},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"],compressible:null},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"],compressible:null},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"],compressible:null},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"],compressible:null},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"],compressible:null},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"],compressible:null},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"],compressible:null},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"],compressible:null},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"],compressible:null},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"],compressible:null},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"],compressible:null},"application/vnd.ms-ims":{source:"iana",extensions:["ims"],compressible:null},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"],compressible:null},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"],compressible:null},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"],compressible:null},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"],compressible:null},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"],compressible:null},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"],compressible:null},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"],compressible:null},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"],compressible:null},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"],compressible:null},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"],compressible:null},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"],compressible:null},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"],compressible:null},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"],compressible:null},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"],compressible:null},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.mseq":{source:"iana",extensions:["mseq"],compressible:null},"application/vnd.musician":{source:"iana",extensions:["mus"],compressible:null},"application/vnd.muvee.style":{source:"iana",extensions:["msty"],compressible:null},"application/vnd.mynfc":{source:"iana",extensions:["taglet"],compressible:null},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"],compressible:null},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"],compressible:null},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"],compressible:null},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"],compressible:null},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"],compressible:null},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"],compressible:null},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"],compressible:null},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"],compressible:null},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"],compressible:null},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"],compressible:null},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"],compressible:null},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"],compressible:null},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"],compressible:null},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"],compressible:null},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"],compressible:null},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"],compressible:null},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"],compressible:null},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"],compressible:null},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"],compressible:null},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"],compressible:null},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"],compressible:null},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"],compressible:null},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"],compressible:null},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"],compressible:null},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"],compressible:null},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"],compressible:null},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"],compressible:null},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"],compressible:null},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"],compressible:null},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"],compressible:null},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"],compressible:null},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"],compressible:null},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"],compressible:null},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"],compressible:null},"application/vnd.pawaafile":{source:"iana",extensions:["paw"],compressible:null},"application/vnd.pg.format":{source:"iana",extensions:["str"],compressible:null},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"],compressible:null},"application/vnd.picsel":{source:"iana",extensions:["efif"],compressible:null},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"],compressible:null},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"],compressible:null},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"],compressible:null},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"],compressible:null},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"],compressible:null},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"],compressible:null},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"],compressible:null},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"],compressible:null},"application/vnd.rar":{source:"iana",extensions:["rar"],compressible:null},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"],compressible:null},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"],compressible:null},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"],compressible:null},"application/vnd.rim.cod":{source:"apache",extensions:["cod"],compressible:null},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"],compressible:null},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"],compressible:null},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"],compressible:null},"application/vnd.seemail":{source:"iana",extensions:["see"],compressible:null},"application/vnd.sema":{source:"iana",extensions:["sema"],compressible:null},"application/vnd.semd":{source:"iana",extensions:["semd"],compressible:null},"application/vnd.semf":{source:"iana",extensions:["semf"],compressible:null},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"],compressible:null},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"],compressible:null},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"],compressible:null},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"],compressible:null},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"],compressible:null},"application/vnd.smaf":{source:"iana",extensions:["mmf"],compressible:null},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"],compressible:null},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"],compressible:null},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"],compressible:null},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"],compressible:null},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"],compressible:null},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"],compressible:null},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"],compressible:null},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"],compressible:null},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"],compressible:null},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"],compressible:null},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"],compressible:null},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"],compressible:null},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"],compressible:null},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"],compressible:null},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"],compressible:null},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"],compressible:null},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"],compressible:null},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"],compressible:null},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"],compressible:null},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"],compressible:null},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"],compressible:null},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"],compressible:null},"application/vnd.svd":{source:"iana",extensions:["svd"],compressible:null},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"],compressible:null},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"],compressible:null},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"],compressible:null},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"],compressible:null},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"],compressible:null},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"],compressible:null},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"],compressible:null},"application/vnd.trueapp":{source:"iana",extensions:["tra"],compressible:null},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"],compressible:null},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"],compressible:null},"application/vnd.umajin":{source:"iana",extensions:["umj"],compressible:null},"application/vnd.unity":{source:"iana",extensions:["unityweb"],compressible:null},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.vcx":{source:"iana",extensions:["vcx"],compressible:null},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"],compressible:null},"application/vnd.visionary":{source:"iana",extensions:["vis"],compressible:null},"application/vnd.vsf":{source:"iana",extensions:["vsf"],compressible:null},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"],compressible:null},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"],compressible:null},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"],compressible:null},"application/vnd.webturbo":{source:"iana",extensions:["wtb"],compressible:null},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"],compressible:null},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"],compressible:null},"application/vnd.wqd":{source:"iana",extensions:["wqd"],compressible:null},"application/vnd.wt.stf":{source:"iana",extensions:["stf"],compressible:null},"application/vnd.xara":{source:"iana",extensions:["xar"],compressible:null},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"],compressible:null},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"],compressible:null},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"],compressible:null},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"],compressible:null},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"],compressible:null},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"],compressible:null},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"],compressible:null},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"],compressible:null},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"],compressible:null},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/widget":{source:"iana",extensions:["wgt"],compressible:null},"application/winhlp":{source:"apache",extensions:["hlp"],compressible:null},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"],compressible:null},"application/x-ace-compressed":{source:"apache",extensions:["ace"],compressible:null},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"],compressible:null},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"],compressible:null},"application/x-authorware-map":{source:"apache",extensions:["aam"],compressible:null},"application/x-authorware-seg":{source:"apache",extensions:["aas"],compressible:null},"application/x-bcpio":{source:"apache",extensions:["bcpio"],compressible:null},"application/x-bittorrent":{source:"apache",extensions:["torrent"],compressible:null},"application/x-blorb":{source:"apache",extensions:["blb","blorb"],compressible:null},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"],compressible:null},"application/x-cdlink":{source:"apache",extensions:["vcd"],compressible:null},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"],compressible:null},"application/x-chat":{source:"apache",extensions:["chat"],compressible:null},"application/x-chess-pgn":{source:"apache",extensions:["pgn"],compressible:null},"application/x-cocoa":{source:"nginx",extensions:["cco"],compressible:null},"application/x-conference":{source:"apache",extensions:["nsc"],compressible:null},"application/x-cpio":{source:"apache",extensions:["cpio"],compressible:null},"application/x-csh":{source:"apache",extensions:["csh"],compressible:null},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"],compressible:null},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"],compressible:null},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],compressible:null},"application/x-doom":{source:"apache",extensions:["wad"],compressible:null},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"],compressible:null},"application/x-eva":{source:"apache",extensions:["eva"],compressible:null},"application/x-font-bdf":{source:"apache",extensions:["bdf"],compressible:null},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"],compressible:null},"application/x-font-linux-psf":{source:"apache",extensions:["psf"],compressible:null},"application/x-font-pcf":{source:"apache",extensions:["pcf"],compressible:null},"application/x-font-snf":{source:"apache",extensions:["snf"],compressible:null},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"],compressible:null},"application/x-freearc":{source:"apache",extensions:["arc"],compressible:null},"application/x-futuresplash":{source:"apache",extensions:["spl"],compressible:null},"application/x-gca-compressed":{source:"apache",extensions:["gca"],compressible:null},"application/x-glulx":{source:"apache",extensions:["ulx"],compressible:null},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"],compressible:null},"application/x-gramps-xml":{source:"apache",extensions:["gramps"],compressible:null},"application/x-gtar":{source:"apache",extensions:["gtar"],compressible:null},"application/x-hdf":{source:"apache",extensions:["hdf"],compressible:null},"application/x-install-instructions":{source:"apache",extensions:["install"],compressible:null},"application/x-iso9660-image":{source:"apache",extensions:["iso"],compressible:null},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"],compressible:null},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"],compressible:null},"application/x-makeself":{source:"nginx",extensions:["run"],compressible:null},"application/x-mie":{source:"apache",extensions:["mie"],compressible:null},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"],compressible:null},"application/x-ms-application":{source:"apache",extensions:["application"],compressible:null},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"],compressible:null},"application/x-ms-wmd":{source:"apache",extensions:["wmd"],compressible:null},"application/x-ms-wmz":{source:"apache",extensions:["wmz"],compressible:null},"application/x-ms-xbap":{source:"apache",extensions:["xbap"],compressible:null},"application/x-msaccess":{source:"apache",extensions:["mdb"],compressible:null},"application/x-msbinder":{source:"apache",extensions:["obd"],compressible:null},"application/x-mscardfile":{source:"apache",extensions:["crd"],compressible:null},"application/x-msclip":{source:"apache",extensions:["clp"],compressible:null},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"],compressible:null},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"],compressible:null},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"],compressible:null},"application/x-msmoney":{source:"apache",extensions:["mny"],compressible:null},"application/x-mspublisher":{source:"apache",extensions:["pub"],compressible:null},"application/x-msschedule":{source:"apache",extensions:["scd"],compressible:null},"application/x-msterminal":{source:"apache",extensions:["trm"],compressible:null},"application/x-mswrite":{source:"apache",extensions:["wri"],compressible:null},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"],compressible:null},"application/x-nzb":{source:"apache",extensions:["nzb"],compressible:null},"application/x-perl":{source:"nginx",extensions:["pl","pm"],compressible:null},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"],compressible:null},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"],compressible:null},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"],compressible:null},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"],compressible:null},"application/x-research-info-systems":{source:"apache",extensions:["ris"],compressible:null},"application/x-sea":{source:"nginx",extensions:["sea"],compressible:null},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"],compressible:null},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"],compressible:null},"application/x-sql":{source:"apache",extensions:["sql"],compressible:null},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"],compressible:null},"application/x-subrip":{source:"apache",extensions:["srt"],compressible:null},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"],compressible:null},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"],compressible:null},"application/x-t3vm-image":{source:"apache",extensions:["t3"],compressible:null},"application/x-tads":{source:"apache",extensions:["gam"],compressible:null},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"],compressible:null},"application/x-tex":{source:"apache",extensions:["tex"],compressible:null},"application/x-tex-tfm":{source:"apache",extensions:["tfm"],compressible:null},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"],compressible:null},"application/x-tgif":{source:"apache",extensions:["obj"],compressible:null},"application/x-ustar":{source:"apache",extensions:["ustar"],compressible:null},"application/x-wais-source":{source:"apache",extensions:["src"],compressible:null},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"],compressible:null},"application/x-xfig":{source:"apache",extensions:["fig"],compressible:null},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"],compressible:null},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"],compressible:null},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"],compressible:null},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"],compressible:null},"audio/amr":{source:"iana",extensions:["amr"],compressible:null},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"],compressible:null},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"],compressible:null},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"],compressible:null},"audio/silk":{source:"apache",extensions:["sil"],compressible:null},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"],compressible:null},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"],compressible:null},"audio/vnd.dra":{source:"iana",extensions:["dra"],compressible:null},"audio/vnd.dts":{source:"iana",extensions:["dts"],compressible:null},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"],compressible:null},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"],compressible:null},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"],compressible:null},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"],compressible:null},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"],compressible:null},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"],compressible:null},"audio/vnd.rip":{source:"iana",extensions:["rip"],compressible:null},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"],compressible:null},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"],compressible:null},"audio/x-m4a":{source:"nginx",extensions:["m4a"],compressible:null},"audio/x-matroska":{source:"apache",extensions:["mka"],compressible:null},"audio/x-mpegurl":{source:"apache",extensions:["m3u"],compressible:null},"audio/x-ms-wax":{source:"apache",extensions:["wax"],compressible:null},"audio/x-ms-wma":{source:"apache",extensions:["wma"],compressible:null},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"],compressible:null},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"],compressible:null},"audio/x-realaudio":{source:"nginx",extensions:["ra"],compressible:null},"audio/x-wav":{source:"apache",extensions:["wav"],compressible:null},"audio/x-gsm":{source:"apache",extensions:["gsm"],compressible:null},"audio/xm":{source:"apache",extensions:["xm"],compressible:null},"chemical/x-cdx":{source:"apache",extensions:["cdx"],compressible:null},"chemical/x-cif":{source:"apache",extensions:["cif"],compressible:null},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"],compressible:null},"chemical/x-cml":{source:"apache",extensions:["cml"],compressible:null},"chemical/x-csml":{source:"apache",extensions:["csml"],compressible:null},"chemical/x-xyz":{source:"apache",extensions:["xyz"],compressible:null},"font/collection":{source:"iana",extensions:["ttc"],compressible:null},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"],compressible:null},"font/woff2":{source:"iana",extensions:["woff2"],compressible:null},"image/aces":{source:"iana",extensions:["exr"],compressible:null},"image/avci":{source:"iana",extensions:["avci"],compressible:null},"image/avcs":{source:"iana",extensions:["avcs"],compressible:null},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"],compressible:null},"image/dicom-rle":{source:"iana",extensions:["drle"],compressible:null},"image/emf":{source:"iana",extensions:["emf"],compressible:null},"image/fits":{source:"iana",extensions:["fits"],compressible:null},"image/g3fax":{source:"iana",extensions:["g3"],compressible:null},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"],compressible:null},"image/heic-sequence":{source:"iana",extensions:["heics"],compressible:null},"image/heif":{source:"iana",extensions:["heif"],compressible:null},"image/heif-sequence":{source:"iana",extensions:["heifs"],compressible:null},"image/hej2k":{source:"iana",extensions:["hej2"],compressible:null},"image/hsj2":{source:"iana",extensions:["hsj2"],compressible:null},"image/ief":{source:"iana",extensions:["ief"],compressible:null},"image/jls":{source:"iana",extensions:["jls"],compressible:null},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"],compressible:null},"image/jphc":{source:"iana",extensions:["jhc"],compressible:null},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"],compressible:null},"image/jxra":{source:"iana",extensions:["jxra"],compressible:null},"image/jxrs":{source:"iana",extensions:["jxrs"],compressible:null},"image/jxs":{source:"iana",extensions:["jxs"],compressible:null},"image/jxsc":{source:"iana",extensions:["jxsc"],compressible:null},"image/jxsi":{source:"iana",extensions:["jxsi"],compressible:null},"image/jxss":{source:"iana",extensions:["jxss"],compressible:null},"image/ktx":{source:"iana",extensions:["ktx"],compressible:null},"image/ktx2":{source:"iana",extensions:["ktx2"],compressible:null},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"],compressible:null},"image/prs.pti":{source:"iana",extensions:["pti"],compressible:null},"image/sgi":{source:"apache",extensions:["sgi"],compressible:null},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"],compressible:null},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"],compressible:null},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"],compressible:null},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"],compressible:null},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"],compressible:null},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"image/vnd.dwg":{source:"iana",extensions:["dwg"],compressible:null},"image/vnd.dxf":{source:"iana",extensions:["dxf"],compressible:null},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"],compressible:null},"image/vnd.fpx":{source:"iana",extensions:["fpx"],compressible:null},"image/vnd.fst":{source:"iana",extensions:["fst"],compressible:null},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"],compressible:null},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"],compressible:null},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"],compressible:null},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"],compressible:null},"image/vnd.net-fpx":{source:"iana",extensions:["npx"],compressible:null},"image/vnd.pco.b16":{source:"iana",extensions:["b16"],compressible:null},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"],compressible:null},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"],compressible:null},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"],compressible:null},"image/vnd.xiff":{source:"iana",extensions:["xif"],compressible:null},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"],compressible:null},"image/webp":{source:"apache",extensions:["webp"],compressible:null},"image/wmf":{source:"iana",extensions:["wmf"],compressible:null},"image/x-3ds":{source:"apache",extensions:["3ds"],compressible:null},"image/x-cmu-raster":{source:"apache",extensions:["ras"],compressible:null},"image/x-cmx":{source:"apache",extensions:["cmx"],compressible:null},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"],compressible:null},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"],compressible:null},"image/x-mrsid-image":{source:"apache",extensions:["sid"],compressible:null},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"],compressible:null},"image/x-pict":{source:"apache",extensions:["pic","pct"],compressible:null},"image/x-portable-anymap":{source:"apache",extensions:["pnm"],compressible:null},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"],compressible:null},"image/x-portable-graymap":{source:"apache",extensions:["pgm"],compressible:null},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"],compressible:null},"image/x-rgb":{source:"apache",extensions:["rgb"],compressible:null},"image/x-tga":{source:"apache",extensions:["tga"],compressible:null},"image/x-xbitmap":{source:"apache",extensions:["xbm"],compressible:null},"image/x-xpixmap":{source:"apache",extensions:["xpm"],compressible:null},"image/x-xwindowdump":{source:"apache",extensions:["xwd"],compressible:null},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"],compressible:null},"message/global":{source:"iana",extensions:["u8msg"],compressible:null},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"],compressible:null},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"],compressible:null},"message/global-headers":{source:"iana",extensions:["u8hdr"],compressible:null},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"],compressible:null},"model/3mf":{source:"iana",extensions:["3mf"],compressible:null},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"],compressible:null},"model/obj":{source:"iana",extensions:["obj"],compressible:null},"model/step":{source:"iana",compressible:!1,extensions:[".p21",".stp",".step",".stpnc",".210"]},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"],compressible:null},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"],compressible:null},"model/vnd.gdl":{source:"iana",extensions:["gdl"],compressible:null},"model/vnd.gtw":{source:"iana",extensions:["gtw"],compressible:null},"model/vnd.mts":{source:"iana",extensions:["mts"],compressible:null},"model/vnd.opengex":{source:"iana",extensions:["ogex"],compressible:null},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"],compressible:null},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"],compressible:null},"model/vnd.sap.vds":{source:"iana",extensions:["vds"],compressible:null},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"],compressible:null},"model/vnd.vtu":{source:"iana",extensions:["vtu"],compressible:null},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"],compressible:null},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"],compressible:null},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"],compressible:null},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"],compressible:null},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"],compressible:null},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"],compressible:null},"text/shex":{source:"iana",extensions:["shex"],compressible:null},"text/spdx":{source:"iana",extensions:["spdx"],compressible:null},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"],compressible:null},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"],compressible:null},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"],compressible:null},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"],compressible:null},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"],compressible:null},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"],compressible:null},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"],compressible:null},"text/vnd.fly":{source:"iana",extensions:["fly"],compressible:null},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"],compressible:null},"text/vnd.graphviz":{source:"iana",extensions:["gv"],compressible:null},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"],compressible:null},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"],compressible:null},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"],compressible:null},"text/vnd.wap.wml":{source:"iana",extensions:["wml"],compressible:null},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"],compressible:null},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"],compressible:null},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"],compressible:null},"text/x-component":{source:"nginx",extensions:["htc"],compressible:null},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"],compressible:null},"text/x-java-source":{source:"apache",extensions:["java"],compressible:null},"text/x-nfo":{source:"apache",extensions:["nfo"],compressible:null},"text/x-opml":{source:"apache",extensions:["opml"],compressible:null},"text/x-pascal":{source:"apache",extensions:["p","pas"],compressible:null},"text/x-setext":{source:"apache",extensions:["etx"],compressible:null},"text/x-sfv":{source:"apache",extensions:["sfv"],compressible:null},"text/x-uuencode":{source:"apache",extensions:["uu"],compressible:null},"text/x-vcalendar":{source:"apache",extensions:["vcs"],compressible:null},"text/x-vcard":{source:"apache",extensions:["vcf"],compressible:null},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"],compressible:null},"video/3gpp2":{source:"iana",extensions:["3g2"],compressible:null},"video/h261":{source:"iana",extensions:["h261"],compressible:null},"video/h263":{source:"iana",extensions:["h263"],compressible:null},"video/h264":{source:"iana",extensions:["h264"],compressible:null},"video/iso.segment":{source:"iana",extensions:["m4s"],compressible:null},"video/jpeg":{source:"iana",extensions:["jpgv"],compressible:null},"video/jpm":{source:"apache",extensions:["jpm","jpgm"],compressible:null},"video/mj2":{source:"iana",extensions:["mj2","mjp2"],compressible:null},"video/mp2t":{source:"iana",extensions:["ts"],compressible:null},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"],compressible:null},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"],compressible:null},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"],compressible:null},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"],compressible:null},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"],compressible:null},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"],compressible:null},"video/vnd.fvt":{source:"iana",extensions:["fvt"],compressible:null},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"],compressible:null},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"],compressible:null},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"],compressible:null},"video/vnd.vivo":{source:"iana",extensions:["viv"],compressible:null},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"],compressible:null},"video/x-fli":{source:"apache",extensions:["fli"],compressible:null},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"],compressible:null},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"],compressible:null},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"],compressible:null},"video/x-ms-vob":{source:"apache",extensions:["vob"],compressible:null},"video/x-ms-wm":{source:"apache",extensions:["wm"],compressible:null},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"],compressible:null},"video/x-ms-wvx":{source:"apache",extensions:["wvx"],compressible:null},"video/x-msvideo":{source:"apache",extensions:["avi"],compressible:null},"video/x-sgi-movie":{source:"apache",extensions:["movie"],compressible:null},"video/x-smv":{source:"apache",extensions:["smv"],compressible:null},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"],compressible:null}},sW={},sY={},sQ=!1,sX=Symbol.for("effect/Encoding/errors/Decode"),sZ=(e,t)=>{let s={_tag:"DecodeException",[sX]:sX,input:e};return R(t)&&(s.message=t),s},s0=new TextEncoder;function s1(e){if(e>=s3.length)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);let t=s3[e];if(255===t)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}let s2=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],s3=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],s5=e=>{let t="";for(let s=0;s<e.length;++s)t+=s6[e[s]];return t},s4=e=>{let t=new TextEncoder().encode(e);if(t.length%2!=0)return tv(sZ(e,`Length must be a multiple of 2, but is ${t.length}`));try{let e=t.length/2,s=new Uint8Array(e);for(let n=0;n<e;n++){let e=s8(t[2*n]),i=s8(t[2*n+1]);s[n]=e<<4|i}return t_(s)}catch(t){return tv(sZ(e,t instanceof Error?t.message:"Invalid input"))}},s6=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],s8=e=>{if(48<=e&&e<=57)return e-48;if(97<=e&&e<=102)return e-97+10;if(65<=e&&e<=70)return e-65+10;throw TypeError("Invalid input")},s7=e=>"string"==typeof e?s5(s0.encode(e)):s5(e),s9=e=>s4(e);class ne extends sE("InvalidRouteConfig"){constructor(e,t){super({reason:t?`Expected route config to have a ${t} for key ${e} but none was found.`:`Encountered an invalid route config during backfilling. ${e} was not found.`})}}class nt extends sE("UnknownFileType"){constructor(e){super({reason:`Could not determine type for ${e}`})}}class ns extends sE("InvalidFileType"){constructor(e,t){super({reason:`File type ${e} not allowed for ${t}`})}}class nn extends sE("InvalidFileSize"){constructor(e){super({reason:`Invalid file size: ${e}`})}}class ni extends sE("InvalidURL"){constructor(e){super({reason:`Failed to parse '${e}' as a URL.`})}}class nr extends sE("RetryError"){}class na extends sE("FetchError"){}class no extends sE("InvalidJson"){}class nl extends sE("BadRequestError"){getMessage(){return G(this.json)&&"string"==typeof this.json.message?this.json.message:this.message}}function nc(e){return"image"===e?"4MB":"video"===e?"16MB":"audio"===e||"blob"===e?"8MB":"pdf"===e?"4MB":"text"===e?"64KB":"4MB"}let nu=e=>{if(Array.isArray(e))return st(e.reduce((e,t)=>(e[t]={maxFileSize:nc(t),maxFileCount:1,minFileCount:1,contentDisposition:"inline"},e),{}));let t={};for(let s of ng(e)){let n=e[s];if(!n)return ss(new ne(s));let i={maxFileSize:nc(s),maxFileCount:1,minFileCount:1,contentDisposition:"inline"};t[s]={...i,...n}}return st(JSON.parse(JSON.stringify(t,ny)))},np=(e,t)=>{let s=function(e){if(!e||"string"!=typeof e)return!1;let t=(function(e){let t=e.lastIndexOf(".");return t<0?"":e.substring(t)})("x."+e).toLowerCase().substring(1);return!!t&&((function(e,t){if(sQ)return;sQ=!0;let s=["nginx","apache",void 0,"iana"];Object.keys(sH).forEach(n=>{let i=sH[n],r=i.extensions;if(r?.length)for(let a of(e[n]=r,r)){if(t[a]){let e=s.indexOf(sH[t[a]].source),n=s.indexOf(i.source);if("application/octet-stream"!==t[a]&&(e>n||e===n&&t[a].startsWith("application/")))continue}t[a]=n}})}(sW,sY),sY)[t]||!1)}(e);if(!s)return t.includes("blob")?st("blob"):ss(new nt(e));if(t.some(e=>e.includes("/"))&&t.includes(s))return st(s);let n="application/pdf"===s.toLowerCase()?"pdf":s.split("/")[0];return t.includes(n)?st(n):t.includes("blob")?st("blob"):ss(new ns(n,e))};function nm(e){let t="https://api.uploadthing.com";return sz.env.CUSTOM_INFRA_URL&&(t=sz.env.CUSTOM_INFRA_URL),`${t}${e}`}let nh=["B","KB","MB","GB"],nd=e=>{let t=RegExp(`^(\\d+)(\\.\\d+)?\\s*(${nh.join("|")})$`,"i"),s=e.match(t);if(!s)return ss(new nn(e));let n=parseFloat(s[1]),i=s[3].toUpperCase();return st(Math.floor(n*Math.pow(1024,nh.indexOf(i))))},nf=e=>{if(0===e||-1===e)return"0B";let t=Math.floor(Math.log(e)/Math.log(1e3));return`${(e/Math.pow(1e3,t)).toFixed(2)}${nh[t]}`};function ng(e){return Object.keys(e)}function nb(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let nx=e=>sh(function*(){let t=sz.env?.VERCEL_URL?`https://${sz.env.VERCEL_URL}`:"http://localhost:3000",s=yield*so({try:()=>new URL(e??"/api/uploadthing",t),catch:()=>new ni(e??"/api/uploadthing")});return"/"===s.pathname&&(s.pathname="/api/uploadthing"),s}),ny=(e,t)=>"number"!=typeof t||Number.isSafeInteger(t)||t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER?t:t===1/0?Number.MAX_SAFE_INTEGER:t===-1/0?Number.MIN_SAFE_INTEGER:Number.isNaN(t)?0:void 0,nv={BAD_REQUEST:400,NOT_FOUND:404,FORBIDDEN:403,INTERNAL_SERVER_ERROR:500,INTERNAL_CLIENT_ERROR:500,TOO_LARGE:413,TOO_SMALL:400,TOO_MANY_FILES:400,KEY_TOO_LONG:400,URL_GENERATION_FAILED:500,UPLOAD_FAILED:500,MISSING_ENV:500,FILE_LIMIT_EXCEEDED:500};class n_ extends sO{constructor(e){let t="string"==typeof e?{code:"INTERNAL_SERVER_ERROR",message:e}:e;super({message:t.message??function(e,t){return"string"==typeof e?e:e instanceof Error||e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:t??"An unknown error occurred"}(t.cause,t.code)}),this._tag="UploadThingError",this.name="UploadThingError",this.code=t.code,this.data=t.data,t.cause instanceof Error?this.cause=t.cause:nb(t.cause)&&"number"==typeof t.cause.status&&"string"==typeof t.cause.statusText?this.cause=Error(`Response ${t.cause.status} ${t.cause.statusText}`):"string"==typeof t.cause?this.cause=Error(t.cause):this.cause=t.cause}static toObject(e){return{code:e.code,message:e.message,data:e.data}}static serialize(e){return JSON.stringify(n_.toObject(e))}}class nS extends tm("uploadthing/FetchContext")(){}let nw=(e,t)=>sf(tQ(nS),({fetch:s,baseHeaders:n})=>{let i=new Headers(t?.headers??[]);for(let[e,t]of Object.entries(n))"string"==typeof t&&i.set(e,t);let r={url:e.toString(),method:t?.method,body:t?.body,headers:Object.fromEntries(i)};return sl({try:n=>s(e,{...t,headers:i,signal:n}),catch:e=>new na({error:e instanceof Error?{...e,name:e.name,message:e.message,stack:e.stack}:e,input:r})}).pipe(sd(e=>Object.assign(e,{requestUrl:r.url})),sv("fetch"))}),nk=e=>sl({try:async()=>({json:await e.json(),ok:e.ok,status:e.status}),catch:t=>new no({error:t,input:e.requestUrl})}).pipe(sy(({ok:e})=>e,({json:t,status:s})=>new nl({status:s,message:`Request to ${e.requestUrl} failed with status ${s}`,json:t})),sd(({json:e})=>e),sv("parseJson")),nO=e=>sl({try:()=>e.json(),catch:t=>new no({error:t,input:e.url})}).pipe(sv("parseRequestJson")),nE="hmac-sha256=",nI={name:"HMAC",hash:"SHA-256"},nT=async(e,t)=>{let s=new TextEncoder,n=await crypto.subtle.importKey("raw",s.encode(t),nI,!1,["sign"]),i=await crypto.subtle.sign(nI,n,s.encode(e)).then(e=>s7(new Uint8Array(e)));return`${nE}${i}`},nR=async(e,t,s)=>{let n=t?.slice(nE.length);if(!n)return!1;let i=new TextEncoder,r=await crypto.subtle.importKey("raw",i.encode(s),nI,!1,["verify"]);return await crypto.subtle.verify(nI,r,tO(s9(n)),i.encode(e))},nN=e=>(t,s)=>t===s||e(t,s),nA=(e,t)=>e===t,nF=b(2,(e,t)=>nN((s,n)=>e(t(s),t(n)))),nj=nF(nA,e=>e.getTime()),nM=e=>nN((t,s)=>{if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],s[n]))return!1;return!0}),nC=e=>e.length>0,nL=()=>e3,nU=b(2,(e,{onNone:t,onSome:s})=>e1(e)?t():s(e.value)),nP=b(2,(e,t)=>e1(e)?t():e.value),n$=b(2,(e,t)=>e1(e)?t():e),nD=b(2,(e,t)=>e1(e)?e5(t()):e),nz=e=>null==e?nL():e5(e),nB=nP(S),nq=e=>(...t)=>{try{return e5(e(...t))}catch(e){return nL()}},nJ=b(2,(e,t)=>{if(e2(e))return e.value;throw t()})(()=>Error("getOrThrow called on a None")),nK=b(2,(e,t)=>e1(e)?nL():e5(t(e.value))),nV=b(2,(e,t)=>e1(e)?nL():t(e.value)),nG=b(2,(e,t)=>e1(e)?nL():t(e.value)),nH=b(2,(e,t)=>nG(e,e=>t(e)?e5(e):e3)),nW=e=>nN((t,s)=>e1(t)?e1(s):!e1(s)&&e(t.value,s.value)),nY=(a=e_(),b(2,(e,t)=>!e1(e)&&a(e.value,t)));Symbol.iterator,()=>nQ;let nQ={next:()=>({done:!0,value:void 0})},nX=e=>(t,s)=>t===s?0:e(t,s),nZ=nX((e,t)=>e<t?-1:1),n0=((e,t)=>e<t?-1:1,b(2,(e,t)=>nX((s,n)=>e(t(s),t(n)))));Object.fromEntries,(e,t)=>{let s=[];for(let n of n1(e))s.push(t(n,e[n]));return s};let n1=e=>Object.keys(e),n2=(...e)=>e,n3=e=>Array(e),n5=e=>Array.isArray(e)?e:Array.from(e),n4=b(2,(e,{onEmpty:t,onNonEmpty:s})=>it(e)?s(il(e),ip(e)):t()),n6=b(2,(e,t)=>[t,...e]),n8=b(2,(e,t)=>[...e,t]),n7=b(2,(e,t)=>n5(e).concat(n5(t))),n9=Array.isArray,ie=e=>0===e.length,it=nC,is=(e,t)=>e<0||e>=t.length,ii=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),ir=b(2,(e,t)=>{let s=Math.floor(t);return is(s,e)?nL():e5(e[s])}),ia=b(2,(e,t)=>{let s=Math.floor(t);if(is(s,e))throw Error(`Index ${s} out of bounds`);return e[s]}),io=ir(0),il=ia(0),ic=e=>it(e)?e5(iu(e)):nL(),iu=e=>e[e.length-1],ip=e=>e.slice(1),im=(e,t)=>{let s=0;for(let n of e){if(!t(n,s))break;s++}return s},ih=b(2,(e,t)=>i_(e,im(e,t))),id=b(2,(e,t)=>{let s=n5(e);return s.slice(ii(t,s),s.length)}),ig=e=>Array.from(e).reverse(),ib=b(2,(e,t)=>{let s=Array.from(e);return s.sort(t),s}),ix=b(2,(e,t)=>iy(e,t,n2)),iy=b(3,(e,t,s)=>{let n=n5(e),i=n5(t);if(it(n)&&it(i)){let e=[s(il(n),il(i))],t=Math.min(n.length,i.length);for(let r=1;r<t;r++)e[r]=s(n[r],i[r]);return e}return[]}),iv=e_(),i_=b(2,(e,t)=>{let s=Array.from(e),n=Math.floor(t);return it(s)?n>=1?iS(s,n):[[],s]:[s,[]]}),iS=b(2,(e,t)=>{let s=Math.max(1,Math.floor(t));return s>=e.length?[iw(e),[]]:[n6(e.slice(1,s),il(e)),e.slice(s)]}),iw=e=>e.slice(),ik=b(3,(e,t,s)=>{let n=n5(e),i=n5(t);return it(n)?it(i)?iM(s)(n7(n,i)):n:i}),iO=b(2,(e,t)=>ik(e,t,iv)),iE=()=>[],iI=e=>[e],iT=b(2,(e,t)=>e.map(t)),iR=b(2,(e,t)=>{if(ie(e))return[];let s=[];for(let n=0;n<e.length;n++){let i=t(e[n],n);for(let e=0;e<i.length;e++)s.push(i[e])}return s}),iN=iR(x),iA=b(2,(e,t)=>{let s=n5(e),n=[];for(let e=0;e<s.length;e++){let i=t(s[e],e);e2(i)&&n.push(i.value)}return n}),iF=b(3,(e,t,s)=>n5(e).reduce((e,t,n)=>s(e,t,n),t)),ij=((e,t,s)=>n5(e).reduceRight((e,t,n)=>s(e,t,n),t),(e,t)=>{let s;let n=[],i=e;for(;e2(s=t(i));){let[e,t]=s.value;n.push(e),i=t}return n}),iM=b(2,(e,t)=>{let s=n5(e);if(it(s)){let e=[il(s)];for(let n of ip(s))e.every(e=>!t(n,e))&&e.push(n);return e}return[]}),iC=e=>iM(e,e_()),iL=b(2,(e,t)=>n5(e).join(t)),iU=Symbol.for("effect/BigDecimal"),iP={[iU]:iU,[er](){let e=iK(this);return w(ea(e.value),el(ep(e.scale)),eg(this))},[eb](e){return i$(e)&&iH(this,e)},toString(){return`BigDecimal(${iQ(this)})`},toJSON(){return{_id:"BigDecimal",value:String(this.value),scale:this.scale}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},i$=e=>z(e,iU),iD=(e,t)=>{let s=Object.create(iP);return s.value=e,s.scale=t,s},iz=(e,t)=>{if(e!==iB&&e%iq===iB)throw RangeError("Value must be normalized");let s=iD(e,t);return s.normalized=s,s},iB=BigInt(0),iq=BigInt(10),iJ=iz(iB,0),iK=e=>{if(void 0===e.normalized){if(e.value===iB)e.normalized=iJ;else{let t=`${e.value}`,s=0;for(let e=t.length-1;e>=0;e--)if("0"===t[e])s++;else break;0===s&&(e.normalized=e);let n=BigInt(t.substring(0,t.length-s)),i=e.scale-s;e.normalized=iz(n,i)}}return e.normalized},iV=(e,t)=>t>e.scale?iD(e.value*iq**BigInt(t-e.scale),t):t<e.scale?iD(e.value/iq**BigInt(e.scale-t),t):e,iG=nN((e,t)=>e.scale>t.scale?iV(t,e.scale).value===e.value:e.scale<t.scale?iV(e,t.scale).value===t.value:e.value===t.value),iH=b(2,(e,t)=>iG(e,t)),iW=e=>{let[t,s=""]=`${e}`.split(".");return iD(BigInt(`${t}${s}`),s.length)},iY=e=>{let t,s;let n=e.search(/\./);if(-1!==n){let i=e.slice(0,n),r=e.slice(n+1);t=`${i}${r}`,s=r.length}else t=e,s=0;return""===t?e5(iJ):/^(?:\+|-)?\d+$/.test(t)?e5(iD(BigInt(t),s)):nL()},iQ=e=>{let t,s;let n=e.value<iB,i=n?`${e.value}`.substring(1):`${e.value}`;if(e.scale>=i.length)t="0",s="0".repeat(e.scale-i.length)+i;else{let n=i.length-e.scale;if(n>i.length){let e=n-i.length;t=`${i}${"0".repeat(e)}`,s=""}else s=i.slice(n),t=i.slice(0,n)}let r=""===s?t:`${t}.${s}`;return n?`-${r}`:r},iX=e=>Number(iQ(e)),iZ=e=>e>BigInt(Number.MAX_SAFE_INTEGER)||e<BigInt(Number.MIN_SAFE_INTEGER)?nL():e5(Number(e)),i0=e=>{try{return""===e.trim()?nL():e5(BigInt(e))}catch(e){return nL()}},i1=e=>{if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)return nL();try{return e5(BigInt(e))}catch(e){return nL()}},i2=e=>!e,i3=Symbol.for("effect/Chunk"),i5=[],i4=nN((e,t)=>e.length===t.length&&rr(e).every((e,s)=>ex(e,ru(t,s)))),i6={[i3]:{_A:e=>e},toString(){return ek(this.toJSON())},toJSON(){return{_id:"Chunk",values:rr(this).map(ew)}},[eS](){return this.toJSON()},[eb](e){return i7(e)&&i4(this,e)},[er](){return eg(this,ef(rr(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return i5[Symbol.iterator]();default:return rr(this)[Symbol.iterator]()}},pipe(){return eI(this,arguments)}},i8=e=>{let t=Object.create(i6);switch(t.backing=e,e._tag){case"IEmpty":t.length=0,t.depth=0,t.left=t,t.right=t;break;case"IConcat":t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break;case"IArray":t.length=e.array.length,t.depth=0,t.left=i9,t.right=i9;break;case"ISingleton":t.length=1,t.depth=0,t.left=i9,t.right=i9;break;case"ISlice":t.length=e.length,t.depth=e.chunk.depth+1,t.left=i9,t.right=i9}return t},i7=e=>z(e,i3),i9=i8({_tag:"IEmpty"}),re=()=>i9,rt=(...e)=>1===e.length?rs(e[0]):rc(e),rs=e=>i8({_tag:"ISingleton",a:e}),rn=e=>i7(e)?e:i8({_tag:"IArray",array:n5(e)}),ri=(e,t,s)=>{switch(e.backing._tag){case"IArray":!function(e,t,s,n,i){for(let r=t;r<Math.min(e.length,t+i);r++)s[n+r-t]=e[r]}(e.backing.array,0,t,s,e.length);break;case"IConcat":ri(e.left,t,s),ri(e.right,t,s+e.left.length);break;case"ISingleton":t[s]=e.backing.a;break;case"ISlice":{let n=0,i=s;for(;n<e.length;)t[i]=ru(e,n),n+=1,i+=1}}},rr=e=>{switch(e.backing._tag){case"IEmpty":return i5;case"IArray":return e.backing.array;default:{let t=Array(e.length);return ri(e,t,0),e.backing={_tag:"IArray",array:t},e.left=i9,e.right=i9,e.depth=0,t}}},ra=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return i8({_tag:"IArray",array:ig(e.backing.array)});case"IConcat":return i8({_tag:"IConcat",left:ra(e.backing.right),right:ra(e.backing.left)});case"ISlice":return rl(ig(rr(e)))}},ro=b(2,(e,t)=>t<0||t>=e.length?nL():e5(ru(e,t))),rl=e=>i8({_tag:"IArray",array:e}),rc=e=>rl(e),ru=b(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw Error("Index out of bounds");case"ISingleton":if(0!==t)throw Error("Index out of bounds");return e.backing.a;case"IArray":if(t>=e.length||t<0)throw Error("Index out of bounds");return e.backing.array[t];case"IConcat":return t<e.left.length?ru(e.left,t):ru(e.right,t-e.left.length);case"ISlice":return ru(e.backing.chunk,t+e.backing.offset)}}),rp=b(2,(e,t)=>rd(e,rs(t))),rm=b(2,(e,t)=>rd(rs(t),e)),rh=b(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return i9;switch(e.backing._tag){case"ISlice":return i8({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":if(t>e.left.length)return rh(e.right,t-e.left.length);return i8({_tag:"IConcat",left:rh(e.left,t),right:e.right});default:return i8({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),rd=b(2,(e,t)=>{if("IEmpty"===e.backing._tag)return t;if("IEmpty"===t.backing._tag)return e;let s=t.depth-e.depth;if(1>=Math.abs(s))return i8({_tag:"IConcat",left:e,right:t});if(s<-1){if(e.left.depth>=e.right.depth){let s=rd(e.right,t);return i8({_tag:"IConcat",left:e.left,right:s})}{let s=rd(e.right.right,t);if(s.depth===e.depth-3){let t=i8({_tag:"IConcat",left:e.right.left,right:s});return i8({_tag:"IConcat",left:e.left,right:t})}{let t=i8({_tag:"IConcat",left:e.left,right:e.right.left});return i8({_tag:"IConcat",left:t,right:s})}}}if(t.right.depth>=t.left.depth)return i8({_tag:"IConcat",left:rd(e,t.left),right:t.right});{let s=rd(e,t.left.left);if(s.depth===t.depth-3){let e=i8({_tag:"IConcat",left:s,right:t.left.right});return i8({_tag:"IConcat",left:e,right:t.right})}{let e=i8({_tag:"IConcat",left:t.left.right,right:t.right});return i8({_tag:"IConcat",left:s,right:e})}}}),rf=e=>0===e.length,rg=e=>e.length>0,rb=ro(0),rx=e=>ru(e,0),ry=e=>rh(e,1);function rv(e,t){var s;return s=e&t-1,s-=s>>1&1431655765,s=(s=(858993459&s)+(s>>2&858993459))+(s>>4)&252645135,s+=s>>8,127&(s+=s>>16)}let r_=(e,t)=>({value:e,previous:t});function rS(e,t,s,n){let i=n;if(!e){let e=n.length;i=Array(e);for(let t=0;t<e;++t)i[t]=n[t]}return i[t]=s,i}function rw(e,t,s){let n=s.length-1,i=0,r=0,a=s;if(e)i=r=t;else for(a=Array(n);i<t;)a[r++]=s[i++];for(++i;i<=n;)a[r++]=s[i++];return e&&(a.length=n),a}class rk{modify(e,t,s,n,i,r){let a=s(nL());return e1(a)?new rk:(++r.value,new rI(e,n,i,a))}constructor(){this._tag="EmptyNode"}}function rO(e){return B(e,"EmptyNode")}function rE(e,t){return!rO(e)&&t===e.edit}class rI{constructor(e,t,s,n){this._tag="LeafNode",this.edit=e,this.hash=t,this.key=s,this.value=n}modify(e,t,s,n,i,r){if(ex(i,this.key)){let t=s(this.value);return t===this.value?this:e1(t)?(--r.value,new rk):rE(this,e)?(this.value=t,this):new rI(e,n,i,t)}let a=s(nL());return e1(a)?this:(++r.value,rA(e,t,this.hash,this,n,new rI(e,n,i,a)))}}class rT{constructor(e,t,s){this._tag="CollisionNode",this.edit=e,this.hash=t,this.children=s}modify(e,t,s,n,i,r){if(n===this.hash){let t=rE(this,e),n=this.updateCollisionList(t,e,this.hash,this.children,s,i,r);return n===this.children?this:n.length>1?new rT(e,this.hash,n):n[0]}let a=s(nL());return e1(a)?this:(++r.value,rA(e,t,this.hash,this,n,new rI(e,n,i,a)))}updateCollisionList(e,t,s,n,i,r,a){let o=n.length;for(let l=0;l<o;++l){let o=n[l];if("key"in o&&ex(r,o.key)){let c=o.value,u=i(c);if(u===c)return n;if(e1(u))return--a.value,rw(e,l,n);return rS(e,l,new rI(t,s,r,u),n)}}let l=i(nL());return e1(l)?n:(++a.value,rS(e,o,new rI(t,s,r,l),n))}}class rR{constructor(e,t,s){this._tag="IndexedNode",this.edit=e,this.mask=t,this.children=s}modify(e,t,s,n,i,r){let a;let o=this.mask,l=this.children,c=n>>>t&31,u=1<<c,p=rv(o,u),m=o&u,h=rE(this,e);if(!m){let a=new rk().modify(e,t+5,s,n,i,r);return a?l.length>=16?function(e,t,s,n,i){let r=[],a=n,o=0;for(let e=0;a;++e)1&a&&(r[e]=i[o++]),a>>>=1;return r[t]=s,new rN(e,o+1,r)}(e,c,a,o,l):new rR(e,o|u,function(e,t,s,n){let i=n.length;if(e){let e=i;for(;e>=t;)n[e--]=n[e];return n[t]=s,n}let r=0,a=0,o=Array(i+1);for(;r<t;)o[a++]=n[r++];for(o[t]=s;r<i;)o[++a]=n[r++];return o}(h,p,a,l)):this}let d=l[p],f=d.modify(e,t+5,s,n,i,r);if(d===f)return this;let g=o;if(rO(f)){var b;if(!(g&=~u))return new rk;if(l.length<=2&&(rO(b=l[1^p])||"LeafNode"===b._tag||"CollisionNode"===b._tag))return l[1^p];a=rw(h,p,l)}else a=rS(h,p,f,l);return h?(this.mask=g,this.children=a,this):new rR(e,g,a)}}class rN{constructor(e,t,s){this._tag="ArrayNode",this.edit=e,this.size=t,this.children=s}modify(e,t,s,n,i,r){let a,o=this.size,l=this.children,c=n>>>t&31,u=l[c],p=(u||new rk).modify(e,t+5,s,n,i,r);if(u===p)return this;let m=rE(this,e);if(rO(u)&&!rO(p))++o,a=rS(m,c,p,l);else if(!rO(u)&&rO(p)){if(--o<=8)return function(e,t,s,n){let i=Array(t-1),r=0,a=0;for(let e=0,t=n.length;e<t;++e)if(e!==s){let t=n[e];t&&!rO(t)&&(i[r++]=t,a|=1<<e)}return new rR(e,a,i)}(e,o,c,l);a=rS(m,c,new rk,l)}else a=rS(m,c,p,l);return m?(this.size=o,this.children=a,this):new rN(e,o,a)}}function rA(e,t,s,n,i,r){let a;let o=t;for(;;){let t=function(e,t,s,n,i,r){if(s===i)return new rT(e,s,[r,n]);let a=s>>>t&31,o=i>>>t&31;return a===o?t=>new rR(e,1<<a|1<<o,[t]):new rR(e,1<<a|1<<o,a<o?[n,r]:[r,n])}(e,o,s,n,i,r);if("function"==typeof t)a=r_(t,a),o+=5;else{let e=t;for(;null!=a;)e=a.value(e),a=a.previous;return e}}}let rF="effect/HashMap",rj=Symbol.for(rF),rM={[rj]:rj,[Symbol.iterator](){return new rL(this,(e,t)=>[e,t])},[er](){let e=ea(rF);for(let t of this)e^=w(ea(t[0]),el(ea(t[1])));return eg(this,e)},[eb](e){if(rB(e)){if(e._size!==this._size)return!1;for(let t of this){let s=w(e,rJ(t[0],ea(t[0])));if(e1(s)||!ex(t[1],s.value))return!1}return!0}return!1},toString(){return ek(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(ew)}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},rC=(e,t,s,n)=>{let i=Object.create(rM);return i._editable=e,i._edit=t,i._root=s,i._size=n,i};class rL{constructor(e,t){this.map=e,this.f=t,this.v=rP(this.map._root,this.f,void 0)}next(){if(e1(this.v))return{done:!0,value:void 0};let e=this.v.value;return this.v=rU(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new rL(this.map,this.f)}}let rU=e=>e?r$(e[0],e[1],e[2],e[3],e[4]):nL(),rP=(e,t,s)=>{switch(e._tag){case"LeafNode":if(e2(e.value))return e5({value:t(e.key,e.value.value),cont:s});return rU(s);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let n=e.children;return r$(n.length,n,0,t,s)}default:return rU(s)}},r$=(e,t,s,n,i)=>{for(;s<e;){let r=t[s++];if(r&&!rO(r))return rP(r,n,[e,t,s,n,i])}return rU(i)},rD=rC(!1,0,new rk,0),rz=()=>rD,rB=e=>z(e,rj),rq=b(2,(e,t)=>rJ(e,t,ea(t))),rJ=b(3,(e,t,s)=>{let n=e._root,i=0;for(;;)switch(n._tag){case"LeafNode":return ex(t,n.key)?n.value:nL();case"CollisionNode":if(s===n.hash){let e=n.children;for(let s=0,n=e.length;s<n;++s){let n=e[s];if("key"in n&&ex(t,n.key))return n.value}}return nL();case"IndexedNode":{let e=1<<(s>>>i&31);if(n.mask&e){n=n.children[rv(n.mask,e)],i+=5;break}return nL()}case"ArrayNode":if(n=n.children[s>>>i&31]){i+=5;break}return nL();default:return nL()}}),rK=b(2,(e,t)=>e2(rJ(e,t,ea(t)))),rV=b(3,(e,t,s)=>rX(e,t,()=>e5(s))),rG=b(3,(e,t,s)=>e._editable?(e._root=t,e._size=s,e):t===e._root?e:rC(e._editable,e._edit,t,s)),rH=e=>new rL(e,e=>e),rW=e=>e._size,rY=e=>rC(!0,e._edit+1,e._root,e._size),rQ=e=>(e._editable=!1,e),rX=((e,t)=>{let s=rY(e);return t(s),rQ(s)},b(3,(e,t,s)=>rZ(e,t,ea(t),s))),rZ=b(4,(e,t,s,n)=>{let i={value:e._size},r=e._root.modify(e._editable?e._edit:NaN,0,n,s,t,i);return w(e,rG(r,i.value))}),r0=b(2,(e,t)=>rX(e,t,nL)),r1=b(2,(e,t)=>r3(e,rz(),(e,s,n)=>rV(e,n,t(s,n)))),r2=b(2,(e,t)=>r3(e,void 0,(e,s,n)=>t(s,n))),r3=b(3,(e,t,s)=>{let n;let i=e._root;if("LeafNode"===i._tag)return e2(i.value)?s(t,i.value.value,i.key):t;if("EmptyNode"===i._tag)return t;let r=[i.children];for(;n=r.pop();)for(let e=0,i=n.length;e<i;){let i=n[e++];i&&!rO(i)&&("LeafNode"===i._tag?e2(i.value)&&(t=s(t,i.value.value,i.key)):r.push(i.children))}return t}),r5="effect/HashSet",r4=Symbol.for(r5),r6={[r4]:r4,[Symbol.iterator](){return rH(this._keyMap)},[er](){return eg(this,el(ea(this._keyMap))(ea(r5)))},[eb](e){return!!r7(e)&&rW(this._keyMap)===rW(e._keyMap)&&ex(this._keyMap,e._keyMap)},toString(){return ek(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(ew)}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},r8=e=>{let t=Object.create(r6);return t._keyMap=e,t},r7=e=>z(e,r4),r9=r8(rz()),ae=()=>r9,at=b(2,(e,t)=>rK(e._keyMap,t)),as=b(2,(e,t)=>{let s=!1;for(let n of e)if(s=t(n))break;return s}),an=b(2,(e,t)=>!as(e,e=>!t(e))),ai=e=>r8(rY(e._keyMap)),ar=e=>(e._keyMap._editable=!1,e),aa=b(2,(e,t)=>{let s=ai(e);return t(s),ar(s)}),ao=b(2,(e,t)=>e._keyMap._editable?(rV(t,!0)(e._keyMap),e):r8(rV(t,!0)(e._keyMap))),al=b(2,(e,t)=>e._keyMap._editable?(r0(t)(e._keyMap),e):r8(r0(t)(e._keyMap))),ac=b(2,(e,t)=>aa(e,e=>{for(let s of t)al(e,s)})),au=b(2,(e,t)=>aa(ae(),s=>{for(let n of(ap(e,e=>ao(s,e)),t))ao(s,n)})),ap=b(2,(e,t)=>r2(e._keyMap,(e,s)=>t(s))),am=b(3,(e,t,s)=>r3(e._keyMap,t,(e,t,n)=>s(e,n))),ah=e=>{let t=ai(ae());for(let s of e)ao(t,s);return ar(t)},ad=(...e)=>{let t=ai(ae());for(let s of e)ao(t,s);return ar(t)},af=e=>rW(e._keyMap),ag=Symbol.for("effect/MutableRef"),ab={[ag]:ag,toString(){return ek(this.toJSON())},toJSON(){return{_id:"MutableRef",current:ew(this.current)}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},ax=e=>{let t=Object.create(ab);return t.current=e,t},ay=b(3,(e,t,s)=>!!ex(t,e.current)&&(e.current=s,!0)),av=e=>e.current,a_=b(2,(e,t)=>(e.current=t,e)),aS="effect/FiberId",aw=Symbol.for(aS),ak="None",aO="Runtime",aE="Composite",aI=em(`${aS}-${ak}`);class aT{[er](){return aI}[eb](e){return aF(e)&&e._tag===ak}toString(){return ek(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[eS](){return this.toJSON()}constructor(){this[aw]=aw,this._tag=ak,this.id=-1,this.startTimeMillis=-1}}class aR{constructor(e,t){this[aw]=aw,this._tag=aO,this.id=e,this.startTimeMillis=t}[er](){return eg(this,em(`${aS}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[eb](e){return aF(e)&&e._tag===aO&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return ek(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[eS](){return this.toJSON()}}class aN{constructor(e,t){this[aw]=aw,this._tag=aE,this.left=e,this.right=t}[er](){return w(em(`${aS}-${this._tag}`),el(ea(this.left)),el(ea(this.right)),eg(this))}[eb](e){return aF(e)&&e._tag===aE&&ex(this.left,e.left)&&ex(this.right,e.right)}toString(){return ek(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:ew(this.left),right:ew(this.right)}}[eS](){return this.toJSON()}}let aA=new aT,aF=e=>z(e,aw),aj=e=>e._tag===ak||w(a$(e),an(e=>aj(e))),aM=b(2,(e,t)=>e._tag===ak?t:t._tag===ak?e:new aN(e,t)),aC=b(2,(e,t)=>aj(e)?t:e),aL=e=>{switch(e._tag){case ak:return ae();case aO:return ad(e.id);case aE:return w(aL(e.left),au(aL(e.right)))}},aU=I(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>ax(0)),aP=e=>Array.from(aL(e)).map(e=>`#${e}`).join(","),a$=e=>{switch(e._tag){case ak:return ae();case aO:return ad(e);case aE:return w(a$(e.left),au(a$(e.right)))}},aD=aA,az=(e,t)=>new aR(e,t),aB=(e,t)=>new aN(e,t),aq=aF,aJ=()=>{let e=av(aU);return w(aU,a_(e+1)),new aR(e,Date.now())},aK=e=>{let t=rY(rz());for(let s of e)rV(t,s[0],s[1]);return rQ(t)},aV=e=>e&&rO(e._root),aG=Symbol.for("effect/List"),aH=e=>n5(e),aW=nF(nM(ex),aH),aY={[aG]:aG,_tag:"Cons",toString(){return ek(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:aH(this).map(ew)}},[eS](){return this.toJSON()},[eb](e){return a0(e)&&this._tag===e._tag&&aW(this,e)},[er](){return eg(this,ef(aH(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if("Nil"===t._tag)return e=!0,this.return();let s=t.head;return t=t.tail,{done:e,value:s}},return:t=>(e||(e=!0),{done:!0,value:t})}},pipe(){return eI(this,arguments)}},aQ=(e,t)=>{let s=Object.create(aY);return s.head=e,s.tail=t,s},aX=em("Nil"),aZ=Object.create({[aG]:aG,_tag:"Nil",toString(){return ek(this.toJSON())},toJSON:()=>({_id:"List",_tag:"Nil"}),[eS](){return this.toJSON()},[er]:()=>aX,[eb](e){return a0(e)&&this._tag===e._tag},[Symbol.iterator]:()=>({next:()=>({done:!0,value:void 0})}),pipe(){return eI(this,arguments)}}),a0=e=>z(e,aG),a1=e=>"Nil"===e._tag,a2=e=>"Cons"===e._tag,a3=(e,t)=>aQ(e,t),a5=()=>aZ,a4=e=>aQ(e,aZ),a6=b(2,(e,t)=>a7(t,e)),a8=b(2,(e,t)=>a3(t,e)),a7=b(2,(e,t)=>{if(a1(e))return t;if(a1(t))return e;{let s=aQ(t.head,e),n=s,i=t.tail;for(;!a1(i);){let t=aQ(i.head,e);n.tail=t,n=t,i=i.tail}return s}}),a9=b(3,(e,t,s)=>{let n=t,i=e;for(;!a1(i);)n=s(n,i.head),i=i.tail;return n}),oe=e=>{let t=a5(),s=e;for(;!a1(s);)t=a8(t,s.head),s=s.tail;return t},ot="Expected List to be non-empty",os=e=>{if(a1(e))throw Error(ot);return e.head},on=e=>{if(a1(e))throw Error(ot);return e.tail};Array.prototype;let oi=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=eG,e}(),or=e=>Object.assign(Object.create(eG),e),oa=Symbol.for("effect/DifferChunkPatch");function oo(e){return e}({...oi.prototype,[oa]:{_Value:oo,_Patch:oo}});let ol=Symbol.for("effect/DifferContextPatch");function oc(e){return e}let ou={...oi.prototype,[ol]:{_Value:oc,_Patch:oc}},op=Object.create(Object.assign(Object.create(ou),{_tag:"Empty"})),om=()=>op,oh=Object.assign(Object.create(ou),{_tag:"AndThen"}),od=(e,t)=>{let s=Object.create(oh);return s.first=e,s.second=t,s},of=Object.assign(Object.create(ou),{_tag:"AddService"}),og=(e,t)=>{let s=Object.create(of);return s.key=e,s.service=t,s},ob=Object.assign(Object.create(ou),{_tag:"RemoveService"}),ox=e=>{let t=Object.create(ob);return t.key=e,t},oy=Object.assign(Object.create(ou),{_tag:"UpdateService"}),ov=(e,t)=>{let s=Object.create(oy);return s.key=e,s.update=t,s},o_=(e,t)=>{let s=new Map(e.unsafeMap),n=om();for(let[e,i]of t.unsafeMap.entries())if(s.has(e)){let t=s.get(e);s.delete(e),ex(t,i)||(n=oS(ov(e,()=>i))(n))}else s.delete(e),n=oS(og(e,i))(n);for(let[e]of s.entries())n=oS(ox(e))(n);return n},oS=b(2,(e,t)=>od(e,t)),ow=b(2,(e,t)=>{if("Empty"===e._tag)return t;let s=!1,n=rs(e),i=new Map(t.unsafeMap);for(;rg(n);){let e=rx(n),t=ry(n);switch(e._tag){case"Empty":n=t;break;case"AddService":i.set(e.key,e.service),n=t;break;case"AndThen":n=rm(rm(t,e.second),e.first);break;case"RemoveService":i.delete(e.key),n=t;break;case"UpdateService":i.set(e.key,e.update(i.get(e.key))),s=!0,n=t}}if(!s)return te(i);let r=new Map;for(let[e]of t.unsafeMap)i.has(e)&&(r.set(e,i.get(e)),i.delete(e));for(let[e,t]of i)r.set(e,t);return te(r)}),ok=Symbol.for("effect/DifferHashMapPatch");function oO(e){return e}({...oi.prototype,[ok]:{_Value:oO,_Key:oO,_Patch:oO}});let oE=Symbol.for("effect/DifferHashSetPatch");function oI(e){return e}let oT={...oi.prototype,[oE]:{_Value:oI,_Key:oI,_Patch:oI}},oR=Object.create(Object.assign(Object.create(oT),{_tag:"Empty"})),oN=()=>oR,oA=Object.assign(Object.create(oT),{_tag:"AndThen"}),oF=(e,t)=>{let s=Object.create(oA);return s.first=e,s.second=t,s},oj=Object.assign(Object.create(oT),{_tag:"Add"}),oM=e=>{let t=Object.create(oj);return t.value=e,t},oC=Object.assign(Object.create(oT),{_tag:"Remove"}),oL=e=>{let t=Object.create(oC);return t.value=e,t},oU=(e,t)=>{let[s,n]=am([e,oN()],([e,t],s)=>at(s)(e)?[al(s)(e),t]:[e,oP(oM(s))(t)])(t);return am(n,(e,t)=>oP(oL(t))(e))(s)},oP=b(2,(e,t)=>oF(e,t)),o$=b(2,(e,t)=>{if("Empty"===e._tag)return t;let s=t,n=rs(e);for(;rg(n);){let e=rx(n),t=ry(n);switch(e._tag){case"Empty":n=t;break;case"AndThen":n=rm(e.first)(rm(e.second)(t));break;case"Add":s=ao(e.value)(s),n=t;break;case"Remove":s=al(e.value)(s),n=t}}return s}),oD=Symbol.for("effect/DifferOrPatch");function oz(e){return e}let oB={...oi.prototype,[oD]:{_Value:oz,_Key:oz,_Patch:oz}},oq=Object.create(Object.assign(Object.create(oB),{_tag:"Empty"})),oJ=Object.assign(Object.create(oB),{_tag:"AndThen"}),oK=(e,t)=>{let s=Object.create(oJ);return s.first=e,s.second=t,s},oV=Object.assign(Object.create(oB),{_tag:"SetLeft"}),oG=Object.assign(Object.create(oB),{_tag:"SetRight"}),oH=Object.assign(Object.create(oB),{_tag:"UpdateLeft"}),oW=Object.assign(Object.create(oB),{_tag:"UpdateRight"}),oY=((e,t)=>oK(e,t),Symbol.for("effect/DifferReadonlyArrayPatch"));function oQ(e){return e}let oX={...oi.prototype,[oY]:{_Value:oQ,_Patch:oQ}},oZ=Object.create(Object.assign(Object.create(oX),{_tag:"Empty"})),o0=()=>oZ,o1=Object.assign(Object.create(oX),{_tag:"AndThen"}),o2=(e,t)=>{let s=Object.create(o1);return s.first=e,s.second=t,s},o3=Object.assign(Object.create(oX),{_tag:"Append"}),o5=e=>{let t=Object.create(o3);return t.values=e,t},o4=Object.assign(Object.create(oX),{_tag:"Slice"}),o6=(e,t)=>{let s=Object.create(o4);return s.from=e,s.until=t,s},o8=Object.assign(Object.create(oX),{_tag:"Update"}),o7=(e,t)=>{let s=Object.create(o8);return s.index=e,s.patch=t,s},o9=e=>{let t=0,s=o0();for(;t<e.oldValue.length&&t<e.newValue.length;){let n=e.oldValue[t],i=e.newValue[t],r=e.differ.diff(n,i);ex(r,e.differ.empty)||(s=le(s,o7(t,r))),t+=1}return t<e.oldValue.length&&(s=le(s,o6(0,t))),t<e.newValue.length&&(s=le(s,o5(id(t)(e.newValue)))),s},le=b(2,(e,t)=>o2(e,t)),lt=b(3,(e,t,s)=>{if("Empty"===e._tag)return t;let n=t.slice(),i=iI(e);for(;nC(i);){let e=il(i),t=ip(i);switch(e._tag){case"Empty":i=t;break;case"AndThen":t.unshift(e.first,e.second),i=t;break;case"Append":for(let t of e.values)n.push(t);i=t;break;case"Slice":n=n.slice(e.from,e.until),i=t;break;case"Update":n[e.index]=s.patch(e.patch,n[e.index]),i=t}}return n}),ls={[Symbol.for("effect/Differ")]:{_P:x,_V:x}},ln=e=>{let t=Object.create(ls);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},li=()=>ln({empty:om(),combine:(e,t)=>oS(t)(e),diff:(e,t)=>o_(e,t),patch:(e,t)=>ow(t)(e)}),lr=()=>ln({empty:oN(),combine:(e,t)=>oP(t)(e),diff:(e,t)=>oU(e,t),patch:(e,t)=>o$(t)(e)}),la=e=>ln({empty:o0(),combine:(e,t)=>le(e,t),diff:(t,s)=>o9({oldValue:t,newValue:s,differ:e}),patch:(t,s)=>lt(t,s,e)}),lo=()=>ll((e,t)=>t),ll=e=>ln({empty:x,combine:(e,t)=>e===x?t:t===x?e:s=>t(e(s)),diff:(e,t)=>ex(e,t)?x:y(t),patch:(t,s)=>e(s,t(s))}),lc=e=>255&e,lu=e=>e>>8&255,lp=(e,t)=>(255&e)+((t&e&255)<<8),lm=lp(0,0),lh=b(2,(e,t)=>lp(lc(e)&~t,lu(e))),ld=b(2,(e,t)=>e|t),lf=e=>~e>>>0&255,lg=e=>lv(e,32),lb=b(2,(e,t)=>e|t),lx=e=>ly(e)&&!lk(e),ly=e=>lv(e,1),lv=b(2,(e,t)=>(e&t)!=0),l_=(...e)=>e.reduce((e,t)=>e|t,0),lS=l_(0),lw=e=>lv(e,4),lk=e=>lv(e,16),lO=b(2,(e,t)=>lp(e^t,t)),lE=b(2,(e,t)=>e&(lf(lc(t))|lu(t))|lc(t)&lu(t)),lI=ln({empty:lm,diff:(e,t)=>lO(e,t),combine:(e,t)=>ld(t)(e),patch:(e,t)=>lE(t,e)}),lT=e=>lp(e,e),lR=e=>lp(e,0),lN="Empty",lA="Fail",lF="Interrupt",lj="Parallel",lM="Sequential",lC="effect/Cause",lL=Symbol.for(lC),lU={[lL]:{_E:e=>e},[er](){return w(ea(lC),el(ea(l6(this))),eg(this))},[eb](e){return lJ(e)&&l4(this,e)},pipe(){return eI(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:ew(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:ew(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:ew(this.left),right:ew(this.right)}}},toString(){return ca(this)},[eS](){return this.toJSON()}},lP=(()=>{let e=Object.create(lU);return e._tag=lN,e})(),l$=e=>{let t=Object.create(lU);return t._tag=lA,t.error=e,t},lD=e=>{let t=Object.create(lU);return t._tag="Die",t.defect=e,t},lz=e=>{let t=Object.create(lU);return t._tag=lF,t.fiberId=e,t},lB=(e,t)=>{let s=Object.create(lU);return s._tag=lj,s.left=e,s.right=t,s},lq=(e,t)=>{let s=Object.create(lU);return s._tag=lM,s.left=e,s.right=t,s},lJ=e=>z(e,lL),lK=e=>"Die"===e._tag,lV=e=>e._tag===lN||ci(e,!0,(e,t)=>{switch(t._tag){case lN:return e5(e);case"Die":case lA:case lF:return e5(!1);default:return nL()}}),lG=e=>e2(l0(e)),lH=e=>cr(void 0,ce)(e),lW=e=>ra(ci(e,re(),(e,t)=>t._tag===lA?e5(w(e,rm(t.error))):nL())),lY=e=>ra(ci(e,re(),(e,t)=>"Die"===t._tag?e5(w(e,rm(t.defect))):nL())),lQ=e=>ci(e,ae(),(e,t)=>t._tag===lF?e5(w(e,ao(t.fiberId))):nL()),lX=e=>l7(e,e=>e._tag===lA?e5(e.error):nL()),lZ=e=>{let t=lX(e);switch(t._tag){case"None":return t_(e);case"Some":return tv(t.value)}},l0=e=>l7(e,e=>e._tag===lF?e5(e.fiberId):nL()),l1=e=>cn(e,{onEmpty:nL(),onFail:e=>e5(lD(e)),onDie:e=>e5(lD(e)),onInterrupt:()=>nL(),onSequential:(e,t)=>e2(e)&&e2(t)?e5(lq(e.value,t.value)):e2(e)&&e1(t)?e5(e.value):e1(e)&&e2(t)?e5(t.value):nL(),onParallel:(e,t)=>e2(e)&&e2(t)?e5(lB(e.value,t.value)):e2(e)&&e1(t)?e5(e.value):e1(e)&&e2(t)?e5(t.value):nL()}),l2=e=>cn(e,{onEmpty:lP,onFail:()=>lP,onDie:e=>lD(e),onInterrupt:e=>lz(e),onSequential:lq,onParallel:lB}),l3=e=>cn(e,{onEmpty:lP,onFail:e=>lD(e),onDie:e=>lD(e),onInterrupt:e=>lz(e),onSequential:(e,t)=>lq(e,t),onParallel:(e,t)=>lB(e,t)}),l5=((e,t)=>l5(e,e=>l$(t(e))),b(2,(e,t)=>cn(e,{onEmpty:lP,onFail:e=>t(e),onDie:e=>lD(e),onInterrupt:e=>lz(e),onSequential:(e,t)=>lq(e,t),onParallel:(e,t)=>lB(e,t)}))),l4=(e,t)=>{let s=rs(e),n=rs(t);for(;rg(s)&&rg(n);){let[e,t]=w(rx(s),ci([ae(),re()],([e,t],s)=>{let[n,i]=l9(s);return e5([w(e,au(n)),w(t,rd(i))])})),[i,r]=w(rx(n),ci([ae(),re()],([e,t],s)=>{let[n,i]=l9(s);return e5([w(e,au(n)),w(t,rd(i))])}));if(!ex(e,i))return!1;s=t,n=r}return!0},l6=e=>l8(rs(e),re()),l8=(e,t)=>{for(;;){let[s,n]=w(e,iF([ae(),re()],([e,t],s)=>{let[n,i]=l9(s);return[w(e,au(n)),w(t,rd(i))]})),i=af(s)>0?w(t,rm(s)):t;if(rf(n))return ra(i);e=n,t=i}throw Error(W("Cause.flattenCauseLoop"))},l7=b(2,(e,t)=>{let s=[e];for(;s.length>0;){let e=s.pop(),n=t(e);switch(n._tag){case"None":switch(e._tag){case lM:case lj:s.push(e.right),s.push(e.left)}break;case"Some":return n}}return nL()}),l9=e=>{let t=e,s=[],n=ae(),i=re();for(;void 0!==t;)switch(t._tag){case lN:if(0===s.length)return[n,i];t=s.pop();break;case lA:if(n=ao(n,rt(t._tag,t.error)),0===s.length)return[n,i];t=s.pop();break;case"Die":if(n=ao(n,rt(t._tag,t.defect)),0===s.length)return[n,i];t=s.pop();break;case lF:if(n=ao(n,rt(t._tag,t.fiberId)),0===s.length)return[n,i];t=s.pop();break;case lM:switch(t.left._tag){case lN:t=t.right;break;case lM:t=lq(t.left.left,lq(t.left.right,t.right));break;case lj:t=lB(lq(t.left.left,t.right),lq(t.left.right,t.right));break;default:i=rm(i,t.right),t=t.left}break;case lj:s.push(t.right),t=t.left}throw Error(W("Cause.evaluateCauseLoop"))},ce={emptyCase:v,failCase:_,dieCase:_,interruptCase:v,sequentialCase:(e,t,s)=>t&&s,parallelCase:(e,t,s)=>t&&s},ct="SequentialCase",cs="ParallelCase",cn=b(2,(e,{onDie:t,onEmpty:s,onFail:n,onInterrupt:i,onParallel:r,onSequential:a})=>cr(e,void 0,{emptyCase:()=>s,failCase:(e,t)=>n(t),dieCase:(e,s)=>t(s),interruptCase:(e,t)=>i(t),sequentialCase:(e,t,s)=>a(t,s),parallelCase:(e,t,s)=>r(t,s)})),ci=b(3,(e,t,s)=>{let n=t,i=e,r=[];for(;void 0!==i;){let e=s(n,i);switch(n=e2(e)?e.value:n,i._tag){case lM:case lj:r.push(i.right),i=i.left;break;default:i=void 0}void 0===i&&r.length>0&&(i=r.pop())}return n}),cr=b(3,(e,t,s)=>{let n=[e],i=[];for(;n.length>0;){let e=n.pop();switch(e._tag){case lN:i.push(t_(s.emptyCase(t)));break;case lA:i.push(t_(s.failCase(t,e.error)));break;case"Die":i.push(t_(s.dieCase(t,e.defect)));break;case lF:i.push(t_(s.interruptCase(t,e.fiberId)));break;case lM:n.push(e.right),n.push(e.left),i.push(tv({_tag:ct}));break;case lj:n.push(e.right),n.push(e.left),i.push(tv({_tag:cs}))}}let r=[];for(;i.length>0;){let e=i.pop();switch(e._tag){case"Left":switch(e.left._tag){case ct:{let e=r.pop(),n=r.pop(),i=s.sequentialCase(t,e,n);r.push(i);break}case cs:{let e=r.pop(),n=r.pop(),i=s.parallelCase(t,e,n);r.push(i)}}break;case"Right":r.push(e.right)}}if(0===r.length)throw Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return r.pop()}),ca=e=>lH(e)?"All fibers interrupted without errors.":ch(e).map(e=>e.stack).join("\n");class co extends globalThis.Error{constructor(e){let t=Error.stackTraceLimit;Error.stackTraceLimit=0,super(cl(e)),this.span=void 0,""===this.message&&(this.message="An error has occurred"),Error.stackTraceLimit=t,this.name=e instanceof Error?e.name:"Error","object"==typeof e&&null!==e&&(cm in e&&(this.span=e[cm]),Object.keys(e).forEach(t=>{t in this||(this[t]=e[t])})),this.stack=cp(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}}let cl=e=>{if("string"==typeof e)return e;if("object"==typeof e&&null!==e&&e instanceof Error)return e.message;try{if(z(e,"toString")&&M(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return JSON.stringify(e)},cc=/\((.*)\)/,cu=I("effect/Tracer/spanToTrace",()=>new WeakMap),cp=(e,t,s)=>{let n=[e],i=t.startsWith(e)?t.slice(e.length).split("\n"):t.split("\n");for(let e=1;e<i.length&&!i[e].includes("Generator.next");e++){if(i[e].includes("effect_internal_function")){n.pop();break}n.push(i[e].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(s){let e=s,t=0;for(;e&&"Span"===e._tag&&t<10;){let s=cu.get(e);if("function"==typeof s){let t=s(),i=t.match(cc),r=i?i[1]:t.replace(/^at /,"");n.push(`    at ${e.name} (${r})`)}else n.push(`    at ${e.name}`);e=nB(e.parent),t++}}return n.join("\n")},cm=Symbol.for("effect/SpanAnnotation"),ch=e=>cr(e,void 0,{emptyCase:()=>[],dieCase:(e,t)=>[new co(t)],failCase:(e,t)=>[new co(t)],interruptCase:()=>[],parallelCase:(e,t,s)=>[...t,...s],sequentialCase:(e,t,s)=>[...t,...s]}),cd="Pending",cf="Done",cg=Symbol.for("effect/Deferred"),cb={_E:e=>e,_A:e=>e},cx=e=>({_tag:cd,joiners:e}),cy=e=>({_tag:cf,effect:e}),cv=Symbol.for("effect/Tracer"),c_=tc("effect/Tracer"),cS=tc("effect/ParentSpan"),cw=function(){let e="abcdef0123456789",t=e.length;return function(s){let n="";for(let i=0;i<s;i++)n+=e.charAt(Math.floor(Math.random()*t));return n}}();class ck{constructor(e,t,s,n,i,r){this._tag="Span",this.traceId="native",this.sampled=!0,this.events=[],this.name=e,this.parent=t,this.context=s,this.links=n,this.startTime=i,this.kind=r,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId="Some"===t._tag?t.value.traceId:cw(32),this.spanId=cw(16)}end(e,t){this.status={_tag:"Ended",endTime:e,exit:t,startTime:this.status.startTime}}attribute(e,t){this.attributes.set(e,t)}event(e,t,s){this.events.push([e,t,s??{}])}}let cO=e=>{if(e?.captureStackTrace===!1||e?.captureStackTrace!==void 0&&"boolean"!=typeof e.captureStackTrace)return e;let t=Error.stackTraceLimit;Error.stackTraceLimit=3;let s=Error();Error.stackTraceLimit=t;let n=!1;return{...e,captureStackTrace:()=>{if(!1!==n)return n;if(void 0!==s.stack){let e=s.stack.split("\n");if(void 0!==e[3])return n=e[3].trim()}}}},cE=Symbol.for("effect/EffectError"),cI=e=>z(e,cE),cT=e=>({[cE]:cE,_tag:"EffectError",cause:e}),cR=(e,t)=>{let s=new cj("Blocked");return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s},cN=e=>{let t=new cj("RunBlocked");return t.effect_instruction_i0=e,t},cA=Symbol.for("effect/Effect");class cF{constructor(e,t){this._op=eD,this.patch=e,this.op=t}}class cj{constructor(e){this.effect_instruction_i0=void 0,this.effect_instruction_i1=void 0,this.effect_instruction_i2=void 0,this.trace=void 0,this[cA]=eK,this._op=e}[eb](e){return this===e}[er](){return eg(this,eo(this))}pipe(){return eI(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:ew(this.effect_instruction_i0),effect_instruction_i1:ew(this.effect_instruction_i1),effect_instruction_i2:ew(this.effect_instruction_i2)}}toString(){return ek(this.toJSON())}[eS](){return this.toJSON()}[Symbol.iterator](){return new tE(new ee(this))}}class cM{constructor(e){this.effect_instruction_i0=void 0,this.effect_instruction_i1=void 0,this.effect_instruction_i2=void 0,this.trace=void 0,this[cA]=eK,this._op=e,this._tag=e}[eb](e){return pI(e)&&"Failure"===e._op&&ex(this.effect_instruction_i0,e.effect_instruction_i0)}[er](){return w(em(this._tag),el(ea(this.effect_instruction_i0)),eg(this))}get cause(){return this.effect_instruction_i0}pipe(){return eI(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return ek(this.toJSON())}[eS](){return this.toJSON()}[Symbol.iterator](){return new tE(new ee(this))}}class cC{constructor(e){this.effect_instruction_i0=void 0,this.effect_instruction_i1=void 0,this.effect_instruction_i2=void 0,this.trace=void 0,this[cA]=eK,this._op=e,this._tag=e}[eb](e){return pI(e)&&"Success"===e._op&&ex(this.effect_instruction_i0,e.effect_instruction_i0)}[er](){return w(em(this._tag),el(ea(this.effect_instruction_i0)),eg(this))}get value(){return this.effect_instruction_i0}pipe(){return eI(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:ew(this.value)}}toString(){return ek(this.toJSON())}[eS](){return this.toJSON()}[Symbol.iterator](){return new tE(new ee(this))}}let cL=e=>z(e,cA),cU=e=>{let t=new cj(eP);return t.effect_instruction_i0=e,t},cP=b(3,(e,t,s)=>uk(n=>c6(e,e=>c6(cZ(ux(()=>n(t(e)))),t=>ux(()=>s(e,t)).pipe(ut({onFailure:e=>{switch(t._tag){case eN:return c2(lB(t.effect_instruction_i0,e));case eM:return c2(e)}},onSuccess:()=>t})))))),c$=b(2,(e,t)=>c6(e,()=>ub(t))),cD=e=>c$(e,void 0),cz=function(){let e=new cj(eR);switch(arguments.length){case 2:e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break;case 3:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break;case 4:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break;default:throw Error(W("you're not supposed to end up here"))}return e},cB=(e,t=aD)=>{let s;let n=new cj(eT);return n.effect_instruction_i0=t=>{s=e(t)},n.effect_instruction_i1=t,void 0!==s?um(n,e=>s):n},cq=(e,t=aD)=>cz(e,function(){let e,s,n,i;function r(t){e?e(t):void 0===s&&(s=t)}let a=new cj(eT);return a.effect_instruction_i0=t=>{e=t,s&&t(s)},a.effect_instruction_i1=t,1!==this.effect_instruction_i0.length?(i=new AbortController,n=en(()=>this.effect_instruction_i0(r,i.signal))):n=en(()=>this.effect_instruction_i0(r)),n||i?um(a,e=>(i&&i.abort(),n??uO)):a}),cJ=b(2,(e,t)=>{let s=new cj(eA);return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s}),cK=b(2,(e,t)=>us(e,{onFailure:t,onSuccess:ub})),cV=b(3,(e,t,s)=>cJ(e,e=>{let n=lZ(e);switch(n._tag){case"Left":return t(n.left)?s(n.left):c2(e);case"Right":return c2(n.right)}})),cG=Symbol.for("effect/SpanAnnotation"),cH=Symbol.for("effect/OriginalAnnotation"),cW=(e,t)=>e2(t)?new Proxy(e,{has:(e,t)=>t===cG||t===cH||t in e,get:(s,n)=>n===cG?t.value:n===cH?e:s[n]}):e,cY=e=>!D(e)||cG in e?c2(lD(e)):cU(t=>c2(lD(cW(e,p6(t))))),cQ=e=>c3(()=>lD(new pv(e))),cX=e=>us(e,{onFailure:e=>ub(tv(e)),onSuccess:e=>ub(t_(e))}),cZ=e=>ue(e,{onFailure:pM,onSuccess:pD}),c0=e=>!D(e)||cG in e?c2(l$(e)):cU(t=>c2(l$(cW(e,p6(t))))),c1=e=>c6(uy(e),c0),c2=e=>{let t=new cM(eN);return t.effect_instruction_i0=e,t},c3=e=>c6(uy(e),c2),c5=cU(e=>ub(e.id())),c4=e=>cU(t=>e(t.id())),c6=b(2,(e,t)=>{let s=new cj(eF);return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s}),c8=b(2,(e,t)=>c6(e,e=>{let s="function"==typeof t?t(e):t;return cL(s)?s:H(s)?cq(e=>{s.then(t=>e(ub(t)),t=>e(c0(new pE(t))))}):ub(s)})),c7=e=>{let t=new cj("OnStep");return t.effect_instruction_i0=e,t},c9=e=>c6(e,x),ue=b(2,(e,t)=>ut(e,{onFailure:e=>ub(t.onFailure(e)),onSuccess:e=>ub(t.onSuccess(e))})),ut=b(2,(e,t)=>{let s=new cj(ej);return s.effect_instruction_i0=e,s.effect_instruction_i1=t.onFailure,s.effect_instruction_i2=t.onSuccess,s}),us=b(2,(e,t)=>ut(e,{onFailure:e=>{if(lY(e).length>0)return c2(l3(e));let s=lW(e);return s.length>0?t.onFailure(rx(s)):c2(e)},onSuccess:t.onSuccess})),un=b(2,(e,t)=>ux(()=>{let s=n5(e),n=n3(s.length),i=0;return c$(uT({while:()=>i<s.length,body:()=>t(s[i],i),step:e=>{n[i++]=e}}),n)})),ui=b(2,(e,t)=>ux(()=>{let s=n5(e),n=0;return uT({while:()=>n<s.length,body:()=>t(s[n],n),step:()=>{n++}})})),ur=(e=>"boolean"==typeof e[0]||cL(e[0]),e=>c2(lz(e))),ua=e=>{let t=new cj(eL);return t.effect_instruction_i0=lT(1),t.effect_instruction_i1=()=>e,t},uo=b(2,(e,t)=>uk(s=>c6(cZ(s(e)),e=>pW(t,e)))),ul=b(2,(e,t)=>c6(e,e=>uy(()=>t(e)))),uc=b(2,(e,t)=>us(e,{onFailure:e=>c1(()=>t.onFailure(e)),onSuccess:e=>uy(()=>t.onSuccess(e))})),uu=b(2,(e,t)=>ut(e,{onFailure:e=>{let s=lZ(e);switch(s._tag){case"Left":return c1(()=>t(s.left));case"Right":return c2(s.right)}},onSuccess:ub})),up=((e,t)=>up(e,e=>pR(e)?uO:t(e.effect_instruction_i0)),b(2,(e,t)=>uk(s=>ut(s(e),{onFailure:e=>{let s=pM(e);return ut(t(s),{onFailure:t=>pM(lq(e,t)),onSuccess:()=>s})},onSuccess:e=>{let s=pD(e);return uj(t(s),s)}})))),um=b(2,(e,t)=>up(e,pP({onFailure:e=>lH(e)?cD(t(lQ(e))):uO,onSuccess:()=>uO}))),uh=b(2,(e,t)=>uS(e,t,ub)),ud=e=>uf(e,x),uf=b(2,(e,t)=>us(e,{onFailure:e=>cY(t(e)),onSuccess:ub})),ug=(e,t)=>n5(e).reduceRight(([e,s],n)=>{let i=t(n);switch(i._tag){case"Left":return[[i.left,...e],s];case"Right":return[e,[i.right,...s]]}},[iE(),iE()]),ub=((e,t)=>ub(t.runtimeFlags),e=>{let t=new cC(eM);return t.effect_instruction_i0=e,t}),ux=e=>c6(uy(e),x),uy=e=>{let t=new cj(eC);return t.effect_instruction_i0=e,t},uv=b(2,(e,t)=>c6(e,e=>{let s="function"==typeof t?t(e):t;return cL(s)?c$(s,e):H(s)?cq(t=>{s.then(s=>t(ub(e)),e=>t(c0(new pE(e))))}):ub(e)})),u_=e=>cU(t=>{let s=w(t.getFiberRef(pr),nP(()=>t.scope()));return e(uQ(pr,e5(s)))}),uS=b(3,(e,t,s)=>ut(e,{onFailure:e=>lY(e).length>0?c2(nJ(l1(e))):t(),onSuccess:s})),uw=e=>{let t=new cj(eL);return t.effect_instruction_i0=lR(1),t.effect_instruction_i1=()=>e,t},uk=e=>cz(e,function(){let e=new cj(eL);return e.effect_instruction_i0=lR(1),e.effect_instruction_i1=e=>ly(e)?en(()=>this.effect_instruction_i0(ua)):en(()=>this.effect_instruction_i0(uw)),e}),uO=ub(void 0),uE=e=>{let t=new cj(eL);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},uI=b(2,(e,t)=>c6(t,t=>t?w(e,ul(e5)):ub(nL()))),uT=e=>{let t=new cj(eU);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},uR=b(2,(e,t)=>{let s=new cj(eL);return s.effect_instruction_i0=t,s.effect_instruction_i1=()=>e,s}),uN=e=>{let t=new cj(e$);return void 0!==e?.priority?pe(t,e.priority):t},uA=b(2,(e,t)=>c6(e,e=>ul(t,t=>[e,t]))),uF=b(2,(e,t)=>c6(e,e=>c$(t,e))),uj=b(2,(e,t)=>c6(e,()=>t)),uM=b(3,(e,t,s)=>c6(e,e=>ul(t,t=>s(e,t)))),uC=(()=>{let e=setInterval(()=>{},2147483648-1);return uy(()=>clearInterval(e))},e=>c6(c5,t=>w(e,uL(t)))),uL=b(2,(e,t)=>c6(e.interruptAsFork(t),()=>e.await)),uU={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return eI(this,arguments)}},uP={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return eI(this,arguments)}},u$={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return eI(this,arguments)}},uD={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return eI(this,arguments)}},uz=Symbol.for("effect/FiberRef"),uB={_A:e=>e},uq=e=>uV(e,e=>[e,e]),uJ=b(2,(e,t)=>c6(uq(e),t)),uK=b(2,(e,t)=>uV(e,()=>[void 0,t])),uV=b(2,(e,t)=>cU(s=>{let[n,i]=t(s.getFiberRef(e));return s.setFiberRef(e,i),ub(n)})),uG=Symbol.for("effect/RequestResolver"),uH={_A:e=>e,_R:e=>e};class uW{constructor(e,t){this[uG]=uH,this.runAll=e,this.target=t}[er](){return eg(this,this.target?ea(this.target):eo(this))}[eb](e){return this.target?uY(e)&&ex(this.target,e.target):this===e}identified(...e){return new uW(this.runAll,rn(e))}pipe(){return eI(this,arguments)}}let uY=e=>z(e,uG),uQ=b(3,(e,t,s)=>cP(uF(uq(t),uK(t,s)),()=>e,e=>uK(t,e))),uX=b(3,(e,t,s)=>uJ(t,n=>uQ(e,t,s(n)))),uZ=(e,t)=>u3(e,{differ:lo(),fork:t?.fork??x,join:t?.join}),u0=e=>{let t=lr();return u3(e,{differ:t,fork:t.empty})},u1=e=>{let t=la(lo());return u3(e,{differ:t,fork:t.empty})},u2=e=>{let t=li();return u3(e,{differ:t,fork:t.empty})},u3=(e,t)=>({[uz]:uB,initial:e,diff:(e,s)=>t.differ.diff(e,s),combine:(e,s)=>t.differ.combine(e,s),patch:e=>s=>t.differ.patch(e,s),fork:t.fork,join:t.join??((e,t)=>t),pipe(){return eI(this,arguments)}}),u5=I(Symbol.for("effect/FiberRef/currentContext"),()=>u2(tp())),u4=I(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>uZ(0)),u6=I(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>uZ(2048)),u8=I(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>uZ(rz())),u7=I(Symbol.for("effect/FiberRef/currentLogLevel"),()=>uZ(uP)),u9=I(Symbol.for("effect/FiberRef/currentLogSpan"),()=>uZ(a5())),pe=b(2,(e,t)=>uQ(e,u4,t)),pt=I(Symbol.for("effect/FiberRef/currentConcurrency"),()=>uZ("unbounded")),ps=I(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>uZ(!0)),pn=I(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>uZ(e5(u$))),pi=I(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>u1(iE())),pr=I(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>uZ(nL(),{fork:()=>nL(),join:(e,t)=>e})),pa=I(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>uZ(lP,{fork:()=>lP,join:(e,t)=>e})),po=I(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>uZ(!0)),pl=I(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>uZ(!0)),pc=I(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>uZ(rz())),pu=I(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>uZ(re())),pp=Symbol.for("effect/Scope"),pm=Symbol.for("effect/CloseableScope"),ph=(e,t)=>e.addFinalizer(()=>cD(t)),pd=(e,t)=>e.addFinalizer(t),pf=(e,t)=>e.close(t),pg=(e,t)=>e.fork(t),pb=function(){class e extends globalThis.Error{commit(){return c0(this)}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[eS](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,eH),e}(),px=(e,t)=>{class s extends pb{constructor(...e){super(...e),this._tag=t}}return Object.assign(s.prototype,e),s.prototype.name=t,s},py=Symbol.for("effect/Cause/errors/RuntimeException"),pv=px({[py]:py},"RuntimeException"),p_=Symbol.for("effect/Cause/errors/InterruptedException"),pS=e=>z(e,p_),pw=Symbol.for("effect/Cause/errors/NoSuchElement"),pk=px({[pw]:pw},"NoSuchElementException"),pO=Symbol.for("effect/Cause/errors/UnknownException"),pE=function(){class e extends pb{constructor(e,t){super(t??(z(e,"message")&&R(e.message)?e.message:void 0)),this._tag="UnknownException",this.error=e}}return Object.assign(e.prototype,{[pO]:pO,name:"UnknownException"}),e}(),pI=e=>cL(e)&&"_tag"in e&&("Success"===e._tag||"Failure"===e._tag),pT=e=>"Failure"===e._tag,pR=e=>"Success"===e._tag,pN=b(2,(e,t)=>{switch(e._tag){case eN:return pM(e.effect_instruction_i0);case eM:return pD(t)}}),pA=e=>pN(e,void 0),pF=(e,t)=>pq(e,t?.parallel?lB:lq),pj=e=>pM(l$(e)),pM=e=>{let t=new cM(eN);return t.effect_instruction_i0=e,t},pC=((e,t)=>{switch(e._tag){case eN:return pM(e.effect_instruction_i0);case eM:return t(e.effect_instruction_i0)}},b(2,(e,t)=>{switch(e._tag){case eN:return ub(pM(e.effect_instruction_i0));case eM:return cZ(t(e.effect_instruction_i0))}})),pL=e=>pM(lz(e)),pU=b(2,(e,t)=>{switch(e._tag){case eN:return pM(e.effect_instruction_i0);case eM:return pD(t(e.effect_instruction_i0))}}),pP=b(2,(e,{onFailure:t,onSuccess:s})=>{switch(e._tag){case eN:return t(e.effect_instruction_i0);case eM:return s(e.effect_instruction_i0)}}),p$=b(2,(e,{onFailure:t,onSuccess:s})=>{switch(e._tag){case eN:return t(e.effect_instruction_i0);case eM:return s(e.effect_instruction_i0)}}),pD=e=>{let t=new cC(eM);return t.effect_instruction_i0=e,t},pz=pD(void 0),pB=b(3,(e,t,{onFailure:s,onSuccess:n})=>{switch(e._tag){case eN:switch(t._tag){case eM:return pM(e.effect_instruction_i0);case eN:return pM(s(e.effect_instruction_i0,t.effect_instruction_i0))}case eM:switch(t._tag){case eM:return pD(n(e.effect_instruction_i0,t.effect_instruction_i0));case eN:return pM(t.effect_instruction_i0)}}}),pq=(e,t)=>{let s=rn(e);return rg(s)?w(ry(s),iF(w(rx(s),pU(rs)),(e,s)=>w(e,pB(s,{onSuccess:(e,t)=>w(e,rm(t)),onFailure:t}))),pU(ra),pU(e=>rr(e)),e5):nL()},pJ=e=>({[cg]:cb,state:ax(cx([])),blockingOn:e,pipe(){return eI(this,arguments)}}),pK=()=>c6(c5,e=>pV(e)),pV=e=>uy(()=>pJ(e)),pG=e=>cq(t=>{let s=av(e.state);switch(s._tag){case cf:return t(s.effect);case cd:return s.joiners.push(t),pZ(e,t)}},e.blockingOn),pH=b(2,(e,t)=>uy(()=>{let s=av(e.state);switch(s._tag){case cf:return!1;case cd:a_(e.state,cy(t));for(let e=0,n=s.joiners.length;e<n;e++)s.joiners[e](t);return!0}})),pW=b(2,(e,t)=>pH(e,t)),pY=b(2,(e,t)=>pH(e,c2(t))),pQ=b(2,(e,t)=>pH(e,ub(t))),pX=(e,t)=>{let s=av(e.state);if(s._tag===cd){a_(e.state,cy(t));for(let e=0,n=s.joiners.length;e<n;e++)s.joiners[e](t)}},pZ=(e,t)=>uy(()=>{let s=av(e.state);if(s._tag===cd){let e=s.joiners.indexOf(t);e>=0&&s.joiners.splice(e,1)}}),p0=uq(u5),p1=()=>p0,p2=e=>c6(p1(),e),p3=b(2,(e,t)=>uQ(u5,t)(e)),p5=b(2,(e,t)=>uX(u5,e=>tl(e,t))(e)),p4=b(2,(e,t)=>p2(s=>p3(e,t(s)))),p6=e=>{let t=e.getFiberRef(u5).unsafeMap.get(cS.key);return void 0!==t&&"Span"===t._tag?e5(t):nL()},p8={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:nL(),context:tp(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:pz},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},p7=e=>{let t=Object.create(p8);return t.name=e,t},p9=class extends pb{constructor(e){super(),e&&Object.assign(this,e)}},me=e=>{class t extends p9{constructor(...t){super(...t),this._tag=e}}return t.prototype.name=e,t},mt=Symbol.for("effect/Duration"),ms=BigInt(0),mn=BigInt(24),mi=BigInt(60),mr=BigInt(1e3),ma=BigInt(1e6),mo=BigInt(1e9),ml=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,mc=e=>{if(md(e))return e;if(N(e))return my(e);if(F(e))return mb(e);if(Array.isArray(e)){if(2===e.length&&N(e[0])&&N(e[1]))return mb(BigInt(e[0])*mo+BigInt(e[1]))}else if(R(e)){ml.lastIndex=0;let t=ml.exec(e);if(t){let[e,s,n]=t,i=Number(s);switch(n){case"nano":case"nanos":return mb(BigInt(s));case"micro":case"micros":return mx(BigInt(s));case"milli":case"millis":return my(i);case"second":case"seconds":return mv(i);case"minute":case"minutes":return m_(i);case"hour":case"hours":return mS(i);case"day":case"days":return mw(i);case"week":case"weeks":return mk(i)}}}throw Error("Invalid DurationInput")},mu={_tag:"Millis",millis:0},mp={_tag:"Infinity"},mm={[mt]:mt,[er](){return eg(this,ed(this.value))},[eb](e){return md(e)&&mL(this,e)},toString(){return`Duration(${mU(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:mT(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},mh=e=>{let t=Object.create(mm);return N(e)?isNaN(e)||e<=0?t.value=mu:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(1e6*e))}:t.value=mp:e<=ms?t.value=mu:t.value={_tag:"Nanos",nanos:e},t},md=e=>z(e,mt),mf=mh(0),mg=mh(1/0),mb=e=>mh(e),mx=e=>mh(e*mr),my=e=>mh(e),mv=e=>mh(1e3*e),m_=e=>mh(6e4*e),mS=e=>mh(36e5*e),mw=e=>mh(864e5*e),mk=e=>mh(6048e5*e),mO=e=>{let t=mc(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}},mE=e=>{let t=mc(e);switch(t.value._tag){case"Infinity":return nL();case"Nanos":return e5(t.value.nanos);case"Millis":return e5(BigInt(Math.round(1e6*t.value.millis)))}},mI=e=>{let t=mc(e);switch(t.value._tag){case"Infinity":throw Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(1e6*t.value.millis))}},mT=e=>{let t=mc(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/mo),Number(t.value.nanos%mo)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},mR=b(2,(e,t)=>{let s=mc(e);switch(s.value._tag){case"Nanos":return t.onNanos(s.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(s.value.millis)}}),mN=b(3,(e,t,s)=>{let n=mc(e),i=mc(t);if("Infinity"===n.value._tag||"Infinity"===i.value._tag)return s.onMillis(mO(n),mO(i));if("Nanos"===n.value._tag||"Nanos"===i.value._tag){let e="Nanos"===n.value._tag?n.value.nanos:BigInt(Math.round(1e6*n.value.millis)),t="Nanos"===i.value._tag?i.value.nanos:BigInt(Math.round(1e6*i.value.millis));return s.onNanos(e,t)}return s.onMillis(n.value.millis,i.value.millis)}),mA=(e,t)=>mN(e,t,{onMillis:(e,t)=>e===t,onNanos:(e,t)=>e===t}),mF=b(2,(e,t)=>mR(e,{onMillis:e=>mh(e*t),onNanos:e=>mh(e*BigInt(t))})),mj=b(2,(e,t)=>mN(e,t,{onMillis:(e,t)=>mh(e+t),onNanos:(e,t)=>mh(e+t)})),mM=((e,t)=>mN(e,t,{onMillis:(e,t)=>e<t,onNanos:(e,t)=>e<t}),b(2,(e,t)=>mN(e,t,{onMillis:(e,t)=>e<=t,onNanos:(e,t)=>e<=t}))),mC=b(2,(e,t)=>mN(e,t,{onMillis:(e,t)=>e>=t,onNanos:(e,t)=>e>=t})),mL=b(2,(e,t)=>mA(mc(e),mc(t))),mU=e=>{let t=mc(e),s=[];if("Infinity"===t.value._tag)return"Infinity";let n=mI(t);n%ma&&s.push(`${n%ma}ns`);let i=n/ma;i%mr!==ms&&s.push(`${i%mr}ms`);let r=i/mr;r%mi!==ms&&s.push(`${r%mi}s`);let a=r/mi;a%mi!==ms&&s.push(`${a%mi}m`);let o=a/mi;o%mn!==ms&&s.push(`${o%mn}h`);let l=o/mn;return l!==ms&&s.push(`${l}d`),s.reverse().join(" ")},mP=e=>{if("NaN"===e)return e5(NaN);if("Infinity"===e)return e5(1/0);if("-Infinity"===e)return e5(-1/0);if(""===e.trim())return e3;let t=Number(e);return Number.isNaN(t)?e3:e5(t)},m$=e=>e.toUpperCase(),mD=e=>e.toLowerCase(),mz=e=>0===e.length?e:m$(e[0])+e.slice(1),mB=e=>0===e.length?e:mD(e[0])+e.slice(1);class mq{constructor(e,t=!1){this.s=e,this.stripped=t,this.index=0,this.length=e.length}next(){if(this.done)return{done:!0,value:void 0};let e=this.index;for(;!this.done&&!mJ(this.s[this.index]);)this.index=this.index+1;let t=this.index;if(!this.done){let e=this.s[this.index];this.index=this.index+1,!this.done&&mK(e,this.s[this.index])&&(this.index=this.index+1),this.stripped||(t=this.index)}return{done:!1,value:this.s.substring(e,t)}}[Symbol.iterator](){return new mq(this.s,this.stripped)}get done(){return this.index>=this.length}}let mJ=e=>{let t=e.charCodeAt(0);return 13===t||10===t},mK=(e,t)=>13===e.charCodeAt(0)&&10===t.charCodeAt(0),mV=b(e=>D(e[0]),(e,...t)=>{let s={};for(let n of t)n in e&&(s[n]=e[n]);return s}),mG=b(e=>D(e[0]),(e,...t)=>{let s={...e};for(let e of t)delete s[e];return s}),mH=Symbol.for("@effect/schema/ArbitraryHookId"),mW=(e,t,s,n)=>(n.isSuspend?e.oneof({depthSize:1},e.constant([]),e.array(e.tuple(t,s),{minLength:1,maxLength:2})):e.array(e.tuple(t,s))).map(e=>{let t={};for(let[s,n]of e)t[s]=n;return t}),mY=(e,t,s)=>{let n=m5(t.constraints,m3(e));return mQ(e.from,n?{...t,constraints:n}:t,s)},mQ=(e,t,s)=>{let n=(null)(e);if(Option.isSome(n))switch(e._tag){case"Declaration":return n.value(...e.typeParameters.map(e=>mQ(e,t,s)));case"Refinement":return n.value(mY(e,t,s));default:return n.value()}switch(e._tag){case"Declaration":throw Error(errors_.getArbitraryMissingAnnotationErrorMessage(s,e));case"Literal":return t=>t.constant(e.literal);case"UniqueSymbol":return t=>t.constant(e.symbol);case"UndefinedKeyword":case"VoidKeyword":return e=>e.constant(void 0);case"NeverKeyword":return()=>{throw Error(errors_.getArbitraryUnsupportedErrorMessage(s,e))};case"UnknownKeyword":case"AnyKeyword":return e=>e.anything();case"StringKeyword":return e=>t.constraints&&"StringConstraints"===t.constraints._tag?e.string(t.constraints.constraints):e.string();case"NumberKeyword":return e=>{if(t.constraints)switch(t.constraints._tag){case"NumberConstraints":return e.float(t.constraints.constraints);case"IntegerConstraints":return e.integer(t.constraints.constraints)}return e.float()};case"BooleanKeyword":return e=>e.boolean();case"BigIntKeyword":return e=>t.constraints&&"BigIntConstraints"===t.constraints._tag?e.bigInt(t.constraints.constraints):e.bigInt();case"SymbolKeyword":return e=>e.string().map(e=>Symbol.for(e));case"ObjectKeyword":return e=>e.oneof(e.object(),e.array(e.anything()));case"TemplateLiteral":return t=>{let s=t.string({maxLength:5}),n=t.float({noDefaultInfinity:!0}).filter(e=>!Number.isNaN(e)),i=[t.constant(e.head)];for(let r of e.spans)AST.isStringKeyword(r.type)?i.push(s):i.push(n),i.push(t.constant(r.literal));return t.tuple(...i).map(e=>e.join(""))};case"TupleType":{let n=[],i=!1,r=0;for(let a of e.elements)n.push(mQ(a.type,t,s.concat(r++))),a.isOptional&&(i=!0);let a=e.rest.map(e=>mQ(e.type,t,s));return s=>{let r=s.tuple(...n.map(e=>e(s)));if(i){let t=s.tuple(...e.elements.map(e=>e.isOptional?s.boolean():s.constant(!0)));r=r.chain(e=>t.map(t=>{for(let[s,n]of t.reverse().entries())n||e.splice(t.length-s,1);return e}))}if(Arr.isNonEmptyReadonlyArray(a)){let[e,...n]=a,i=e(s),o=t.constraints;r=r.chain(e=>{let n=s.array(i);return t.isSuspend?n=s.oneof({depthSize:1},s.constant([]),s.array(i,{minLength:1,maxLength:2})):o&&"ArrayConstraints"===o._tag&&(n=s.array(i,o.constraints)),n.map(t=>[...e,...t])});for(let e=0;e<n.length;e++)r=r.chain(t=>n[e](s).map(e=>[...t,e]))}return r}}case"TypeLiteral":{let n=e.propertySignatures.map(e=>mQ(e.type,t,s.concat(e.name))),i=e.indexSignatures.map(e=>[mQ(e.parameter,t,s),mQ(e.type,t,s)]);return s=>{let r={},a=[];for(let t=0;t<n.length;t++){let i=e.propertySignatures[t],o=i.name;i.isOptional||a.push(o),r[o]=n[t](s)}let o=s.record(r,{requiredKeys:a});for(let e=0;e<i.length;e++){let n=i[e][0](s),r=i[e][1](s);o=o.chain(e=>mW(s,n,r,t).map(t=>({...t,...e})))}return o}}case"Union":{let n=e.types.map(e=>mQ(e,t,s));return e=>e.oneof({depthSize:1},...n.map(t=>t(e)))}case"Enums":if(0===e.enums.length)throw Error(errors_.getArbitraryEmptyEnumErrorMessage(s));return t=>t.oneof(...e.enums.map(([e,s])=>t.constant(s)));case"Refinement":{let n=mY(e,t,s);return t=>n(t).filter(t=>Option.isNone(e.filter(t,AST.defaultParseOption,e)))}case"Suspend":{let n=util_.memoizeThunk(()=>mQ(e.f(),{...t,isSuspend:!0},s));return e=>e.constant(null).chain(()=>n()(e))}case"Transformation":return mQ(e.to,t,s)}};class mX{constructor(e){this._tag="NumberConstraints",this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=Math.fround(e.min)),Predicate.isNumber(e.max)&&(this.constraints.max=Math.fround(e.max)),Predicate.isBoolean(e.noNaN)&&(this.constraints.noNaN=e.noNaN),Predicate.isBoolean(e.noDefaultInfinity)&&(this.constraints.noDefaultInfinity=e.noDefaultInfinity)}}class mZ{constructor(e){this._tag="StringConstraints",this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class m0{constructor(e){this._tag="IntegerConstraints",this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=e.min),Predicate.isNumber(e.max)&&(this.constraints.max=e.max)}}class m1{constructor(e){this._tag="ArrayConstraints",this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class m2{constructor(e){this._tag="BigIntConstraints",this.constraints={},Predicate.isBigInt(e.min)&&(this.constraints.min=e.min),Predicate.isBigInt(e.max)&&(this.constraints.max=e.max)}}let m3=e=>{let t=e.annotations[AST.TypeAnnotationId],s=e.annotations[AST.JSONSchemaAnnotationId];switch(t){case filters_.IntTypeId:return new m0({});case filters_.GreaterThanTypeId:case filters_.GreaterThanOrEqualToTypeId:case filters_.LessThanTypeId:case filters_.LessThanOrEqualToTypeId:case filters_.BetweenTypeId:return new mX({min:s.exclusiveMinimum??s.minimum,max:s.exclusiveMaximum??s.maximum});case filters_.GreaterThanBigintTypeId:case filters_.GreaterThanOrEqualToBigIntTypeId:case filters_.LessThanBigIntTypeId:case filters_.LessThanOrEqualToBigIntTypeId:case filters_.BetweenBigintTypeId:return new m2(e.annotations[t]);case filters_.MinLengthTypeId:case filters_.MaxLengthTypeId:case filters_.LengthTypeId:return new mZ(s);case filters_.MinItemsTypeId:case filters_.MaxItemsTypeId:case filters_.ItemsCountTypeId:return new m1({minLength:s.minItems,maxLength:s.maxItems})}},m5=(e,t)=>{if(void 0===e)return t;if(void 0===t)return e;switch(e._tag){case"ArrayConstraints":if("ArrayConstraints"===t._tag)return new m1({minLength:m6(e.constraints.minLength,t.constraints.minLength),maxLength:m8(e.constraints.maxLength,t.constraints.maxLength)});break;case"NumberConstraints":switch(t._tag){case"NumberConstraints":return new mX({min:m6(e.constraints.min,t.constraints.min),max:m8(e.constraints.max,t.constraints.max),noNaN:m4(e.constraints.noNaN,t.constraints.noNaN),noDefaultInfinity:m4(e.constraints.noDefaultInfinity,t.constraints.noDefaultInfinity)});case"IntegerConstraints":return new m0({min:m6(e.constraints.min,t.constraints.min),max:m8(e.constraints.max,t.constraints.max)})}break;case"BigIntConstraints":if("BigIntConstraints"===t._tag)return new m2({min:m6(e.constraints.min,t.constraints.min),max:m8(e.constraints.max,t.constraints.max)});break;case"StringConstraints":if("StringConstraints"===t._tag)return new mZ({minLength:m6(e.constraints.minLength,t.constraints.minLength),maxLength:m8(e.constraints.maxLength,t.constraints.maxLength)});break;case"IntegerConstraints":switch(t._tag){case"NumberConstraints":case"IntegerConstraints":return new m0({min:m6(e.constraints.min,t.constraints.min),max:m8(e.constraints.max,t.constraints.max)})}}},m4=(e,t)=>void 0===e?t:void 0===t?e:e||t;function m6(e,t){return void 0===e?t:void 0===t?e:e<=t?t:e}function m8(e,t){return void 0===e?t:void 0===t?e:e<=t?e:t}let m7=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),m9=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return m9(e,t.from)}},he=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),ht=e=>{let t,s=!1;return()=>(s||(t=e(),s=!0),t)},hs=e=>{if(R(e))return JSON.stringify(e);if(N(e)||null==e||A(e)||j(e)||K(e))return String(e);if(F(e))return String(e)+"n";if(!n9(e)&&z(e,"toString")&&M(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{if(JSON.stringify(e),n9(e))return`[${e.map(hs).join(",")}]`;return`{${he(e).map(t=>`${R(t)?JSON.stringify(t):String(t)}:${hs(e[t])}`).join(",")}}`}catch(t){return String(e)}},hn=e=>"string"==typeof e?JSON.stringify(e):String(e),hi=e=>Array.isArray(e),hr=e=>!Array.isArray(e),ha=e=>`[${hn(e)}]`,ho=e=>hi(e)?e.map(ha).join(""):ha(e),hl=(e,t,s,n)=>{let i=e;return s&&it(s)&&(i+=`
at path: ${ho(s)}`),void 0!==t&&(i+=`
details: ${t}`),n&&(i+=`
schema (${n._tag}): ${n}`),i},hc=(e,t,s)=>hl("Missing annotation",e,t,s),hu=(e,t,s)=>hl("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,s),hp=e=>hl("Unsupported key schema",void 0,void 0,e),hm=e=>hl("Unsupported literal",`literal value: ${hs(e)}`),hh=e=>hl("Duplicate index signature",`${e} index signature`),hd=hl("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),hf=hl("Invalid element","A required element cannot follow an optional element. ts(1257)"),hg=e=>hl("Duplicate property signature transformation",`Duplicate key ${hs(e)}`),hb=e=>hl("Duplicate property signature",`Duplicate key ${hs(e)}`),hx=Symbol.for("@effect/schema/annotation/Type"),hy=Symbol.for("@effect/schema/annotation/Message"),hv=Symbol.for("@effect/schema/annotation/MissingMessage"),h_=Symbol.for("@effect/schema/annotation/Identifier"),hS=Symbol.for("@effect/schema/annotation/Title"),hw=Symbol.for("@effect/schema/annotation/Description"),hk=Symbol.for("@effect/schema/annotation/Examples"),hO=Symbol.for("@effect/schema/annotation/Default"),hE=Symbol.for("@effect/schema/annotation/JSONSchema"),hI=Symbol.for("@effect/schema/annotation/Documentation"),hT=Symbol.for("@effect/schema/annotation/Concurrency"),hR=Symbol.for("@effect/schema/annotation/Batching"),hN=Symbol.for("@effect/schema/annotation/ParseIssueTitle"),hA=Symbol.for("@effect/schema/annotation/ParseOptions"),hF=Symbol.for("@effect/schema/annotation/Surrogate"),hj=Symbol.for("@effect/schema/annotation/StableFilter"),hM=b(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?e5(e.annotations[t]):nL()),hC=hM(hy),hL=hM(hv),hU=hM(hS),hP=hM(h_),h$=hM(hw),hD=hM(hT),hz=hM(hR),hB=hM(hN),hq=hM(hA),hJ=hM(hF),hK=hM(hj),hV=Symbol.for("@effect/schema/annotation/JSONIdentifier"),hG=hM(hV);class hH{constructor(e,t,s,n={}){this._tag="Declaration",this.typeParameters=e,this.decodeUnknown=t,this.encodeUnknown=s,this.annotations=n}toString(){return nP(fi(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(e=>e.toJSON()),annotations:d6(this.annotations)}}}let hW=e=>t=>t._tag===e;class hY{constructor(e,t={}){this._tag="Literal",this.literal=e,this.annotations=t}toString(){return nP(fi(this),()=>hs(this.literal))}toJSON(){return{_tag:this._tag,literal:F(this.literal)?String(this.literal):this.literal,annotations:d6(this.annotations)}}}let hQ=hW("Literal"),hX=new hY(null,{[h_]:"null"});class hZ{constructor(e,t={}){this._tag="UniqueSymbol",this.symbol=e,this.annotations=t}toString(){return nP(fi(this),()=>hs(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:d6(this.annotations)}}}class h0{constructor(e={}){this._tag="UndefinedKeyword",this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:d6(this.annotations)}}}let h1=new h0({[hS]:"undefined"});class h2{constructor(e={}){this._tag="VoidKeyword",this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:d6(this.annotations)}}}let h3=new h2({[hS]:"void"});class h5{constructor(e={}){this._tag="NeverKeyword",this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:d6(this.annotations)}}}let h4=new h5({[hS]:"never"});class h6{constructor(e={}){this._tag="UnknownKeyword",this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:d6(this.annotations)}}}let h8=new h6({[hS]:"unknown"});class h7{constructor(e={}){this._tag="AnyKeyword",this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:d6(this.annotations)}}}let h9=new h7({[hS]:"any"});class de{constructor(e={}){this._tag="StringKeyword",this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:d6(this.annotations)}}}let dt=new de({[hS]:"string",[hw]:"a string"}),ds=hW("StringKeyword");class dn{constructor(e={}){this._tag="NumberKeyword",this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:d6(this.annotations)}}}let di=new dn({[hS]:"number",[hw]:"a number"}),dr=hW("NumberKeyword");class da{constructor(e={}){this._tag="BooleanKeyword",this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:d6(this.annotations)}}}let dl=new da({[hS]:"boolean",[hw]:"a boolean"});class dc{constructor(e={}){this._tag="BigIntKeyword",this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:d6(this.annotations)}}}let du=new dc({[hS]:"bigint",[hw]:"a bigint"});class dp{constructor(e={}){this._tag="SymbolKeyword",this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:d6(this.annotations)}}}let dm=new dp({[hS]:"symbol",[hw]:"a symbol"}),dh=hW("SymbolKeyword");class dd{constructor(e={}){this._tag="ObjectKeyword",this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:d6(this.annotations)}}}let df=new dd({[h_]:"object",[hS]:"object",[hw]:"an object in the TypeScript meaning, i.e. the `object` type"});class dg{constructor(e,t={}){this.type=e,this.annotations=t}toJSON(){return{type:this.type.toJSON(),annotations:d6(this.annotations)}}toString(){return String(this.type)}}class db extends dg{constructor(e,t,s={}){super(e,s),this.isOptional=t}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:d6(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}let dx=e=>e.map(e=>e.type);class dy{constructor(e,t,s,n={}){this._tag="TupleType",this.elements=e,this.rest=t,this.isReadonly=s,this.annotations=n;let i=!1,r=!1;for(let t of e)if(t.isOptional)i=!0;else if(i){r=!0;break}if(r||i&&t.length>1)throw Error(hf)}toString(){return nP(fi(this),()=>dv(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(e=>e.toJSON()),rest:this.rest.map(e=>e.toJSON()),isReadonly:this.isReadonly,annotations:d6(this.annotations)}}}let dv=e=>{let t=e.elements.map(String).join(", ");return n4(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(s,n)=>{let i=String(s),r=i.includes(" | ")?`(${i})`:i;if(n.length>0){let s=n.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${r}[], ${s}]`:`readonly [...${r}[], ${s}]`}return e.elements.length>0?`readonly [${t}, ...${r}[]]`:`ReadonlyArray<${i}>`}})};class d_ extends db{constructor(e,t,s,n,i){super(t,s,i),this.name=e,this.isReadonly=n}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:d6(this.annotations)}}}let dS=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return dS(e.from)}return!1};class dw{constructor(e,t,s){if(this.type=t,this.isReadonly=s,dS(e))this.parameter=e;else throw Error(hd)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class dk{constructor(e,t,s={}){this._tag="TypeLiteral",this.annotations=s;let n={};for(let t=0;t<e.length;t++){let s=e[t].name;if(Object.prototype.hasOwnProperty.call(n,s))throw Error(hb(s));n[s]=null}let i={string:!1,symbol:!1};for(let e=0;e<t.length;e++){let s=fs(t[e].parameter);if(ds(s)){if(i.string)throw Error(hh("string"));i.string=!0}else if(dh(s)){if(i.symbol)throw Error(hh("symbol"));i.symbol=!0}}this.propertySignatures=d7(e),this.indexSignatures=d9(t)}toString(){return nP(fi(this),()=>dE(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(e=>e.toJSON()),indexSignatures:this.indexSignatures.map(e=>e.toJSON()),annotations:d6(this.annotations)}}}let dO=e=>e.map(String).join("; "),dE=e=>{if(e.propertySignatures.length>0){let t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${dO(e.indexSignatures)} }`:`{ ${t} }`}return e.indexSignatures.length>0?`{ ${dO(e.indexSignatures)} }`:"{}"},dI=hW("TypeLiteral"),dT=e=>e.filter(e=>e!==h4),dR=ib(n0(nZ,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),dN={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},dA=e=>iR(e,e=>dL(e)?dA(e.types):[e]),dF=e=>{let t=dR(e),s=[],n={},i=[];for(let e of t)switch(e._tag){case"NeverKeyword":break;case"AnyKeyword":return[h9];case"UnknownKeyword":return[h8];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":n[e._tag]||(n[e._tag]=e,s.push(e));break;case"Literal":{let t=typeof e.literal;switch(t){case"string":case"number":case"bigint":case"boolean":n[dN[t]]||i.includes(e.literal)||(i.push(e.literal),s.push(e));break;case"object":i.includes(e.literal)||(i.push(e.literal),s.push(e))}break}case"UniqueSymbol":n.SymbolKeyword||i.includes(e.symbol)||(i.push(e.symbol),s.push(e));break;case"TupleType":n.ObjectKeyword||s.push(e);break;case"TypeLiteral":0===e.propertySignatures.length&&0===e.indexSignatures.length?n["{}"]||(n["{}"]=e,s.push(e)):n.ObjectKeyword||s.push(e);break;default:s.push(e)}return s};class dj{static{this.make=(e,t)=>{let s=[],n=new Set;for(let t=0;t<e.length;t++){let i=e[t];i===h4||n.has(i)||(n.add(i),s.push(i))}return dj.union(s,t)}}static{this.members=(e,t)=>dj.union(dT(e),t)}static{this.unify=(e,t)=>dj.union(dF(dA(e)),t)}static{this.union=(e,t)=>dC(e)?new dj(e,t):1===e.length?e[0]:h4}constructor(e,t={}){this._tag="Union",this.types=e,this.annotations=t}toString(){return nP(fi(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(e=>e.toJSON()),annotations:d6(this.annotations)}}}let dM=(e,t)=>e.map(t),dC=e=>e.length>1,dL=hW("Union"),dU=I(Symbol.for("@effect/schema/AST/toJSONMemoMap"),()=>new WeakMap);class dP{constructor(e,t={}){this._tag="Suspend",this.f=e,this.annotations=t,this.f=ht(e)}toString(){return fi(this).pipe(n$(()=>nV(nq(this.f)(),e=>fi(e))),nP(()=>"<suspended schema>"))}toJSON(){let e=this.f(),t=dU.get(e);return t||(dU.set(e,{_tag:this._tag}),t={_tag:this._tag,ast:e.toJSON(),annotations:d6(this.annotations)},dU.set(e,t)),t}}class d${constructor(e,t,s={}){this._tag="Refinement",this.from=e,this.filter=t,this.annotations=s}toString(){return nP(fi(this),()=>`{ ${this.from} | filter }`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:d6(this.annotations)}}}let dD=hW("Refinement"),dz={};class dB{constructor(e,t,s,n={}){this._tag="Transformation",this.from=e,this.to=t,this.transformation=s,this.annotations=n}toString(){return nP(fi(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:d6(this.annotations)}}}let dq=hW("Transformation");class dJ{constructor(e,t){this._tag="FinalTransformation",this.decode=e,this.encode=t}}class dK{constructor(){this._tag="ComposeTransformation"}}class dV{constructor(e,t,s,n){this.from=e,this.to=t,this.decode=s,this.encode=n}}class dG{constructor(e){this._tag="TypeLiteralTransformation",this.propertySignatureTransformations=e;let t={},s={};for(let n of e){let e=n.from;if(t[e])throw Error(hg(e));t[e]=!0;let i=n.to;if(s[i])throw Error(hg(i));s[i]=!0}}}let dH=e=>"TypeLiteralTransformation"===e._tag,dW=(e,t)=>{let s=Object.getOwnPropertyDescriptors(e);return s.annotations.value={...e.annotations,...t},Object.create(Object.getPrototypeOf(e),s)},dY=e=>{let t=`^${m7(e.head)}`;for(let s of e.spans)ds(s.type)?t+=".*":dr(s.type)&&(t+="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?"),t+=m7(s.literal);return new RegExp(t+="$")},dQ=e=>{switch(e._tag){case"TupleType":{let t=!1,s=[];for(let n of e.elements)n.isOptional&&(t=!0),s.push(n.type);return t&&s.push(h1),s=s.concat(dx(e.rest)),dj.make(s)}case"Refinement":return dQ(e.from);case"Union":return dj.make(e.types.map(dQ));case"Suspend":return dQ(e.f())}throw Error(errors_.getASTUnsupportedSchema(e))},dX=(e,t)=>{let s=[],n=[],i=e=>{switch(e._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":n.push(new dw(e,t,!0));break;case"Literal":if(R(e.literal)||N(e.literal))s.push(new d_(e.literal,t,!1,!0));else throw Error(hm(e.literal));break;case"Enums":for(let[n,i]of e.enums)s.push(new d_(i,t,!1,!0));break;case"UniqueSymbol":s.push(new d_(e.symbol,t,!1,!0));break;case"Union":e.types.forEach(i);break;default:throw Error(hp(e))}};return i(e),{propertySignatures:s,indexSignatures:n}},dZ=e=>{switch(e._tag){case"TupleType":return!1===e.isReadonly?e:new dy(e.elements,e.rest,!1,e.annotations);case"TypeLiteral":{let t=d3(e.propertySignatures,e=>!1===e.isReadonly?e:new d_(e.name,e.type,e.isOptional,!1,e.annotations)),s=d3(e.indexSignatures,e=>!1===e.isReadonly?e:new dw(e.parameter,e.type,!1));return t===e.propertySignatures&&s===e.indexSignatures?e:new dk(t,s,e.annotations)}case"Union":{let t=d3(e.types,dZ);return t===e.types?e:dj.make(t,e.annotations)}case"Suspend":return new dP(()=>dZ(e.f()),e.annotations);case"Refinement":{let t=dZ(e.from);return t===e.from?e:new d$(t,e.filter,e.annotations)}case"Transformation":{let t=dZ(e.from),s=dZ(e.to);return t===e.from&&s===e.to?e:new dB(t,s,e.transformation,e.annotations)}}return e},d0=e=>{switch(e._tag){case"Declaration":{let t=d3(e.typeParameters,d0);return t===e.typeParameters?e:new hH(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let t=d3(e.elements,e=>{let t=d0(e.type);return t===e.type?e:new db(t,e.isOptional)}),s=dx(e.rest),n=d3(s,d0);return t===e.elements&&n===s?e:new dy(t,n.map(e=>new dg(e)),e.isReadonly,e.annotations)}case"TypeLiteral":{let t=d3(e.propertySignatures,e=>{let t=d0(e.type);return t===e.type?e:new d_(e.name,t,e.isOptional,e.isReadonly)}),s=d3(e.indexSignatures,e=>{let t=d0(e.type);return t===e.type?e:new dw(e.parameter,t,e.isReadonly)});return t===e.propertySignatures&&s===e.indexSignatures?e:new dk(t,s,e.annotations)}case"Union":{let t=d3(e.types,d0);return t===e.types?e:dj.make(t,e.annotations)}case"Suspend":return new dP(()=>d0(e.f()),e.annotations);case"Refinement":{let t=d0(e.from);return t===e.from?e:new d$(t,e.filter,e.annotations)}case"Transformation":return d0(e.to)}return e},d1=e=>n$(hG(e),()=>hP(e)),d2=e=>nU(d1(e),{onNone:()=>void 0,onSome:e=>({[hV]:e})});function d3(e,t){let s=!1,n=n3(e.length);for(let i=0;i<e.length;i++){let r=e[i],a=t(r);a!==r&&(s=!0),n[i]=a}return s?n:e}let d5=(e,t)=>{switch(e._tag){case"Declaration":{let s=d3(e.typeParameters,e=>d5(e,t));return s===e.typeParameters?e:new hH(s,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let s=d3(e.elements,e=>{let s=d5(e.type,t);return s===e.type?e:new db(s,e.isOptional)}),n=dx(e.rest),i=d3(n,e=>d5(e,t));return s===e.elements&&i===n?e:new dy(s,i.map(e=>new dg(e)),e.isReadonly,d2(e))}case"TypeLiteral":{let s=d3(e.propertySignatures,e=>{let s=d5(e.type,t);return s===e.type?e:new d_(e.name,s,e.isOptional,e.isReadonly)}),n=d3(e.indexSignatures,e=>{let s=d5(e.type,t);return s===e.type?e:new dw(e.parameter,s,e.isReadonly)});return s===e.propertySignatures&&n===e.indexSignatures?e:new dk(s,n,d2(e))}case"Union":{let s=d3(e.types,e=>d5(e,t));return s===e.types?e:dj.make(s,d2(e))}case"Suspend":return new dP(()=>d5(e.f(),t),d2(e));case"Refinement":{let s=d5(e.from,t);if(t){if(s===e.from)return e;if(!dq(e.from)){let t=hK(e);if(e2(t)&&!0===t.value)return new d$(s,e.filter)}}return s}case"Transformation":return d5(e.from,t)}return e},d4=e=>d5(e,!1),d6=e=>{let t={};for(let s of Object.getOwnPropertySymbols(e))t[String(s)]=e[s];return t},d8=e=>{switch(e._tag){case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},d7=ib(n0(nZ,e=>d8(e.type))),d9=ib(n0(nZ,e=>{switch(fs(e.parameter)._tag){case"StringKeyword":return 2;case"SymbolKeyword":return 3;case"TemplateLiteral":return 1}})),fe=e=>e.reduce(null,null),ft=e=>{switch(e._tag){case"TupleType":return[2,e.elements.length,e.rest.length];case"TypeLiteral":{let t=e.propertySignatures.length,s=e.indexSignatures.length;return t+s===0?[-4,0,0]:[4,t,s]}case"Declaration":{let t=hJ(e);if(Option.isSome(t)){let[e,s,n]=ft(t.value);return[6,s,n]}return[6,0,0]}case"Suspend":return[8,0,0];case"Union":return fe(e.types.map(ft));case"Refinement":{let[t,s,n]=ft(e.from);return[t+1,s,n]}case"Transformation":return ft(e.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return null}},fs=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return fs(e.from)}},fn=e=>nP(fi(e),()=>e._tag),fi=e=>hP(e).pipe(n$(()=>hU(e)),n$(()=>h$(e))),fr=Symbol.for("@effect/schema/EquivalenceHookId"),fa=Symbol.for("@effect/schema/TypeId/GreaterThan"),fo=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualTo"),fl=Symbol.for("@effect/schema/TypeId/LessThan"),fc=Symbol.for("@effect/schema/TypeId/LessThanOrEqualTo"),fu=Symbol.for("@effect/schema/TypeId/Int"),fp=Symbol.for("@effect/schema/TypeId/MinLength"),fm=Symbol.for("@effect/schema/TypeId/Length"),fh=Symbol.for("effect/Clock"),fd=tc("effect/Clock"),ff=2147483648-1,fg={unsafeSchedule(e,t){let s=mO(t);if(s>ff)return _;let n=!1,i=setTimeout(()=>{n=!0,e()},s);return()=>(clearTimeout(i),!n)}},fb=function(){let e=BigInt(1e6);if("undefined"==typeof performance)return()=>BigInt(Date.now())*e;let t=BigInt(Date.now())*e-BigInt(Math.round(1e6*performance.now()));return()=>t+BigInt(Math.round(1e6*performance.now()))}(),fx=function(){let e="object"==typeof process&&"hrtime"in process&&"function"==typeof process.hrtime.bigint?process.hrtime:void 0;if(!e)return fb;let t=fb()-e.bigint();return()=>t+e.bigint()}();class fy{unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return fx()}scheduler(){return ub(fg)}sleep(e){return cq(t=>cD(uy(fg.unsafeSchedule(()=>t(uO),e))))}constructor(){this[fh]=fh,this.currentTimeMillis=uy(()=>this.unsafeCurrentTimeMillis()),this.currentTimeNanos=uy(()=>this.unsafeCurrentTimeNanos())}}let fv="InvalidData",f_="MissingData",fS="SourceUnavailable",fw="Unsupported",fk=Symbol.for("effect/ConfigError"),fO={_tag:"ConfigError",[fk]:fk},fE=(e,t)=>{let s=Object.create(fO);return s._op="And",s.left=e,s.right=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),s},fI=(e,t)=>{let s=Object.create(fO);return s._op="Or",s.left=e,s.right=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),s},fT=(e,t,s={pathDelim:"."})=>{let n=Object.create(fO);return n._op=fv,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=w(this.path,iL(s.pathDelim));return`(Invalid data at ${e}: "${this.message}")`}}),n},fR=(e,t,s={pathDelim:"."})=>{let n=Object.create(fO);return n._op=f_,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=w(this.path,iL(s.pathDelim));return`(Missing data at ${e}: "${this.message}")`}}),n},fN=(e,t,s,n={pathDelim:"."})=>{let i=Object.create(fO);return i._op=fS,i.path=e,i.message=t,i.cause=s,Object.defineProperty(i,"toString",{enumerable:!1,value(){let e=w(this.path,iL(n.pathDelim));return`(Source unavailable at ${e}: "${this.message}")`}}),i},fA=(e,t,s={pathDelim:"."})=>{let n=Object.create(fO);return n._op=fw,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=w(this.path,iL(s.pathDelim));return`(Unsupported operation at ${e}: "${this.message}")`}}),n},fF=b(2,(e,t)=>{switch(e._op){case"And":return fE(fF(e.left,t),fF(e.right,t));case"Or":return fI(fF(e.left,t),fF(e.right,t));case fv:return fT([...t,...e.path],e.message);case f_:return fR([...t,...e.path],e.message);case fS:return fN([...t,...e.path],e.message,e.cause);case fw:return fA([...t,...e.path],e.message)}}),fj={_tag:"Empty"},fM=b(2,(e,t)=>{let s=a4(t),n=e;for(;a2(s);){let e=s.head;switch(e._tag){case"Empty":s=s.tail;break;case"AndThen":s=a3(e.first,a3(e.second,s.tail));break;case"MapName":n=iT(n,e.f),s=s.tail;break;case"Nested":n=n6(n,e.name),s=s.tail;break;case"Unnested":if(!w(io(n),nY(e.name)))return tv(fR(n,`Expected ${e.name} to be in path in ConfigProvider#unnested`));n=ip(n),s=s.tail}}return t_(n)}),fC=(e,t)=>[...e,...t],fL=Symbol.for("effect/ConfigProvider"),fU=tc("effect/ConfigProvider"),fP=Symbol.for("effect/ConfigProviderFlat"),f$=e=>({[fL]:fL,pipe(){return eI(this,arguments)},...e}),fD=e=>({[fP]:fP,patch:e.patch,load:(t,s,n=!0)=>e.load(t,s,n),enumerateChildren:e.enumerateChildren}),fz=e=>f$({load:t=>c6(fJ(e,iE(),t,!1),e=>nU(io(e),{onNone:()=>c0(fR(iE(),`Expected a single value having structure: ${t}`)),onSome:ub})),flattened:e}),fB=(e,t,s,n)=>{let i=ij(s.length,t=>t>=n.length?nL():e5([e(t),t+1])),r=ij(n.length,e=>e>=s.length?nL():e5([t(e),e+1]));return[fC(s,i),fC(n,r)]},fq=(e,t)=>{let s=t;if("Nested"===s._tag){let t=e.slice();for(;"Nested"===s._tag;)t.push(s.name),s=s.config;return t}return e},fJ=(e,t,s,n)=>{switch(s._tag){case"Constant":return ub(iI(s.value));case"Described":return ux(()=>fJ(e,t,s.config,n));case"Fail":return c0(fR(t,s.message));case"Fallback":return w(ux(()=>fJ(e,t,s.first,n)),cK(i=>s.condition(i)?w(fJ(e,t,s.second,n),cK(e=>c0(fI(i,e)))):c0(i)));case"Lazy":return ux(()=>fJ(e,t,s.config(),n));case"MapOrFail":return ux(()=>w(fJ(e,t,s.original,n),c6(un(e=>w(s.mapOrFail(e),uu(fF(fq(t,s.original))))))));case"Nested":return ux(()=>fJ(e,fC(t,iI(s.name)),s.config,n));case"Primitive":return w(fM(t,e.patch),c6(t=>w(e.load(t,s,n),c6(e=>{if(0===e.length){let e=w(ic(t),nP(()=>"<n/a>"));return c0(fR([],`Expected ${s.description} with name ${e}`))}return ub(e)}))));case"Sequence":return w(fM(t,e.patch),c6(n=>w(e.enumerateChildren(n),c6(fW),c6(i=>0===i.length?ux(()=>ul(fJ(e,n,s.config,!0),iI)):w(un(i,n=>fJ(e,n8(t,`[${n}]`),s.config,!0)),ul(e=>{let t=iN(e);return 0===t.length?iI(iE()):iI(t)}))))));case"HashMap":return ux(()=>w(fM(t,e.patch),c6(t=>w(e.enumerateChildren(t),c6(i=>w(i,un(i=>fJ(e,fC(t,iI(i)),s.valueConfig,n)),ul(e=>0===e.length?iI(rz()):w(fH(e),iT(e=>aK(ix(n5(i),e)))))))))));case"ZipWith":return ux(()=>w(fJ(e,t,s.left,n),cX,c6(i=>w(fJ(e,t,s.right,n),cX,c6(e=>{if(tx(i)&&tx(e))return c0(fE(i.left,e.left));if(tx(i)&&ty(e))return c0(i.left);if(ty(i)&&tx(e))return c0(e.left);if(ty(i)&&ty(e)){let n=w(t,iL(".")),r=fK(t,n),[a,o]=fB(r,r,w(i.right,iT(t_)),w(e.right,iT(t_)));return w(a,ix(o),un(([e,t])=>w(uA(e,t),ul(([e,t])=>s.zip(e,t)))))}throw Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},fK=(e,t)=>s=>tv(fR(e,`The element at index ${s} in a sequence at path "${t}" was missing`)),fV=(e,t)=>e.split(RegExp(`\\s*${m7(t)}\\s*`)),fG=(e,t,s,n,i)=>i?w(fV(e,n),un(e=>s.parse(e.trim())),uu(fF(t))):w(s.parse(e),uc({onFailure:fF(t),onSuccess:iI})),fH=e=>Object.keys(e[0]).map(t=>e.map(e=>e[t])),fW=e=>w(un(e,fQ),uc({onFailure:()=>iE(),onSuccess:ib(nZ)}),cX,ul(tw)),fY=/^(\[(\d+)\])$/,fQ=e=>{let t=e.match(fY);if(null!==t){let e=t[2];return w(void 0!==e&&e.length>0?e5(e):nL(),nV(fX))}return nL()},fX=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?nL():e5(t)},fZ=Symbol.for("effect/Console"),f0=tc("effect/Console"),f1={[fZ]:fZ,assert:(e,...t)=>uy(()=>{console.assert(e,...t)}),clear:uy(()=>{console.clear()}),count:e=>uy(()=>{console.count(e)}),countReset:e=>uy(()=>{console.countReset(e)}),debug:(...e)=>uy(()=>{console.debug(...e)}),dir:(e,t)=>uy(()=>{console.dir(e,t)}),dirxml:(...e)=>uy(()=>{console.dirxml(...e)}),error:(...e)=>uy(()=>{console.error(...e)}),group:e=>e?.collapsed?uy(()=>console.groupCollapsed(e?.label)):uy(()=>console.group(e?.label)),groupEnd:uy(()=>{console.groupEnd()}),info:(...e)=>uy(()=>{console.info(...e)}),log:(...e)=>uy(()=>{console.log(...e)}),table:(e,t)=>uy(()=>{console.table(e,t)}),time:e=>uy(()=>console.time(e)),timeEnd:e=>uy(()=>console.timeEnd(e)),timeLog:(e,...t)=>uy(()=>{console.timeLog(e,...t)}),trace:(...e)=>uy(()=>{console.trace(...e)}),warn:(...e)=>uy(()=>{console.warn(...e)}),unsafe:console},f2=Symbol.for("effect/Random"),f3=tc("effect/Random");class f5{constructor(e){this[f2]=f2,this.seed=e,this.PRNG=new Q(e)}get next(){return uy(()=>this.PRNG.number())}get nextBoolean(){return ul(this.next,e=>e>.5)}get nextInt(){return uy(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,t){return ul(this.next,s=>(t-e)*s+e)}nextIntBetween(e,t){return uy(()=>this.PRNG.integer(t-e)+e)}shuffle(e){return f4(e,e=>this.nextIntBetween(0,e))}}let f4=(e,t)=>ux(()=>w(uy(()=>Array.from(e)),c6(e=>{let s=[];for(let t=e.length;t>=2;t-=1)s.push(t);return w(s,ui(s=>w(t(s),ul(t=>f6(e,s-1,t)))),c$(rn(e)))}))),f6=(e,t,s)=>{let n=e[t];return e[t]=e[s],e[s]=n,e},f8=w(tp(),tr(fd,new fy),tr(f0,f1),tr(f3,new f5(4294967296*Math.random()>>>0)),tr(fU,(e=>{let{pathDelim:t,seqDelim:s}=Object.assign({},{pathDelim:"_",seqDelim:","},void 0),n=e=>w(e,iL(t)),i=e=>e.split(t),r=()=>"undefined"!=typeof process&&"env"in process&&"object"==typeof process.env?process.env:{};return fz(fD({load:(e,t,i=!0)=>{let a=n(e),o=r();return w(a in o?e5(o[a]):nL(),uu(()=>fR(e,`Expected ${a} to exist in the process context`)),c6(n=>fG(n,e,t,s,i)))},enumerateChildren:e=>uy(()=>ah(Object.keys(r()).map(e=>i(e.toUpperCase())).filter(t=>{for(let s=0;s<e.length;s++){let n=w(e,ia(s)),i=t[s];if(void 0===i||n!==i)return!1}return!0}).flatMap(t=>t.slice(e.length,e.length+1)))),patch:fj}))})()),tr(c_,{[cv]:cv,span:(e,t,s,n,i,r)=>new ck(e,t,s,n,i,r),context:e=>e()})),f7=I(Symbol.for("effect/DefaultServices/currentServices"),()=>u2(f8)),f9=e=>uJ(f7,t=>e(ta(t,fd))),ge=f9(e=>e.currentTimeMillis);o=e=>e.next,uJ(f7,e=>o(ta(e,f3)));let gt=e=>c6(c5,t=>pH(e,ur(t))),gs="Sequential",gn="Parallel",gi={_tag:gs},gr=e=>e._tag===gs,ga=e=>e._tag===gn,go={_tag:gn},gl=e=>({_tag:"ParallelN",parallelism:e}),gc=Symbol.for("effect/FiberRefs");class gu{constructor(e){this[gc]=gc,this.locals=e}pipe(){return eI(this,arguments)}}let gp=(e,t,s,n=!1)=>{let i,r=t,a=s,o=n;for(;void 0===i;)if(it(r)&&it(a)){let e=il(r)[0],t=ip(r),s=il(a)[0],n=il(a)[1],l=ip(a);e.startTimeMillis<s.startTimeMillis?(a=l,o=!0):e.startTimeMillis>s.startTimeMillis?r=t:e.id<s.id?(a=l,o=!0):e.id>s.id?r=t:i=[n,o]}else i=[e.initial,!0];return i},gm=b(3,(e,t,s)=>{let n=new Map(e.locals);return s.locals.forEach((e,s)=>{let i=e[0][1];if(!e[0][0][eb](t)){if(!n.has(s)){if(ex(i,s.initial))return;n.set(s,[[t,s.join(s.initial,i)]]);return}let r=n.get(s),[a,o]=gp(s,r,e);if(o){let e=s.diff(a,i),o=r[0][1],l=s.join(o,s.patch(e)(o));if(!ex(o,l)){let e;let i=r[0][0];e=i[eb](t)?[[i,l],...r.slice(1)]:[[t,l],...r],n.set(s,e)}}}}),new gu(n)}),gh=b(2,(e,t)=>{let s=new Map;return gd(e,s,t),new gu(s)}),gd=(e,t,s)=>{e.locals.forEach((e,n)=>{let i=e[0][1],r=n.patch(n.fork)(i);ex(i,r)?t.set(n,e):t.set(n,[[s,r],...e])})},gf=b(2,(e,t)=>{let s=new Map(e.locals);return s.delete(t),new gu(s)}),gg=b(2,(e,t)=>e.locals.has(t)?e5(il(e.locals.get(t))[1]):nL()),gb=b(2,(e,t)=>w(gg(e,t),nP(()=>t.initial))),gx=b(2,(e,{fiberId:t,fiberRef:s,value:n})=>{if(0===e.locals.size)return new gu(new Map([[s,[[t,n]]]]));let i=new Map(e.locals);return gy(i,t,s,n),new gu(i)}),gy=(e,t,s,n)=>{let i;let r=e.get(s)??[];if(it(r)){let[e,s]=il(r);if(e[eb](t)){if(ex(s,n))return;i=[[t,n],...r.slice(1)]}else i=[[t,n],...r]}else i=[[t,n]];e.set(s,i)},gv=b(2,(e,{entries:t,forkAs:s})=>{if(0===e.locals.size)return new gu(new Map(t));let n=new Map(e.locals);return void 0!==s&&gd(e,n,s),t.forEach(([e,t])=>{1===t.length?gy(n,t[0][0],e,t[0][1]):t.forEach(([t,s])=>{gy(n,t,e,s)})}),new gu(n)}),g_="Empty",gS="Remove",gw="Update",gk="AndThen",gO={_tag:g_},gE=(e,t)=>{let s=new Map(e.locals),n=gO;for(let[e,i]of t.locals.entries()){let t=il(i)[1],r=s.get(e);if(void 0!==r){let s=il(r)[1];ex(s,t)||(n=gI({_tag:gw,fiberRef:e,patch:e.diff(s,t)})(n))}else n=gI({_tag:"Add",fiberRef:e,value:t})(n);s.delete(e)}for(let[e]of s.entries())n=gI({_tag:gS,fiberRef:e})(n);return n},gI=b(2,(e,t)=>({_tag:gk,first:e,second:t})),gT=b(3,(e,t,s)=>{let n=s,i=iI(e);for(;it(i);){let e=il(i),s=ip(i);switch(e._tag){case g_:i=s;break;case"Add":n=gx(n,{fiberId:t,fiberRef:e.fiberRef,value:e.value}),i=s;break;case gS:n=gf(n,e.fiberRef),i=s;break;case gw:{let r=gb(n,e.fiberRef);n=gx(n,{fiberId:t,fiberRef:e.fiberRef,value:e.fiberRef.patch(e.patch)(r)}),i=s;break}case gk:i=n6(e.first)(n6(e.second)(s))}}return n}),gR="effect/FiberStatus",gN=Symbol.for(gR),gA="Done",gF="Running",gj="Suspended",gM=em(`${gR}-${gA}`);class gC{[er](){return gM}[eb](e){return g$(e)&&e._tag===gA}constructor(){this[gN]=gN,this._tag=gA}}class gL{constructor(e){this[gN]=gN,this._tag=gF,this.runtimeFlags=e}[er](){return w(ea(gR),el(ea(this._tag)),el(ea(this.runtimeFlags)),eg(this))}[eb](e){return g$(e)&&e._tag===gF&&this.runtimeFlags===e.runtimeFlags}}class gU{constructor(e,t){this[gN]=gN,this._tag=gj,this.runtimeFlags=e,this.blockingOn=t}[er](){return w(ea(gR),el(ea(this._tag)),el(ea(this.runtimeFlags)),el(ea(this.blockingOn)),eg(this))}[eb](e){return g$(e)&&e._tag===gj&&this.runtimeFlags===e.runtimeFlags&&ex(this.blockingOn,e.blockingOn)}}let gP=new gC,g$=e=>z(e,gN),gD=e=>new gL(e),gz=(e,t)=>new gU(e,t),gB=e=>e._tag===gA,gq={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return eI(this,arguments)}},gJ={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return eI(this,arguments)}},gK={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return eI(this,arguments)}},gV={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return eI(this,arguments)}},gG=(l=w(nZ,n0(e=>e.ordinal)),b(2,(e,t)=>1===l(e,t))),gH=e=>{switch(e){case"All":return uU;case"Debug":return u$;case"Error":return gJ;case"Fatal":return gq;case"Info":return uP;case"Trace":return gV;case"None":return uD;case"Warning":return gK}},gW=Symbol.for("effect/Readable"),gY=Symbol.for("effect/Ref"),gQ={_A:e=>e};class gX{constructor(e){this[gY]=gQ,this.ref=e,this[gW]=gW,this.get=uy(()=>av(this.ref))}modify(e){return uy(()=>{let t=av(this.ref),[s,n]=e(t);return t!==n&&a_(n)(this.ref),s})}pipe(){return eI(this,arguments)}}let gZ=e=>new gX(ax(e)),g0=e=>uy(()=>gZ(e)),g1=e=>e.get,g2=b(2,(e,t)=>e.modify(()=>[void 0,t])),g3=b(2,(e,t)=>e.modify(t)),g5=b(2,(e,t)=>e.modify(e=>[void 0,t(e)]));class g4{scheduleTask(e,t){let s,n;for(s=0;s<this.buckets.length;s++)if(this.buckets[s][0]<=t)n=this.buckets[s];else break;if(n)n[1].push(e);else{let n=[];for(let e=0;e<s;e++)n.push(this.buckets[e]);n.push([t,[e]]);for(let e=s;e<this.buckets.length;e++)n.push(this.buckets[e]);this.buckets=n}}constructor(){this.buckets=[]}}class g6{constructor(e){this.running=!1,this.tasks=new g4,this.maxNextTickBeforeTimer=e}starveInternal(e){let t=this.tasks.buckets;for(let[e,s]of(this.tasks.buckets=[],t))for(let e=0;e<s.length;e++)s[e]();0===this.tasks.buckets.length?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(u6)&&e.getFiberRef(u4)}scheduleTask(e,t){this.tasks.scheduleTask(e,t),this.running||(this.running=!0,this.starve())}}let g8=I(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new g6(2048));class g7{scheduleTask(e,t){this.deferred?g8.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(u6)&&e.getFiberRef(u4)}flush(){for(;this.tasks.buckets.length>0;){let e=this.tasks.buckets;for(let[t,s]of(this.tasks.buckets=[],e))for(let e=0;e<s.length;e++)s[e]()}this.deferred=!0}constructor(){this.tasks=new g4,this.deferred=!1}}let g9=I(Symbol.for("effect/FiberRef/currentScheduler"),()=>uZ(g8)),be=(e,t)=>({_tag:"Par",left:e,right:t}),bt=(e,t)=>({_tag:"Seq",left:e,right:t}),bs=e=>{let t=a4(e),s=a5();for(;;){let[e,n]=a9(t,[bu(),a5()],([e,t],s)=>{let[n,i]=bn(s);return[bm(e,n),a6(t,i)]});if(s=bi(s,e),a1(n))return oe(s);t=n}throw Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},bn=e=>{let t=e,s=bu(),n=a5(),i=a5();for(;;)switch(t._tag){case"Empty":if(a1(n))return[s,i];t=n.head,n=n.tail;break;case"Par":n=a3(t.right,n),t=t.left;break;case"Seq":{let e=t.left,s=t.right;switch(e._tag){case"Empty":t=s;break;case"Par":{let n=e.left,i=e.right;t=be(bt(n,s),bt(i,s));break}case"Seq":t=bt(e.left,bt(e.right,s));break;case"Single":t=e,i=a3(s,i)}break}case"Single":if(s=bp(s,t),a1(n))return[s,i];t=n.head,n=n.tail}throw Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},bi=(e,t)=>{if(a1(e))return a4(bf(t));if(bh(t))return e;let s=b_(e.head),n=bd(t);return 1===s.length&&1===n.length&&ex(s[0],n[0])?a3(bv(e.head,bf(t)),e.tail):a3(bf(t),e)},br=Symbol.for("effect/RequestBlock/Entry"),ba={_R:e=>e},bo=Symbol.for("effect/RequestBlock/RequestBlockParallel"),bl={_R:e=>e};class bc{constructor(e){this[bo]=bl,this.map=e}}let bu=()=>new bc(rz()),bp=(e,t)=>new bc(rX(e.map,t.dataSource,e=>nD(nK(e,rp(t.blockedRequest)),()=>rs(t.blockedRequest)))),bm=(e,t)=>new bc(r3(e.map,t.map,(e,t,s)=>rV(e,s,nU(rq(e,s),{onNone:()=>t,onSome:e=>rd(t,e)})))),bh=e=>aV(e.map),bd=e=>Array.from(rH(e.map)),bf=e=>by(r1(e.map,e=>rs(e))),bg=Symbol.for("effect/RequestBlock/RequestBlockSequential"),bb={_R:e=>e};class bx{constructor(e){this[bg]=bb,this.map=e}}let by=e=>new bx(e),bv=(e,t)=>new bx(r3(t.map,e.map,(e,t,s)=>rV(e,s,nU(rq(e,s),{onNone:()=>re(),onSome:e=>rd(e,t)})))),b_=e=>Array.from(rH(e.map)),bS=e=>Array.from(e.map),bw=I(Symbol.for("effect/FiberRef/currentRequestMap"),()=>uZ(new Map)),bk=(e,t,s,n)=>{switch(e){case void 0:return t();case"unbounded":return s();case"inherit":return uJ(pt,e=>"unbounded"===e?s():e>1?n(e):t());default:return e>1?n(e):t()}},bO=(e,t,s)=>{switch(e){case void 0:return t();case"unbounded":return s();case"inherit":return uJ(pt,e=>"unbounded"===e||e>1?s():t());default:return e>1?s():t()}},bE=e=>{let t=mc(e);return f9(e=>e.sleep(t))},bI=e=>t=>{let s=t.label.replace(/[\s="]/g,"_");return`${s}=${e-t.startTime}ms`},bT="effect/MetricLabel",bR=Symbol.for(bT);class bN{constructor(e,t){this[bR]=bR,this.key=e,this.value=t,this._hash=em(bT+this.key+this.value)}[er](){return this._hash}[eb](e){return bF(e)&&this.key===e.key&&this.value===e.value}pipe(){return eI(this,arguments)}}let bA=(e,t)=>new bN(e,t),bF=e=>z(e,bR),bj=e=>{let t,s;return"function"==typeof e?t=e:(t=e.try,s=e.catch),uy(()=>{try{return t()}catch(e){throw cT(l$(s?s(e):new pE(e)))}})},bM=b(3,(e,t,s)=>cV(e,B(t),s)),bC=b(2,(e,t)=>{let s;return cV(e,e=>(s??=Object.keys(t),z(e,"_tag")&&R(e._tag)&&s.includes(e._tag)),e=>t[e._tag](e))}),bL=e=>bH(e,bU,gE),bU=((e,t,s)=>c6(e,e=>t(e)?ub(e):s(e)),cU(e=>ub(e.getFiberRefs()))),bP=e=>(...t)=>{let s;let n=nz(e);for(let e=0,n=t.length;e<n;e++){let n=t[e];lJ(n)&&(s=void 0!==s?lq(s,n):n,t=[...t.slice(0,e),...t.slice(e+1)],e--)}return 0===t.length?t="":1===t.length&&(t=t[0]),void 0===s&&(s=lP),cU(e=>(e.log(t,s,n),uO))},b$=bP(u$),bD=bP(uP),bz=bP(gK),bB=bP(gJ),bq=b(2,(e,t)=>ut(e,{onFailure:e=>c3(()=>t(e)),onSuccess:ub})),bJ=e=>ul(e,e=>!e),bK=e=>bQ((t,s)=>w(e,gT(t,s))),bV=b(3,(e,t,s)=>p2(n=>p3(e,tr(n,t,s)))),bG=b(3,(e,t,s)=>p2(n=>c6(s,s=>p3(e,w(n,tr(t,s)))))),bH=b(3,(e,t,s)=>c6(t,n=>c6(e,e=>ul(t,t=>[s(n,t),e])))),bW=b(2,(e,t)=>ut(e,{onFailure:e=>{let s=lZ(e);switch(s._tag){case"Left":return uj(t(s.left),c2(e));case"Right":return c2(e)}},onSuccess:ub})),bY=e=>{let t,s;return("function"==typeof e?t=e:(t=e.try,s=e.catch),t.length>=1)?cq((e,n)=>{try{t(n).then(t=>e(pD(t)),t=>e(c0(s?s(t):new pE(t))))}catch(t){e(c0(s?s(t):new pE(t)))}}):cq(e=>{try{t().then(t=>e(pD(t)),t=>e(c0(s?s(t):new pE(t))))}catch(t){e(c0(s?s(t):new pE(t)))}})},bQ=e=>cU(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),uO)),bX=b(2,(e,t)=>ux(()=>t()?ul(e,e5):ub(nL()))),bZ=BigInt(0),b0=(e,t,s)=>{if(!1===e.getFiberRef(po))return p7(t);let n=e.getFiberRef(u5),i=e.getFiberRef(f7),r=ta(i,c_),a=ta(i,fd),o=e.getFiberRef(pl),l=e.getFiberRefs(),c=gg(l,pc),u=gg(l,pu),p=s.parent?e5(s.parent):s.root?nL():to(n,cS),m="Some"===u._tag?void 0!==s.links?[...rr(u.value),...s.links??[]]:rr(u.value):s.links??iE(),h=r.span(t,p,s.context??tp(),m,o?a.unsafeCurrentTimeNanos():bZ,s.kind??"internal");return"function"==typeof s.captureStackTrace&&cu.set(h,s.captureStackTrace),"Some"===c._tag&&r2(c.value,(e,t)=>h.attribute(t,e)),void 0!==s.attributes&&Object.entries(s.attributes).forEach(([e,t])=>h.attribute(e,t)),h},b1=(e,t,s,n)=>uy(()=>{"Ended"!==e.status._tag&&(pT(t)&&cu.has(e)&&e.attribute("code.stacktrace",cu.get(e)()),e.end(n?s.unsafeCurrentTimeNanos():bZ,t))}),b2=(e,...t)=>{let s=cO(1===t.length?void 0:t[0]),n=t[t.length-1];return cU(t=>{let i=b0(t,e,s),r=t.getFiberRef(pl),a=ta(t.getFiberRef(f7),fd);return up(n(i),e=>b1(i,e,a,r))})},b3=b(2,(e,t)=>bV(e,cS,t)),b5="InterruptSignal",b4="Stateful",b6="Resume",b8="YieldNow",b7=e=>({_tag:b5,cause:e}),b9=e=>({_tag:b4,onFiber:e}),xe=e=>({_tag:b6,effect:e}),xt=()=>({_tag:b8}),xs=Symbol.for("effect/FiberScope");class xn{add(e,t){this.roots.add(t),t.addObserver(()=>{this.roots.delete(t)})}constructor(){this[xs]=xs,this.fiberId=aD,this.roots=new Set}}class xi{constructor(e,t){this[xs]=xs,this.fiberId=e,this.parent=t}add(e,t){this.parent.tell(b9(e=>{e.addChild(t),t.addObserver(()=>{e.removeChild(t)})}))}}let xr=e=>new xi(e.id(),e),xa=I(Symbol.for("effect/FiberScope/Global"),()=>new xn),xo=Symbol.for("effect/Fiber"),xl={_E:e=>e,_A:e=>e},xc={[xo]:xl,pipe(){return eI(this,arguments)}},xu=Symbol.for("effect/Fiber"),xp=((e,t)=>e.interruptAsFork(t),e=>uF(c9(e.await),e.inheritAll)),xm=((e,t)=>xm(e,e=>uy(()=>t(e))),b(2,(e,t)=>({...xc,id:()=>e.id(),await:c6(e.await,pC(t)),children:e.children,inheritAll:e.inheritAll,poll:c6(e.poll,e=>{switch(e._tag){case"None":return ub(nL());case"Some":return w(pC(e.value,t),ul(e5))}}),interruptAsFork:t=>e.interruptAsFork(t)})));(e,t)=>({...xc,id:()=>aC(e.id(),t.id()),await:uM(e.await,t.await,(e,t)=>pR(e)?e:t),children:e.children,inheritAll:uj(t.inheritAll,e.inheritAll),poll:uM(e.poll,t.poll,(e,t)=>{switch(e._tag){case"None":return nL();case"Some":return pR(e.value)?e:t}}),interruptAsFork:s=>w(uL(e,s),uj(w(t,uL(s))),cD)});let xh="effect/FiberCurrent",xd=Symbol.for("effect/Logger"),xf={_Message:e=>e,_Output:e=>e},xg=e=>({[xd]:xf,log:e,pipe(){return eI(this,arguments)}}),xb=b(2,(e,t)=>xg(s=>t(e.log(s)))),xx=((e,t)=>xg(s=>[e.log(s),t.log(s)]),xg(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l=`timestamp=${s.toISOString()} level=${i.label} fiber=${aP(n)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=eO(r[e]);t.length>0&&(l+=" message=",l=x_(t,l))}else{let e=eO(r);e.length>0&&(l+=" message=",l=x_(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=x_(ca(t),l)),a2(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=w(t,bI(o))}if(w(e,rW)>0){l+=" ";let t=!0;for(let[s,n]of e)t?t=!1:l+=" ",l+=xk(s)+"=",l=x_(eO(n),l)}return l})),xy=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,xv=/^[^\s"=]+$/,x_=(e,t)=>t+(e.match(xv)?e:xy(e)),xS=(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l=`timestamp=${s.toISOString()} level=${i.label} fiber=${aP(n)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=eO(r[e],0);t.length>0&&(l+=" message=",l=xE(t,l))}else{let e=eO(r,0);e.length>0&&(l+=" message=",l=xE(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=xE(ca(t),l)),a2(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=w(t,xI(o))}if(w(e,rW)>0){l+=" ";let t=!0;for(let[s,n]of e)t?t=!1:l+=" ",l+=xk(s)+"=",l=xE(eO(n,0),l)}return l},xg(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l={},c={};if(rW(e)>0)for(let[t,s]of e)l[t]=xw(s);if(a2(a))for(let e of a)c[e.label]=o-e.startTime;return{message:xw(r),logLevel:i.label,timestamp:s.toISOString(),cause:lV(t)?void 0:ca(t),annotations:l,spans:c,fiberId:aP(n)}})),xw=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return e}},xk=e=>e.replace(/[\s="]/g,"_"),xO=e=>JSON.stringify(e),xE=(e,t)=>t+(e.match(xv)?e:xO(e)),xI=e=>t=>{let s=xk(t.label);return`${s}=${e-t.startTime}ms`},xT=Symbol.for("effect/MetricKeyType"),xR="effect/MetricKeyType/Counter",xN=Symbol.for(xR),xA=Symbol.for("effect/MetricKeyType/Frequency"),xF=Symbol.for("effect/MetricKeyType/Gauge"),xj="effect/MetricKeyType/Histogram",xM=Symbol.for(xj),xC=Symbol.for("effect/MetricKeyType/Summary"),xL={_In:e=>e,_Out:e=>e};class xU{constructor(e,t){this[xT]=xL,this[xN]=xN,this.incremental=e,this.bigint=t,this._hash=em(xR)}[er](){return this._hash}[eb](e){return xD(e)}pipe(){return eI(this,arguments)}}class xP{constructor(e){this[xT]=xL,this[xM]=xM,this.boundaries=e,this._hash=w(em(xj),el(ea(this.boundaries)))}[er](){return this._hash}[eb](e){return xq(e)&&ex(this.boundaries,e.boundaries)}pipe(){return eI(this,arguments)}}let x$=e=>new xU(e?.incremental??!1,e?.bigint??!1),xD=e=>z(e,xN),xz=e=>z(e,xA),xB=e=>z(e,xF),xq=e=>z(e,xM),xJ=e=>z(e,xC),xK=Symbol.for("effect/MetricKey"),xV={_Type:e=>e},xG=nM(ex);class xH{constructor(e,t,s,n=[]){this[xK]=xV,this.name=e,this.keyType=t,this.description=s,this.tags=n,this._hash=w(em(this.name+this.description),el(ea(this.keyType)),el(ef(this.tags)))}[er](){return this._hash}[eb](e){return xW(e)&&this.name===e.name&&ex(this.keyType,e.keyType)&&ex(this.description,e.description)&&xG(this.tags,e.tags)}pipe(){return eI(this,arguments)}}let xW=e=>z(e,xK),xY=(e,t)=>new xH(e,x$(t),nz(t?.description)),xQ=b(2,(e,t)=>0===t.length?e:new xH(e.name,e.keyType,e.description,iO(e.tags,t))),xX=Symbol.for("effect/MutableHashMap"),xZ={[xX]:xX,[Symbol.iterator](){return new x0(this)},toString(){return ek(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(ew)}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}};class x0{constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(void 0!==this.bucketIterator)return this.bucketIterator.next();let e=this.referentialIterator.next();return e.done?(this.bucketIterator=new x1(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new x0(this.self)}}class x1{constructor(e){this.backing=e}next(){if(void 0===this.currentBucket){let e=this.backing.next();if(e.done)return e;this.currentBucket=e.value[Symbol.iterator]()}let e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}let x2=()=>{let e=Object.create(xZ);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},x3=b(2,(e,t)=>{if(!1===ev(t))return e.referential.has(t)?e5(e.referential.get(t)):nL();let s=t[er](),n=e.buckets.get(s);return void 0===n?nL():x5(e,n,t)}),x5=(e,t,s,n=!1)=>{for(let i=0,r=t.length;i<r;i++)if(s[eb](t[i][0])){let s=t[i][1];return n&&(t.splice(i,1),e.bucketsSize--),e5(s)}return nL()},x4=b(2,(e,t)=>e2(x3(e,t))),x6=b(3,(e,t,s)=>{if(!1===ev(t))return e.referential.set(t,s),e;let n=t[er](),i=e.buckets.get(n);return void 0===i?e.buckets.set(n,[[t,s]]):(x8(e,i,t),i.push([t,s])),e.bucketsSize++,e}),x8=(e,t,s)=>{for(let n=0,i=t.length;n<i;n++)if(s[eb](t[n][0])){t.splice(n,1),e.bucketsSize--;return}},x7=b(2,(e,t)=>{if(!1===ev(t))return e.referential.delete(t),e;let s=t[er](),n=e.buckets.get(s);return void 0===n||(x8(e,n,t),0===n.length&&e.buckets.delete(s)),e}),x9=e=>e.referential.size+e.bucketsSize,ye=Symbol.for("effect/MetricState"),yt="effect/MetricState/Counter",ys=Symbol.for(yt),yn="effect/MetricState/Frequency",yi=Symbol.for(yn),yr="effect/MetricState/Gauge",ya=Symbol.for(yr),yo="effect/MetricState/Histogram",yl=Symbol.for(yo),yc="effect/MetricState/Summary",yu=Symbol.for(yc),yp={_A:e=>e};class ym{constructor(e){this[ye]=yp,this[ys]=ys,this.count=e}[er](){return w(ea(yt),el(ea(this.count)),eg(this))}[eb](e){return yw(e)&&this.count===e.count}pipe(){return eI(this,arguments)}}let yh=nM(ex);class yd{constructor(e){this[ye]=yp,this[yi]=yi,this.occurrences=e}[er](){return w(em(yn),el(ef(n5(this.occurrences.entries()))),eg(this))}[eb](e){return yk(e)&&yh(n5(this.occurrences.entries()),n5(e.occurrences.entries()))}pipe(){return eI(this,arguments)}}class yf{constructor(e){this[ye]=yp,this[ya]=ya,this.value=e}[er](){return w(ea(yr),el(ea(this.value)),eg(this))}[eb](e){return yO(e)&&this.value===e.value}pipe(){return eI(this,arguments)}}class yg{constructor(e,t,s,n,i){this[ye]=yp,this[yl]=yl,this.buckets=e,this.count=t,this.min=s,this.max=n,this.sum=i}[er](){return w(ea(yo),el(ea(this.buckets)),el(ea(this.count)),el(ea(this.min)),el(ea(this.max)),el(ea(this.sum)),eg(this))}[eb](e){return yE(e)&&ex(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eI(this,arguments)}}class yb{constructor(e,t,s,n,i,r){this[ye]=yp,this[yu]=yu,this.error=e,this.quantiles=t,this.count=s,this.min=n,this.max=i,this.sum=r}[er](){return w(ea(yc),el(ea(this.error)),el(ea(this.quantiles)),el(ea(this.count)),el(ea(this.min)),el(ea(this.max)),el(ea(this.sum)),eg(this))}[eb](e){return yI(e)&&this.error===e.error&&ex(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eI(this,arguments)}}let yx=e=>new ym(e),yy=e=>new yd(e),yv=e=>new yf(e),y_=e=>new yg(e.buckets,e.count,e.min,e.max,e.sum),yS=e=>new yb(e.error,e.quantiles,e.count,e.min,e.max,e.sum),yw=e=>z(e,ys),yk=e=>z(e,yi),yO=e=>z(e,ya),yE=e=>z(e,yl),yI=e=>z(e,yu),yT=Symbol.for("effect/MetricHook"),yR={_In:e=>e,_Out:e=>e},yN=e=>({[yT]:yR,pipe(){return eI(this,arguments)},...e}),yA=BigInt(0),yF=e=>{let t=e.keyType.bigint?yA:0,s=e.keyType.incremental?e.keyType.bigint?e=>e>=yA:e=>e>=0:e=>!0;return yN({get:()=>yx(t),update:e=>{s(e)&&(t+=e)}})},yj=e=>{let t=new Map;for(let s of e.keyType.preregisteredWords)t.set(s,0);return yN({get:()=>yy(t),update:e=>{let s=t.get(e)??0;t.set(e,s+1)}})},yM=(e,t)=>{let s=t;return yN({get:()=>yv(s),update:e=>{s=e}})},yC=e=>{let t=e.keyType.boundaries.values,s=t.length,n=new Uint32Array(s+1),i=new Float32Array(s),r=0,a=0,o=Number.MAX_VALUE,l=Number.MIN_VALUE;w(t,ib(nZ),iT((e,t)=>{i[t]=e}));let c=()=>{let e=n3(s),t=0;for(let r=0;r<s;r++){let s=i[r];t+=n[r],e[r]=[s,t]}return e};return yN({get:()=>y_({buckets:c(),count:r,min:o,max:l,sum:a}),update:e=>{let t=0,c=s;for(;t!==c;){let s=Math.floor(t+(c-t)/2);e<=i[s]?c=s:t=s,c===t+1&&(e<=i[t]?c=t:t=c)}n[t]=n[t]+1,r+=1,a+=e,e<o&&(o=e),e>l&&(l=e)}})},yL=e=>{let{error:t,maxAge:s,maxSize:n,quantiles:i}=e.keyType,r=w(i,ib(nZ)),a=n3(n),o=0,l=0,c=0,u=Number.MAX_VALUE,p=Number.MIN_VALUE,m=e=>{let i=[],o=0;for(;o!==n-1;){let t=a[o];if(null!=t){let[n,r]=t,a=my(e-n);mC(a,mf)&&a<=s&&i.push(r)}o+=1}return yU(t,r,ib(i,nZ))},h=(e,t)=>{n>0&&(a[(o+=1)%n]=[t,e]),l+=1,c+=e,e<u&&(u=e),e>p&&(p=e)};return yN({get:()=>yS({error:t,quantiles:m(Date.now()),count:l,min:u,max:p,sum:c}),update:([e,t])=>h(e,t)})},yU=(e,t,s)=>{let n=s.length;if(!it(t))return iE();let i=t[0],r=t.slice(1),a=yP(e,n,nL(),0,i,s),o=iI(a);return r.forEach(t=>{o.push(yP(e,n,a.value,a.consumed,t,a.rest))}),iT(o,e=>[e.quantile,e.value])},yP=(e,t,s,n,i,r)=>{let a=e,o=t,l=s,c=n,u=i,p=r,m=e,h=t,d=s,f=n,g=i,b=r;for(;;){if(!it(p))return{quantile:u,value:nL(),consumed:c,rest:[]};if(1===u)return{quantile:u,value:e5(iu(p)),consumed:c+p.length,rest:[]};let e=ih(p,e=>e<=p[0]),t=u*o,s=a/2*t,n=c+e[0].length,i=Math.abs(n-t);if(n<t-s){m=a,h=o,d=io(p),f=n,g=u,b=e[1],a=m,o=h,l=d,c=f,u=g,p=b;continue}if(n>t+s)return{quantile:u,value:l,consumed:c,rest:p};switch(l._tag){case"None":m=a,h=o,d=io(p),f=n,g=u,b=e[1],a=m,o=h,l=d,c=f,u=g,p=b;continue;case"Some":if(i<Math.abs(t-l.value)){m=a,h=o,d=io(p),f=n,g=u,b=e[1],a=m,o=h,l=d,c=f,u=g,p=b;continue}return{quantile:u,value:e5(l.value),consumed:c,rest:p}}}throw Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},y$=Symbol.for("effect/MetricPair"),yD={_Type:e=>e},yz=(e,t)=>({[y$]:yD,metricKey:e,metricState:t,pipe(){return eI(this,arguments)}}),yB=Symbol.for("effect/MetricRegistry");class yq{snapshot(){let e=[];for(let[t,s]of this.map)e.push(yz(t,s.get()));return e}get(e){let t=w(this.map,x3(e),nB);if(null!=t)return t;if(xD(e.keyType))return this.getCounter(e);if(xB(e.keyType))return this.getGauge(e);if(xz(e.keyType))return this.getFrequency(e);if(xq(e.keyType))return this.getHistogram(e);if(xJ(e.keyType))return this.getSummary(e);throw Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}getCounter(e){let t=w(this.map,x3(e),nB);if(null==t){let s=yF(e);w(this.map,x4(e))||w(this.map,x6(e,s)),t=s}return t}getFrequency(e){let t=w(this.map,x3(e),nB);if(null==t){let s=yj(e);w(this.map,x4(e))||w(this.map,x6(e,s)),t=s}return t}getGauge(e){let t=w(this.map,x3(e),nB);if(null==t){let s=yM(e,e.keyType.bigint?BigInt(0):0);w(this.map,x4(e))||w(this.map,x6(e,s)),t=s}return t}getHistogram(e){let t=w(this.map,x3(e),nB);if(null==t){let s=yC(e);w(this.map,x4(e))||w(this.map,x6(e,s)),t=s}return t}getSummary(e){let t=w(this.map,x3(e),nB);if(null==t){let s=yL(e);w(this.map,x4(e))||w(this.map,x6(e,s)),t=s}return t}constructor(){this[yB]=yB,this.map=x2()}}let yJ=()=>new yq,yK=Symbol.for("effect/Metric"),yV={_Type:e=>e,_In:e=>e,_Out:e=>e},yG=I(Symbol.for("effect/Metric/globalMetricRegistry"),()=>yJ()),yH=function(e,t,s){let n=Object.assign(e=>uv(e,e=>yZ(n,e)),{[yK]:yV,keyType:e,unsafeUpdate:t,unsafeValue:s,register(){return this.unsafeValue([]),this},pipe(){return eI(this,arguments)}});return n},yW=(e,t)=>yY(xY(e,t)),yY=e=>{let t;let s=new WeakMap,n=n=>{if(0===n.length)return void 0!==t?t:t=yG.get(e);let i=s.get(n);return void 0!==i||(i=yG.get(xQ(e,n)),s.set(n,i)),i};return yH(e.keyType,(e,t)=>n(t).update(e),e=>n(e).get())},yQ=b(3,(e,t,s)=>yX(e,[bA(t,s)])),yX=b(2,(e,t)=>yH(e.keyType,(s,n)=>e.unsafeUpdate(s,iO(t,n)),s=>e.unsafeValue(iO(t,s)))),yZ=b(2,(e,t)=>uJ(pi,s=>uy(()=>e.unsafeUpdate(t,s)))),y0="effect/MetricBoundaries",y1=Symbol.for(y0);class y2{constructor(e){this[y1]=y1,this.values=e,this._hash=w(em(y0),el(ef(this.values)))}[er](){return this._hash}[eb](e){return y3(e)&&ex(this.values,e.values)}pipe(){return eI(this,arguments)}}let y3=e=>z(e,y1),y5=b(2,(e,t)=>uJ(bw,s=>uy(()=>{if(s.has(e)){let n=s.get(e);n.state.completed||(n.state.completed=!0,pX(n.result,t))}})));class y4{addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}increment(){this.count++,this.observers.forEach(e=>e(this.count))}decrement(){this.count--,this.observers.forEach(e=>e(this.count))}constructor(){this.count=0,this.observers=new Set,this.interrupted=!1}}let y6=Symbol.for("effect/Supervisor"),y8={_T:e=>e};class y7{constructor(e,t){this[y6]=y8,this.underlying=e,this.value0=t}get value(){return this.value0}onStart(e,t,s,n){this.underlying.onStart(e,t,s,n)}onEnd(e,t){this.underlying.onEnd(e,t)}onEffect(e,t){this.underlying.onEffect(e,t)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new y7(this,w(this.value,ul(e)))}zip(e){return new y9(this,e)}}class y9{constructor(e,t){this._tag="Zip",this[y6]=y8,this.left=e,this.right=t}get value(){return uA(this.left.value,this.right.value)}onStart(e,t,s,n){this.left.onStart(e,t,s,n),this.right.onStart(e,t,s,n)}onEnd(e,t){this.left.onEnd(e,t),this.right.onEnd(e,t)}onEffect(e,t){this.left.onEffect(e,t),this.right.onEffect(e,t)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new y7(this,w(this.value,ul(e)))}zip(e){return new y9(this,e)}}let ve=e=>z(e,y6)&&B(e,"Zip");class vt{get value(){return uy(()=>Array.from(this.fibers))}onStart(e,t,s,n){this.fibers.add(n)}onEnd(e,t){this.fibers.delete(t)}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new y7(this,w(this.value,ul(e)))}zip(e){return new y9(this,e)}onRun(e,t){return e()}constructor(){this[y6]=y8,this.fibers=new Set}}class vs{constructor(e){this[y6]=y8,this.effect=e}get value(){return this.effect}onStart(e,t,s,n){}onEnd(e,t){}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new y7(this,w(this.value,ul(e)))}zip(e){return new y9(this,e)}onRun(e,t){return e()}}let vn=uy(()=>new vt),vi=e=>new vs(e),vr=I("effect/Supervisor/none",()=>vi(uO)),va="Empty",vo="AddSupervisor",vl="RemoveSupervisor",vc="AndThen",vu={_tag:va},vp=(e,t)=>({_tag:vc,first:e,second:t}),vm=(e,t)=>{let s=e,n=t;for(;rg(n);){let e=rx(n);switch(e._tag){case va:n=ry(n);break;case vo:s=s.zip(e.supervisor),n=ry(n);break;case vl:s=vh(s,e.supervisor),n=ry(n);break;case vc:n=rm(e.first)(rm(e.second)(ry(n)))}}return s},vh=(e,t)=>ex(e,t)?vr:ve(e)?vh(e.left,t).zip(vh(e.right,t)):e,vd=e=>ex(e,vr)?ae():ve(e)?w(vd(e.left),au(vd(e.right))):ad(e),vf=ln({empty:vu,patch:(e,t)=>vm(t,rs(e)),combine:vp,diff:(e,t)=>{if(ex(e,t))return vu;let s=vd(e),n=vd(t),i=w(n,ac(s),am(vu,(e,t)=>vp(e,{_tag:vo,supervisor:t}))),r=w(s,ac(n),am(vu,(e,t)=>vp(e,{_tag:vl,supervisor:t})));return vp(i,r)}}),vg=yW("effect_fiber_started",{incremental:!0}),vb=yW("effect_fiber_active"),vx=yW("effect_fiber_successes",{incremental:!0}),vy=yW("effect_fiber_failures",{incremental:!0}),vv=yQ(yY(new xH("effect_fiber_lifetimes",new xP(w(((e,t)=>{let s=Math.max(1,Math.floor(e)),n=Array(s);for(let e=0;e<s;e++)n[e]=t(e);return n})((c={start:.5,factor:2,count:35}).count-1,e=>c.start*Math.pow(c.factor,e)),rl,e=>new y2(w(e,n7(rs(Number.POSITIVE_INFINITY)),iC)))),nz(void 0))),"time_unit","milliseconds"),v_="Continue",vS="Yield",vw={_E:e=>e,_A:e=>e},vk=e=>{throw Error(`BUG: FiberRuntime - ${eO(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},vO=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),vE=I("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),vI={[eF]:(e,t,s)=>en(()=>t.effect_instruction_i1(s)),OnStep:(e,t,s)=>pD(pD(s)),[ej]:(e,t,s)=>en(()=>t.effect_instruction_i2(s)),[eD]:(e,t,s)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),lx(e._runtimeFlags)&&e.isInterrupted())?pM(e.getInterruptedCause()):pD(s),[eU]:(e,t,s)=>(en(()=>t.effect_instruction_i2(s)),en(()=>t.effect_instruction_i0()))?(e.pushStack(t),en(()=>t.effect_instruction_i1())):uO},vT={[b5]:(e,t,s,n)=>(e.processNewInterruptSignal(n.cause),lx(t)?pM(n.cause):s),[b6]:(e,t,s,n)=>{throw Error("It is illegal to have multiple concurrent run loops in a single fiber")},[b4]:(e,t,s,n)=>(n.onFiber(e,gD(t)),s),[b8]:(e,t,s,n)=>c6(uN(),()=>s)},vR=e=>ui(bs(e),e=>vJ(bS(e),([e,t])=>{let s=new Map,n=[];for(let e of t)for(let t of(n.push(rr(e)),e))s.set(t.request,t);let i=n.flat();return uQ(_l(e.runAll(n),i,()=>i.forEach(e=>{e.listeners.interrupted=!0})),bw,s)},!1,!1));class vN{static{n=xo,i=xu}pipe(){return eI(this,arguments)}constructor(e,t,s){if(this[n]=xl,this[i]=vw,this._queue=[],this._children=null,this._observers=[],this._running=!1,this._stack=[],this._asyncInterruptor=null,this._asyncBlockingOn=null,this._exitValue=null,this._steps=[],this.currentOpCount=0,this.isYielding=!1,this.run=()=>{this.drainQueueOnCurrentThread()},this._runtimeFlags=s,this._fiberId=e,this._fiberRefs=t,this._supervisor=this.getFiberRef(_n),this._scheduler=this.getFiberRef(g9),lw(s)){let e=this.getFiberRef(pi);vg.unsafeUpdate(1,e),vb.unsafeUpdate(1,e)}this._tracer=ta(this.getFiberRef(f7),c_)}id(){return this._fiberId}resume(e){this.tell(xe(e))}get status(){return this.ask((e,t)=>t)}get runtimeFlags(){return this.ask((e,t)=>gB(t)?e._runtimeFlags:t.runtimeFlags)}scope(){return xr(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return null===this._children&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(pa)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return ux(()=>{let t=pJ(this._fiberId);return this.tell(b9((s,n)=>{pX(t,uy(()=>e(s,n)))})),pG(t)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return cq(e=>{let t=t=>e(ub(t));return this.tell(b9((e,s)=>{null!==e._exitValue?t(this._exitValue):e.addObserver(t)})),uy(()=>this.tell(b9((e,s)=>{e.removeObserver(t)})))},this.id())}get inheritAll(){return cU((e,t)=>{let s=e.id(),n=e.getFiberRefs(),i=t.runtimeFlags,r=gm(n,s,this.getFiberRefs());return e.setFiberRefs(r),uE(w(lO(i,e.getFiberRef(_s)),lh(1),lh(16)))})}get poll(){return uy(()=>nz(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return uy(()=>this.tell(b7(lz(e))))}unsafeInterruptAsFork(e){this.tell(b7(lz(e)))}addObserver(e){null!==this._exitValue?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(t=>t!==e)}getFiberRefs(){return this.setFiberRef(_s,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=gf(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,t){this._fiberRefs=gx(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:t}),this.refreshRefCache()}refreshRefCache(){this._tracer=ta(this.getFiberRef(f7),c_),this._supervisor=this.getFiberRef(_n),this._scheduler=this.getFiberRef(g9)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let t=v_,s=globalThis[xh];globalThis[xh]=this;try{for(;t===v_;)t=0===this._queue.length?"Done":this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[xh]=s}this._queue.length>0&&!this._running?(this._running=!0,t===vS?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(u4))}drainQueueWhileRunning(e,t){let s=t;for(;this._queue.length>0;){let t=this._queue.splice(0,1)[0];s=vT[t._tag](this,e,s,t)}return s}isInterrupted(){return!lV(this.getFiberRef(pa))}addInterruptedCause(e){let t=this.getFiberRef(pa);this.setFiberRef(pa,lq(t,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(null===this._children||0===this._children.size)return!1;let e=!1;for(let t of this._children)t.tell(b7(lz(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let e=this._children.values();this._children=null;let t=!1;return uT({while:()=>!t,body:()=>{let s=e.next();return s.done?uy(()=>{t=!0}):cD(s.value.await)},step:()=>{}})}return null}reportExitValue(e){if(lw(this._runtimeFlags)){let t=this.getFiberRef(pi),s=this.id().startTimeMillis,n=Date.now();switch(vv.unsafeUpdate(n-s,t),vb.unsafeUpdate(-1,t),e._tag){case eM:vx.unsafeUpdate(1,t);break;case eN:vy.unsafeUpdate(1,t)}}if("Failure"===e._tag){let t=this.getFiberRef(pn);lH(e.cause)||"Some"!==t._tag||this.log("Fiber terminated with an unhandled error",e.cause,t)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let t=this._observers.length-1;t>=0;t--)this._observers[t](e)}getLoggers(){return this.getFiberRef(vC)}log(e,t,s){let n=e2(s)?s.value:this.getFiberRef(u7);if(gG(this.getFiberRef(vA),n))return;let i=this.getFiberRef(u9),r=this.getFiberRef(u8),a=this.getLoggers(),o=this.getFiberRefs();if(af(a)>0){let s=new Date(ta(this.getFiberRef(f7),fd).unsafeCurrentTimeMillis());for(let l of a)l.log({fiberId:this.id(),logLevel:n,message:e,cause:t,context:o,spans:i,annotations:r,date:s})}}evaluateMessageWhileSuspended(e){switch(e._tag){case b8:return vS;case b5:return this.processNewInterruptSignal(e.cause),null!==this._asyncInterruptor&&(this._asyncInterruptor(pM(e.cause)),this._asyncInterruptor=null),v_;case b6:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),v_;case b4:return e.onFiber(this,null!==this._exitValue?gP:gz(this._runtimeFlags,this._asyncBlockingOn)),v_;default:return vk(e)}}evaluateEffect(e){this._supervisor.onResume(this);try{let t=lx(this._runtimeFlags)&&this.isInterrupted()?pM(this.getInterruptedCause()):e;for(;null!==t;){let e=t,s=this.runLoop(e);if(s===vO){let e=vE.currentOp;vE.currentOp=null,e._op===e$?lg(this._runtimeFlags)?(this.tell(xt()),this.tell(xe(pz)),t=null):t=pz:e._op===eT&&(t=null)}else{this._runtimeFlags=w(this._runtimeFlags,lb(16));let e=this.interruptAllChildren();null!==e?t=c6(e,()=>s):(0===this._queue.length?this.setExitValue(s):this.tell(xe(s)),t=null)}}}finally{this._supervisor.onSuspend(this)}}start(e){if(this._running)this.tell(xe(e));else{this._running=!0;let t=globalThis[xh];globalThis[xh]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[xh]=t,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(xe(e))}patchRuntimeFlags(e,t){let s=lE(e,t);return globalThis[xh]=this,this._runtimeFlags=s,s}initiateAsync(e,t){let s=!1,n=e=>{s||(s=!0,this.tell(xe(e)))};lx(e)&&(this._asyncInterruptor=n);try{t(n)}catch(e){n(c2(lD(e)))}}pushStack(e){this._stack.push(e),"OnStep"===e._op&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){let e=this._stack.pop();if(e)return"OnStep"===e._op&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==eA)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==eF&&e._op!==eU)return e;e=this.popStack()}}Tag(e){return ul(uq(u5),t=>ta(t,e))}Left(e){return c0(e.left)}None(e){return c0(new pk)}Right(e){return pD(e.right)}Some(e){return pD(e.value)}Micro(e){return cB(t=>{let s=tG().pipe(tW(t2,this.getFiberRef(u5))),n=t;return e[tT](s,e=>{if("Right"===e._tag)return n(pD(e.right));switch(e.left._tag){case"Interrupt":return n(pM(lz(aD)));case"Fail":return n(c0(e.left.error));case"Die":return n(cY(e.left.defect))}}),cq(e=>{n=t=>{e(uO)},tH(s,t0).abort()})})}[eC](e){let t=en(()=>e.effect_instruction_i0()),s=this.getNextSuccessCont();return void 0!==s?(s._op in vI||vk(s),vI[s._op](this,s,t)):(vE.currentOp=pD(t),vO)}[eM](e){let t=this.getNextSuccessCont();return void 0!==t?(t._op in vI||vk(t),vI[t._op](this,t,e.effect_instruction_i0)):(vE.currentOp=e,vO)}[eN](e){let t=e.effect_instruction_i0,s=this.getNextFailCont();if(void 0===s)return vE.currentOp=pM(t),vO;switch(s._op){case eA:case ej:if(!(lx(this._runtimeFlags)&&this.isInterrupted()))return en(()=>s.effect_instruction_i1(t));return pM(l2(t));case"OnStep":if(!(lx(this._runtimeFlags)&&this.isInterrupted()))return pD(pM(t));return pM(l2(t));case eD:if(this.patchRuntimeFlags(this._runtimeFlags,s.patch),lx(this._runtimeFlags)&&this.isInterrupted())return pM(lq(t,this.getInterruptedCause()));return pM(t);default:vk(s)}}[eP](e){return en(()=>e.effect_instruction_i0(this,gD(this._runtimeFlags)))}Blocked(e){let t=this.getFiberRefs(),s=this._runtimeFlags;if(this._steps.length>0){let n=[],i=this._steps[this._steps.length-1],r=this.popStack();for(;r&&"OnStep"!==r._op;)n.push(r),r=this.popStack();this.setFiberRefs(i.refs),this._runtimeFlags=i.flags;let a=gE(i.refs,t),o=lO(i.flags,s);return pD(cR(e.effect_instruction_i0,cU(t=>{for(;n.length>0;)t.pushStack(n.pop());return t.setFiberRefs(gT(t.id(),t.getFiberRefs())(a)),t._runtimeFlags=lE(o)(t._runtimeFlags),e.effect_instruction_i1})))}return uk(t=>c6(vV(cN(e.effect_instruction_i0)),()=>t(e.effect_instruction_i1)))}RunBlocked(e){return vR(e.effect_instruction_i0)}[eL](e){let t=e.effect_instruction_i0,s=this._runtimeFlags,n=lE(s,t);if(lx(n)&&this.isInterrupted())return pM(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,t),!e.effect_instruction_i1)return pz;{let t=lO(n,s);return this.pushStack(new cF(t,e)),en(()=>e.effect_instruction_i1(s))}}[eF](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[eA](e){return this.pushStack(e),e.effect_instruction_i0}[ej](e){return this.pushStack(e),e.effect_instruction_i0}[eT](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,e.effect_instruction_i0),vE.currentOp=e,vO}[e$](e){return this.isYielding=!1,vE.currentOp=e,vO}[eU](e){let t=e.effect_instruction_i0,s=e.effect_instruction_i1;return t()?(this.pushStack(e),s()):pz}[eR](e){return en(()=>e.commit())}runLoop(e){let t=e;for(this.currentOpCount=0;;){if((2&this._runtimeFlags)!=0&&this._supervisor.onEffect(this,t),this._queue.length>0&&(t=this.drainQueueWhileRunning(this._runtimeFlags,t)),!this.isYielding){this.currentOpCount+=1;let e=this._scheduler.shouldYield(this);if(!1!==e){this.isYielding=!0,this.currentOpCount=0;let s=t;t=c6(uN({priority:e}),()=>s)}}try{if("_op"in t&&t._op in this||vk(t),(t=this._tracer.context(()=>k()!==t[ez]._V?cQ(`Cannot execute an Effect versioned ${t[ez]._V} with a Runtime of version ${k()}`):this[t._op](t),this))===vO){let e=vE.currentOp;if(e._op===e$||e._op===eT)return vO;return vE.currentOp=null,e._op===eM||e._op===eN?e:pM(lD(e))}}catch(e){t=cI(e)?pM(e.cause):pS(e)?pM(lq(lD(e),lz(aD))):cY(e)}}}}let vA=I("effect/FiberRef/currentMinimumLogLevel",()=>uZ(gH("Info"))),vF=e=>xg(t=>{ta(gb(t.context,f7),f0).unsafe.log(e.log(t))}),vj=I(Symbol.for("effect/Logger/defaultLogger"),()=>vF(xx)),vM=I(Symbol.for("effect/Logger/tracerLogger"),()=>xg(({annotations:e,cause:t,context:s,fiberId:n,logLevel:i,message:r})=>{let a=nV(gg(s,u5),to(cS)),o=nK(gg(s,f7),e=>ta(e,fd));if("None"===a._tag||"ExternalSpan"===a.value._tag||"None"===o._tag)return;let l=Object.fromEntries(r1(e,eO));l["effect.fiberId"]=aP(n),l["effect.logLevel"]=i.label,null!==t&&"Empty"!==t._tag&&(l["effect.cause"]=ca(t)),a.value.event(String(r),o.value.unsafeCurrentTimeNanos(),l)})),vC=I(Symbol.for("effect/FiberRef/currentLoggers"),()=>u0(ad(vj,vM))),vL=b(e=>cL(e[0]),(e,t)=>uw(uv(e,e=>vU(s=>t(e,s))))),vU=e=>cU(t=>{let s=t.getFiberRefs(),n=t._runtimeFlags;return c6(v5,t=>pd(t,t=>cU(i=>{let r=i.getFiberRefs(),a=i._runtimeFlags,o=gE(r,s),l=lO(a,n),c=gE(s,r);return i.setFiberRefs(gT(o,i.id(),s)),_o(uR(e(t),l),uy(()=>{i.setFiberRefs(gT(c,i.id(),i.getFiberRefs()))}))})))}),vP=e=>{if(Array.isArray(e)||V(e))return[e,nL()];let t=Object.keys(e),s=t.length;return[t.map(t=>e[t]),e5(e=>{let n={};for(let i=0;i<s;i++)n[t[i]]=e[i];return n})]},v$=(e,t,s)=>{let n=[];for(let t of e)n.push(cX(t));return c6(vB(n,x,{concurrency:s?.concurrency,batching:s?.batching}),e=>{let n=nL(),i=e.length,r=Array(i),a=Array(i),o=!1;for(let t=0;t<i;t++){let s=e[t];"Left"===s._tag?(r[t]=e5(s.left),o=!0):(a[t]=s.right,r[t]=n)}return o?"Some"===t._tag?c0(t.value(r)):c0(r):s?.discard?uO:"Some"===t._tag?ub(t.value(a)):ub(a)})},vD=(e,t,s)=>{let n=[];for(let t of e)n.push(cX(t));return s?.discard?vB(n,x,{concurrency:s?.concurrency,batching:s?.batching,discard:!0}):ul(vB(n,x,{concurrency:s?.concurrency,batching:s?.batching}),e=>"Some"===t._tag?t.value(e):e)},vz=(e,t)=>{let[s,n]=vP(e);return t?.mode==="validate"?v$(s,n,t):t?.mode==="either"?vD(s,n,t):t?.discard!==!0&&"Some"===n._tag?ul(vB(s,x,t),n.value):vB(s,x,t)},vB=((e,t)=>Array.from({length:t},()=>e),b(e=>V(e[0]),(e,t,s)=>cU(n=>{let i=s?.batching===!0||s?.batching==="inherit"&&n.getFiberRef(ps);return s?.discard?bk(s.concurrency,()=>vZ(gi)(s=>i?vJ(e,(e,n)=>s(t(e,n)),!0,!1,1):ui(e,(e,n)=>s(t(e,n)))),()=>vZ(go)(s=>vJ(e,(e,n)=>s(t(e,n)),i,!1)),s=>vZ(gl(s))(n=>vJ(e,(e,s)=>n(t(e,s)),i,!1,s))):bk(s?.concurrency,()=>vZ(gi)(s=>i?vK(e,1,(e,n)=>s(t(e,n)),!0):un(e,(e,n)=>s(t(e,n)))),()=>vZ(go)(s=>vq(e,(e,n)=>s(t(e,n)),i)),s=>vZ(gl(s))(n=>vK(e,s,(e,s)=>n(t(e,s)),i)))}))),vq=(e,t,s)=>ux(()=>{let n=n5(e),i=Array(n.length);return uj(vJ(n,(e,s)=>c6(t(e,s),e=>uy(()=>i[s]=e)),s,!1),ub(i))}),vJ=(e,t,s,n,i)=>uk(r=>u_(a=>cU(o=>{let l=Array.from(e).reverse(),c=l.length;if(0===c)return uO;let u=0,p=!1,m=i?Math.min(l.length,i):l.length,h=new Set,d=[],f=()=>h.forEach(e=>{e._scheduler.scheduleTask(()=>{e.unsafeInterruptAsFork(o.id())},0)}),g=[],b=[],x=[],y=()=>{let e=d.filter(({exit:e})=>"Failure"===e._tag).sort((e,t)=>e.index<t.index?-1:e.index===t.index?0:1).map(({exit:e})=>e);return 0===e.length&&e.push(pz),e},v=(e,t=!1)=>{let s=uw(a(e)),n=vH(s,o,o._runtimeFlags,xa);return o._scheduler.scheduleTask(()=>{t&&n.unsafeInterruptAsFork(o.id()),n.resume(s)},0),n},_=()=>{n||(c-=l.length,l=[]),p=!0,f()},S=s?c7:cZ,w=v(cq(e=>{let n=(e,t)=>{"Blocked"===e._op?x.push(e):(d.push({index:t,exit:e}),"Failure"!==e._op||p||_())},a=()=>{if(l.length>0){let m=l.pop(),f=u++,_=()=>{let e=l.pop();return f=u++,c6(uN(),()=>c6(S(r(t(e,f))),w))},w=e=>l.length>0&&(n(e,f),l.length>0)?_():ub(e),k=v(c6(S(r(t(m,f))),w));g.push(k),h.add(k),p&&k._scheduler.scheduleTask(()=>{k.unsafeInterruptAsFork(o.id())},0),k.addObserver(t=>{let r;r="Failure"===t._op?t:t.effect_instruction_i0,b.push(k),h.delete(k),n(r,f),d.length===c?e(ub(nP(pF(y(),{parallel:!0}),()=>pz))):x.length+d.length===c?e(ub(cR(x.map(e=>e.effect_instruction_i0).reduce(be),vJ([nP(pF(y(),{parallel:!0}),()=>pz),...x.map(e=>e.effect_instruction_i1)],e=>e,s,!0,i)))):a()})}};for(let e=0;e<m;e++)a()}));return cD(up(c9(r(xp(w))),pP({onFailure:()=>{_();let e=x.length+1,t=Math.min("number"==typeof i?i:x.length,x.length),s=Array.from(x);return cq(n=>{let i=[],r=0,a=0,o=(t,a)=>o=>{i[t]=o,++r===e&&n(nJ(pF(i,{parallel:!0}))),s.length>0&&a&&l()},l=()=>{v(s.pop(),!0).addObserver(o(a,!0)),a++};w.addObserver(o(a,!1)),a++;for(let e=0;e<t;e++)l()})},onSuccess:()=>un(b,e=>e.inheritAll)})))}))),vK=(e,t,s,n)=>ux(()=>{let i=n5(e),r=Array(i.length);return uj(vJ(i,(e,t)=>ul(s(e,t),e=>r[t]=e),n,!1,t),ub(r))}),vV=e=>vY(e,xa),vG=(e,t,s,n=null)=>{let i=vW(e,t,s,n);return i.resume(e),i},vH=(e,t,s,n=null)=>vW(e,t,s,n),vW=(e,t,s,n=null)=>{let i=aJ(),r=gh(t.getFiberRefs(),i),a=new vN(i,r,s),o=gb(r,u5),l=a._supervisor;return l.onStart(o,e,e5(t),a),a.addObserver(e=>l.onEnd(e,a)),(null!==n?n:w(t.getFiberRef(pr),nP(()=>t.scope()))).add(s,a),a},vY=(e,t)=>cU((s,n)=>ub(vG(e,s,n.runtimeFlags,t))),vQ=(e=>M(e[2]),e=>p2(t=>nU(to(t,v3),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return c6(pg(t,go),t=>v9(e,t))}}}))),vX=e=>t=>p2(s=>nU(to(s,v3),{onNone:()=>t,onSome:s=>"ParallelN"===s.strategy._tag&&s.strategy.parallelism===e?t:c6(pg(s,gl(e)),e=>v9(t,e))})),vZ=e=>t=>p2(s=>nU(to(s,v3),{onNone:()=>t(x),onSome:s=>{let n="Parallel"===e._tag?vQ:"Sequential"===e._tag?v1:vX(e.parallelism);switch(s.strategy._tag){case"Parallel":return n(t(vQ));case"Sequential":return n(t(v1));case"ParallelN":return n(t(vX(s.strategy.parallelism)))}}})),v0=e=>c6(v3,e),v1=e=>p2(t=>nU(to(t,v3),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return c6(pg(t,gi),t=>v9(e,t))}}})),v2=(e=>cL(e[1]),b(e=>cL(e[1]),(e,t,s,n)=>ul(vz([e,t],{concurrency:n?.concurrent?2:1,batching:n?.batching}),([e,t])=>s(e,t)))),v3=tc("effect/Scope"),v5=v3,v4=(e,t)=>{"Open"===e.state._tag&&e.state.finalizers.add(t)},v6={[pp]:pp,[pm]:pm,pipe(){return eI(this,arguments)},fork(e){return uy(()=>{let t=v8(e);if("Closed"===this.state._tag)return t.state=this.state,t;let s=e=>t.close(e);return this.state.finalizers.add(s),v4(t,e=>uy(()=>{"Open"===this.state._tag&&this.state.finalizers.delete(s)})),t})},close(e){return ux(()=>{if("Closed"===this.state._tag)return uO;let t=Array.from(this.state.finalizers.values()).reverse();return(this.state={_tag:"Closed",exit:e},0===t.length)?uO:gr(this.strategy)?w(un(t,t=>cZ(t(e))),c6(e=>w(pF(e),nK(pA),nP(()=>pz)))):ga(this.strategy)?w(vq(t,t=>cZ(t(e)),!1),c6(e=>w(pF(e,{parallel:!0}),nK(pA),nP(()=>pz)))):w(vK(t,this.strategy.parallelism,t=>cZ(t(e)),!1),c6(e=>w(pF(e,{parallel:!0}),nK(pA),nP(()=>pz))))})},addFinalizer(e){return ux(()=>"Closed"===this.state._tag?e(this.state.exit):(this.state.finalizers.add(e),uO))}},v8=(e=gi)=>{let t=Object.create(v6);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},v7=(e=gi)=>uy(()=>v8(e)),v9=b(2,(e,t)=>p4(e,tl(ti(v3,t)))),_e=b(2,(e,t)=>cD(vL(c6(uq(e),s=>c$(uK(e,t),s)),t=>uK(e,t)))),_t=b(2,(e,t)=>uJ(e,s=>_e(e,t(s)))),_s=u3(lS,{differ:lI,fork:lI.empty}),_n=u3(vr,{differ:vf,fork:vu}),_i=b(3,(e,t,s)=>_r(e,t,{onSelfWin:(e,t)=>c6(e.await,n=>{switch(n._tag){case eM:return c6(e.inheritAll,()=>s.onSelfDone(n,t));case eN:return s.onSelfDone(n,t)}}),onOtherWin:(e,t)=>c6(e.await,n=>{switch(n._tag){case eM:return c6(e.inheritAll,()=>s.onOtherDone(n,t));case eN:return s.onOtherDone(n,t)}})})),_r=((e,t)=>c4(s=>_i(e,t,{onSelfDone:(e,t)=>p$(e,{onFailure:e=>w(xp(t),bq(t=>lB(e,t))),onSuccess:e=>w(t,uL(s),c$(e))}),onOtherDone:(e,t)=>p$(e,{onFailure:e=>w(xp(t),bq(t=>lB(t,e))),onSuccess:e=>w(t,uL(s),c$(e))})})),b(3,(e,t,s)=>cU((n,i)=>{let r=i.runtimeFlags,a=ax(!0),o=vW(e,n,r,s.selfScope),l=vW(t,n,r,s.otherScope);return cq(n=>{o.addObserver(()=>_a(o,l,s.onSelfWin,a,n)),l.addObserver(()=>_a(l,o,s.onOtherWin,a,n)),o.startFork(e),l.startFork(t)},aM(o.id(),l.id()))}))),_a=(e,t,s,n,i)=>{ay(!0,!1)(n)&&i(s(e,t))},_o=b(2,(e,t)=>uk(s=>ut(s(e),{onFailure:e=>ut(t,{onFailure:t=>c2(lq(e,t)),onSuccess:()=>c2(e)}),onSuccess:e=>c$(t,e)}))),_l=(e,t,s)=>c4(n=>c6(c6(vV(ua(e)),e=>cq(n=>{let i=t.map(e=>e.listeners.count),r=()=>{i.every(e=>0===e)&&t.every(e=>"Pending"===e.result.state.current._tag||!!("Done"===e.result.state.current._tag&&pI(e.result.state.current.effect)&&"Failure"===e.result.state.current.effect._tag&&lG(e.result.state.current.effect.cause)))&&(a.forEach(e=>e()),s?.(),n(uC(e)))};e.addObserver(e=>{a.forEach(e=>e()),n(e)});let a=t.map((e,t)=>{let s=e=>{i[t]=e,r()};return e.listeners.addObserver(s),()=>e.listeners.removeObserver(s)});return r(),uy(()=>{a.forEach(e=>e())})})),()=>ux(()=>ui(t.flatMap(e=>e.state.completed?[]:[e]),e=>y5(e.request,pL(n)))))),_c=((e,t)=>_u(e.minutes,t.minutes)&&_u(e.hours,t.hours)&&_u(e.days,t.days)&&_u(e.months,t.months)&&_u(e.weekdays,t.weekdays),nM(nA)),_u=(e,t)=>_c(n5(e),n5(t)),_p=Symbol.for("effect/ScheduleInterval"),_m={[_p]:_p,startMillis:0,endMillis:0},_h=(e,t)=>e>t?_m:{[_p]:_p,startMillis:e,endMillis:t},_d=b(2,(e,t)=>_f(e,t)===e),_f=b(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t),_g=b(2,(e,t)=>_h(Math.max(e.startMillis,t.startMillis),Math.min(e.endMillis,t.endMillis))),_b=e=>e.startMillis>=e.endMillis,_x=e=>my(e.endMillis-e.startMillis),_y=e=>_h(e,Number.POSITIVE_INFINITY),_v=Symbol.for("effect/ScheduleIntervals"),__=e=>({[_v]:_v,intervals:e}),_S=b(2,(e,t)=>rg(t.intervals)?rg(e.intervals)?rx(e.intervals).startMillis<rx(t.intervals).startMillis?_w(ry(e.intervals),t.intervals,rx(e.intervals),re()):_w(e.intervals,ry(t.intervals),rx(t.intervals),re()):t:e),_w=(e,t,s,n)=>{let i=e,r=t,a=s,o=n;for(;rg(i)||rg(r);)if(!rg(i)&&rg(r))a.endMillis<rx(r).startMillis?(o=w(o,rm(a)),a=rx(r)):a=_h(a.startMillis,rx(r).endMillis),r=ry(r),i=re();else if(rg(i)&&rf(r))a.endMillis<rx(i).startMillis?(o=w(o,rm(a)),a=rx(i)):a=_h(a.startMillis,rx(i).endMillis),r=re(),i=ry(i);else if(rg(i)&&rg(r))rx(i).startMillis<rx(r).startMillis?(a.endMillis<rx(i).startMillis?(o=w(o,rm(a)),a=rx(i)):a=_h(a.startMillis,rx(i).endMillis),i=ry(i)):(a.endMillis<rx(r).startMillis?(o=w(o,rm(a)),a=rx(r)):a=_h(a.startMillis,rx(r).endMillis),r=ry(r));else throw Error(W("Intervals.unionLoop"));return __(w(o,rm(a),ra))},_k=b(2,(e,t)=>_O(e.intervals,t.intervals,re())),_O=(e,t,s)=>{let n=e,i=t,r=s;for(;rg(n)&&rg(i);){let e=w(rx(n),_g(rx(i))),t=_b(e)?r:w(r,rm(e));w(rx(n),_d(rx(i)))?n=ry(n):i=ry(i),r=t}return __(ra(r))},_E=e=>w(e.intervals,rb,nP(()=>_m)).startMillis,_I=b(2,(e,t)=>_E(e)<_E(t)),_T=b(2,(e,t)=>_I(e,t)?t:e),_R=e=>w(e.intervals,rb,nP(()=>_m)).endMillis,_N=e=>rg(e.intervals),_A="Continue",_F="Done",_j=e=>({_tag:_A,intervals:e}),_M=e=>({_tag:_A,intervals:__(rs(e))}),_C={_tag:_F},_L=e=>e._tag===_A,_U=e=>e._tag===_F,_P=Symbol.for("effect/Schedule"),_$=e=>z(e,_P),_D=Symbol.for("effect/ScheduleDriver"),_z={_Out:e=>e,_In:e=>e,_R:e=>e},_B={_Out:e=>e,_In:e=>e,_R:e=>e};class _q{constructor(e,t){this[_P]=_z,this.initial=e,this.step=t}pipe(){return eI(this,arguments)}}class _J{constructor(e,t){this[_D]=_B,this.schedule=e,this.ref=t}get state(){return ul(g1(this.ref),e=>e[1])}get last(){return c6(g1(this.ref),([e,t])=>{switch(e._tag){case"None":return c1(()=>new pk);case"Some":return ub(e.value)}})}get reset(){return g2(this.ref,[nL(),this.schedule.initial])}next(e){return w(ul(g1(this.ref),e=>e[1]),c6(t=>w(ge,c6(s=>w(ux(()=>this.schedule.step(s,e,t)),c6(([e,t,n])=>{let i=g2(this.ref,[e5(t),e]);if(_U(n))return uj(i,c0(nL()));let r=_E(n.intervals)-s;return r<=0?c$(i,t):w(i,uj(bE(my(r))),c$(t))}))))))}}let _K=(e,t)=>new _q(e,t),_V=b(2,(e,t)=>_G(e,e=>uy(()=>t(e)))),_G=b(2,(e,t)=>_4(e,(e,s)=>ul(t(e),e=>mj(s,mc(e))))),_H=((e,t)=>_K([e.initial,t.initial,!0],(s,n,i)=>i[2]?c6(e.step(s,n,i[0]),([e,r,a])=>_U(a)?ul(t.step(s,n,i[1]),([t,s,n])=>[[e,t,!1],t_(s),n]):ub([[e,i[1],!0],tv(r),a])):ul(t.step(s,n,i[1]),([e,t,s])=>[[i[0],e,!1],t_(t),s])),b(2,(e,t)=>_W(e,(e,s)=>uy(()=>t(e,s))))),_W=b(2,(e,t)=>_K(e.initial,(s,n,i)=>c6(e.step(s,n,i),([e,s,i])=>_U(i)?ub([e,s,_C]):ul(t(n,s),t=>t?[e,s,i]:[e,s,_C])))),_Y=b(2,(e,t)=>_K([e.initial,t.initial],(s,n,i)=>c6(e.step(s,n,i[0]),([e,n,r])=>ul(t.step(s,n,i[1]),([t,s,n])=>_U(r)?[[e,t],s,_C]:_U(n)?[[e,t],s,_C]:[[e,t],s,_j(w(r.intervals,_T(n.intervals)))])))),_Q=((e,t)=>_Q(e,e=>uy(()=>t(e))),b(2,(e,t)=>_K(e.initial,(s,n,i)=>c6(t(n),t=>e.step(s,t,i))))),_X=((e,t)=>_4(e,(e,s)=>t(s)),e=>_V(e,e=>e)),_Z=e=>w(g0([nL(),e.initial]),ul(t=>new _J(e,t))),_0=b(2,(e,t)=>_1(e,t,_k)),_1=b(3,(e,t,s)=>_K([e.initial,t.initial],(n,i,r)=>w(uM(e.step(n,i,r[0]),t.step(n,i,r[1]),(e,t)=>[e,t]),c6(([[n,r,a],[o,l,c]])=>_L(a)&&_L(c)?_2(e,t,i,n,r,a.intervals,o,l,c.intervals,s):ub([[n,o],[r,l],_C]))))),_2=(e,t,s,n,i,r,a,o,l,c)=>{let u=c(r,l);return _N(u)?ub([[n,a],[i,o],_j(u)]):w(r,_I(l))?c6(e.step(_R(r),s,n),([n,i,r])=>_U(r)?ub([[n,a],[i,o],_C]):_2(e,t,s,n,i,r.intervals,a,o,l,c)):c6(t.step(_R(l),s,a),([a,o,l])=>_U(l)?ub([[n,a],[i,o],_C]):_2(e,t,s,n,i,r,a,o,l.intervals,c))},_3=b(2,(e,t)=>_5(e,e=>uy(()=>t(e)))),_5=b(2,(e,t)=>_K(e.initial,(s,n,i)=>c6(e.step(s,n,i),([e,s,n])=>ul(t(s),t=>[e,t,n])))),_4=b(2,(e,t)=>_K(e.initial,(s,n,i)=>c6(e.step(s,n,i),([e,n,i])=>{if(_U(i))return ub([e,n,i]);let r=i.intervals;return ul(t(n,_x(_h(s,_E(r)))),t=>{let i=mc(t),a=_E(r),o=s+mO(i),l=o-a;return[e,n,_M(_h(o,Math.max(0,_R(r)+l)))]})}))),_6=e=>St(Sg,t=>t<e),_8=((e,t,s)=>_K([e.initial,t],(t,n,[i,r])=>c6(e.step(t,n,i),([e,t,n])=>_U(n)?ub([[e,r],r,n]):ul(s(r,t),t=>[[e,t],r,n]))),b(2,(e,t)=>_7(e,t,_S))),_7=b(3,(e,t,s)=>_K([e.initial,t.initial],(n,i,r)=>uM(e.step(n,i,r[0]),t.step(n,i,r[1]),([e,t,n],[i,r,a])=>{if(_U(n)&&_U(a))return[[e,i],[t,r],_C];if(_U(n)&&_L(a))return[[e,i],[t,r],_j(a.intervals)];if(_L(n)&&_U(a))return[[e,i],[t,r],_j(n.intervals)];if(_L(n)&&_L(a))return[[e,i],[t,r],_j(s(n.intervals,a.intervals))];throw Error("BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues")}))),_9=b(2,(e,t)=>_W(e,(e,s)=>bJ(t(e)))),Se=b(2,(e,t)=>_W(e,(e,s)=>t(e))),St=b(2,(e,t)=>_H(e,(e,s)=>t(s))),Ss=((e,t)=>_3(_0(e,t),e=>e[0]),Symbol.for("effect/Schedule/ScheduleDefect"));class Sn{constructor(e){this.error=e,this[Ss]=Ss}}let Si=e=>z(e,Ss),Sr=e=>cK(e,e=>cY(new Sn(e))),Sa=e=>cJ(e,e=>nU(l7(e,e=>lK(e)&&Si(e.defect)?e5(e.defect):nL()),{onNone:()=>c2(e),onSome:e=>c0(e.error)})),So=((e,t)=>So(e,t,(e,t)=>c0(e)),b(3,(e,t,s)=>c6(_Z(t),t=>us(e,{onFailure:e=>s(e,nL()),onSuccess:n=>Sl(e,t,s,n)})))),Sl=(e,t,s,n)=>us(t.next(n),{onFailure:()=>ud(t.last),onSuccess:n=>us(e,{onFailure:e=>s(e,e5(n)),onSuccess:n=>Sl(e,t,s,n)})}),Sc=b(2,(e,t)=>Sp(e,t,(e,t)=>c0(e))),Su=b(2,(e,t)=>{if(_$(t))return Sc(e,t);let s=t.schedule??Sg,n=t.while?Se(s,e=>{let s=t.while(e);return"boolean"==typeof s?ub(s):Sr(s)}):s,i=t.until?_9(n,e=>{let s=t.until(e);return"boolean"==typeof s?ub(s):Sr(s)}):n;return Sa(Sc(e,t.times?_0(i,_6(t.times)):i))}),Sp=b(3,(e,t,s)=>c6(_Z(t),t=>Sm(e,t,s))),Sm=(e,t,s)=>cK(e,n=>us(t.next(n),{onFailure:()=>w(t.last,ud,c6(e=>s(n,e))),onSuccess:()=>Sm(e,t,s)})),Sh=((e,t)=>Sh(e,void 0,t),b(3,(e,t,s)=>c6(_Z(s),s=>Sd(e,t,s)))),Sd=(e,t,s)=>us(s.next(t),{onFailure:()=>ud(s.last),onSuccess:()=>c6(e,t=>Sd(e,t,s))}),Sf=_K(nL(),(e,t,s)=>{switch(s._tag){case"None":return ub([e5(e),mf,_M(_y(e))]);case"Some":return ub([e5(s.value),my(e-s.value),_M(_y(e))])}}),Sg=(u=e=>e+1,_K(0,(e,t,s)=>uy(()=>[u(s),s,_M(_y(e))])));class Sb{constructor(e){this.waiters=new Set,this.taken=0,this.take=e=>cq(t=>{if(this.free<e){let s=()=>{this.free<e||(this.waiters.delete(s),this.taken+=e,t(ub(e)))};return this.waiters.add(s),uy(()=>{this.waiters.delete(s)})}return this.taken+=e,t(ub(e))}),this.updateTaken=e=>cU(t=>(this.taken=e(this.taken),this.waiters.size>0&&t.getFiberRef(g9).scheduleTask(()=>{let e=this.waiters.values(),t=e.next();for(;!1===t.done&&this.free>0;)t.value(),t=e.next()},t.getFiberRef(u4)),ub(this.free))),this.release=e=>this.updateTaken(t=>t-e),this.releaseAll=this.updateTaken(e=>0),this.withPermits=e=>t=>uk(s=>c6(s(this.take(e)),e=>_o(s(t),this.release(e)))),this.permits=e}get free(){return this.permits-this.taken}}let Sx=e=>new Sb(e),Sy=((e,t)=>{let s=mc(t);return c6(p1(),t=>ul(SI(nL()),n=>[p3(Sv(e,s,n),t),S_(n)]))},(e,t,s)=>{let n=mO(mc(t));return w(pK(),uv(t=>uo(e,t)),ul(e=>e5([s+n,e])))}),Sv=(e,t,s)=>uk(n=>w(f9(e=>e.currentTimeMillis),c6(n=>SR(s,s=>{switch(s._tag){case"None":return e5(Sy(e,t,n));case"Some":{let[i]=s.value;return i-n<=0?e5(Sy(e,t,n)):nL()}}})),c6(e=>e1(e)?cQ("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):n(pG(e.value[1]))))),S_=e=>g2(e,nL()),SS=((e,t)=>c6(vn,s=>w(SS(e,s),_o(c6(s.value,t)))),b(2,(e,t)=>uX(_n,e=>e.zip(t))(e))),Sw=((e,{duration:t,onTimeout:s})=>c9(Sw(e,{onTimeout:()=>c1(s),onSuccess:ub,duration:t})),b(2,(e,{duration:t,onSuccess:s,onTimeout:n})=>c4(i=>_r(e,ua(bE(t)),{onSelfWin:(e,t)=>c6(e.await,n=>"Success"===n._tag?c6(e.inheritAll,()=>c$(uL(t,i),s(n.value))):c6(uL(t,i),()=>pM(n.cause))),onOtherWin:(e,t)=>c6(e.await,s=>"Success"===s._tag?c6(e.inheritAll,()=>c$(uL(t,i),n())):c6(uL(t,i),()=>pM(s.cause))),otherScope:xa})))),Sk=Symbol.for("effect/Ref/SynchronizedRef"),SO={_A:e=>e};class SE{static{r=gY}constructor(e,t){this[Sk]=SO,this[r]=gQ,this.ref=e,this.withLock=t,this[gW]=gW,this.get=g1(this.ref)}modify(e){return this.modifyEffect(t=>ub(e(t)))}modifyEffect(e){return this.withLock(w(c6(g1(this.ref),e),c6(([e,t])=>c$(g2(this.ref,t),e))))}pipe(){return eI(this,arguments)}}let SI=e=>uy(()=>ST(e)),ST=e=>new SE(gZ(e),Sx(1).withPermits(1)),SR=b(2,(e,t)=>e.modifyEffect(e=>{let s=t(e);switch(s._tag){case"None":return ub([e,e]);case"Some":return ul(s.value,e=>[e,e])}})),SN=((e,t,s)=>({[xo]:xl,id:()=>w(e.id(),aC(t.id())),await:w(e.await,c9,v2(c9(t.await),s,{concurrent:!0}),cZ),children:e.children,inheritAll:uj(t.inheritAll,e.inheritAll),poll:uM(e.poll,t.poll,(e,t)=>w(e,nV(e=>w(t,nK(t=>pB(e,t,{onSuccess:s,onFailure:lB})))))),interruptAsFork:s=>uj(e.interruptAsFork(s),t.interruptAsFork(s)),pipe(){return eI(this,arguments)}}),e=>(t,s)=>{let n=aJ(),i=[[u5,[[n,e.context]]]];s?.scheduler&&i.push([g9,[[n,s.scheduler]]]);let r=gv(e.fiberRefs,{entries:i,forkAs:n});s?.updateRefs&&(r=s.updateRefs(r,n));let a=new vN(n,r,e.runtimeFlags),o=t;s?.scope&&(o=c6(pg(s.scope,gi),e=>uj(ph(e,c4(e=>ex(e,a.id())?uO:uL(a,e))),up(t,t=>pf(e,t)))));let l=a._supervisor;return l!==vr&&(l.onStart(e.context,o,nL(),a),a.addObserver(e=>l.onEnd(e,a))),xa.add(e.runtimeFlags,a),s?.immediate===!1?a.resume(o):a.start(o),a});class SA extends Error{constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this._tag="AsyncFiberException",this.fiber=e,this.name=this._tag,this.stack=this.message}}let SF=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let s=new SA(e);return Error.stackTraceLimit=t,s},Sj=Symbol.for("effect/Runtime/FiberFailure"),SM=Symbol.for("effect/Runtime/FiberFailure/Cause");class SC extends Error{constructor(e){super(),this[Sj]=Sj,this[SM]=e;let t=ch(e);if(t.length>0){let e=t[0];this.name=e.name,this.message=e.message,this.stack=e.stack}this.name=`(FiberFailure) ${this.name}`,(void 0===this.message||0===this.message.length)&&(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[SM].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[eS](){return this.toString()}}let SL=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let s=new SC(e);return Error.stackTraceLimit=t,s},SU=e=>{switch(e._op){case"Failure":case"Success":return e;case"Left":return pj(e.left);case"Right":return pD(e.right);case"Some":return pD(e.value);case"None":return pj(pk())}},SP=e=>t=>{let s=SU(t);if(s)return s;let n=new g7,i=SN(e)(t,{scheduler:n});n.flush();let r=i.unsafePoll();if(r)return r;throw SF(i)},S$=e=>(t,s)=>new Promise(n=>{let i=SU(t);i&&n(i);let r=SN(e)(t);r.addObserver(e=>{n(e)}),s?.signal!==void 0&&(s.signal.aborted?r.unsafeInterruptAsFork(r.id()):s.signal.addEventListener("abort",()=>{r.unsafeInterruptAsFork(r.id())},{once:!0}))});class SD{constructor(e,t,s){this.context=e,this.runtimeFlags=t,this.fiberRefs=s}pipe(){return eI(this,arguments)}}let Sz=l_(1,32,4),SB=new SD((p={context:tp(),runtimeFlags:Sz,fiberRefs:new gu(new Map)}).context,p.runtimeFlags,p.fiberRefs),Sq=(e,t)=>S$(SB)(e,t).then(e=>{switch(e._tag){case eM:return e.effect_instruction_i0;case eN:throw SL(e.effect_instruction_i0)}}),SJ=e=>{let t=SP(SB)(e);if("Failure"!==t._tag)return t.effect_instruction_i0;throw SL(t.effect_instruction_i0)},SK=b(2,(e,t)=>e.modifyEffect(t)),SV=Symbol.for("effect/Layer"),SG={[SV]:{_RIn:e=>e,_E:e=>e,_ROut:e=>e},pipe(){return eI(this,arguments)}},SH=Symbol.for("effect/Layer/MemoMap"),SW=e=>z(e,SV),SY=e=>"Fresh"===e._tag;class SQ{constructor(e){this.ref=e,this[SH]=SH}getOrElseMemoize(e,t){return w(SK(this.ref,s=>{let n=s.get(e);if(void 0!==n){let[e,i]=n;return ub([w(e,c6(([e,t])=>w(bK(e),c$(t))),up(pP({onFailure:()=>uO,onSuccess:()=>pd(t,i)}))),s])}return w(g0(0),c6(n=>w(pK(),c6(i=>w(g0(()=>uO),ul(r=>{let a=uk(a=>w(v7(),c6(o=>w(a(c6(S0(e,o,!0),e=>bL(e(this)))),cZ,c6(a=>{switch(a._tag){case eN:return w(pY(i,a.effect_instruction_i0),uj(pf(o,a)),uj(c2(a.effect_instruction_i0)));case eM:return w(g2(r,e=>w(pf(o,e),uI(g3(n,e=>[1===e,e-1])),cD)),uj(g5(n,e=>e+1)),uj(pd(t,t=>w(uy(()=>s.delete(e)),uj(g1(r)),c6(e=>e(t))))),uj(pQ(i,a.effect_instruction_i0)),c$(a.effect_instruction_i0[1]))}}))))),o=[w(pG(i),up(p$({onFailure:()=>uO,onSuccess:()=>g5(n,e=>e+1)}))),e=>w(g1(r),c6(t=>t(e)))];return[a,SY(e)?s:s.set(e,o)]}))))))}),c9)}}let SX=ux(()=>ul(SI(new Map),e=>new SQ(e))),SZ=b(2,(e,t)=>c6(SX,s=>c6(S0(e,t),e=>e(s)))),S0=(e,t,s=!1)=>{switch(e._tag){case"Locally":return uy(()=>s=>e.f(s.getOrElseMemoize(e.self,t)));case"ExtendScope":return uy(()=>t=>v0(s=>t.getOrElseMemoize(e.layer,s)));case"Fold":return uy(()=>s=>w(s.getOrElseMemoize(e.layer,t),ut({onFailure:n=>s.getOrElseMemoize(e.failureK(n),t),onSuccess:n=>s.getOrElseMemoize(e.successK(n),t)})));case"Fresh":return uy(()=>s=>w(e.layer,SZ(t)));case"FromEffect":return s?uy(()=>t=>e.effect):uy(()=>s=>s.getOrElseMemoize(e,t));case"Provide":return uy(()=>s=>w(s.getOrElseMemoize(e.first,t),c6(n=>w(s.getOrElseMemoize(e.second,t),p3(n)))));case"Scoped":return s?uy(()=>s=>v9(e.effect,t)):uy(()=>s=>s.getOrElseMemoize(e,t));case"Suspend":return uy(()=>s=>s.getOrElseMemoize(e.evaluate(),t));case"ProvideMerge":return uy(()=>s=>w(s.getOrElseMemoize(e.first,t),uM(s.getOrElseMemoize(e.second,t),e.zipK)));case"ZipWith":return uy(()=>s=>w(s.getOrElseMemoize(e.first,t),v2(s.getOrElseMemoize(e.second,t),e.zipK,{concurrent:!0})))}},S1=e=>S2(l$(e)),S2=e=>S4(c2(e)),S3=b(2,(e,t)=>S8(e,{onFailure:S1,onSuccess:t})),S5=b(2,(e,t)=>{let s=tu(e),n=s?e:t;return S4(ul(s?t:e,e=>ti(n,e)))});function S4(e){let t=Object.create(SG);return t._tag="FromEffect",t.effect=e,t}let S6=b(2,(e,{onFailure:t,onSuccess:s})=>{let n=Object.create(SG);return n._tag="Fold",n.layer=e,n.failureK=t,n.successK=s,n}),S8=b(2,(e,{onFailure:t,onSuccess:s})=>S6(e,{onFailure:e=>{let s=lZ(e);switch(s._tag){case"Left":return t(s.left);case"Right":return S2(s.right)}},onSuccess:s})),S7=b(2,(e,t)=>{let s=tu(e),n=s?e:t;return we(ul(s?t:e,e=>ti(n,e)))}),S9=e=>we(w(e,c$(tp()))),we=e=>{let t=Object.create(SG);return t._tag="Scoped",t.effect=e,t},wt=b(2,(e,t)=>cP(v7(),s=>c6(SZ(t,s),t=>p5(e,t)),(e,t)=>pf(e,t))),ws=b(2,(e,t)=>{let s=gE(SB.fiberRefs,t.fiberRefs),n=lO(SB.runtimeFlags,t.runtimeFlags);return uk(i=>cU(r=>{let a=r.getFiberRef(u5),o=r.getFiberRefs(),l=gT(r.id(),o)(s),c=r._runtimeFlags,u=lE(n)(c),p=gE(l,o),m=lO(u,c);return r.setFiberRefs(l),r._runtimeFlags=u,_o(p5(i(e),tl(a,t.context)),cU(e=>(e.setFiberRefs(gT(e.id(),e.getFiberRefs())(p)),e._runtimeFlags=lE(m)(e._runtimeFlags),uO)))}))}),wn=b(2,(e,t)=>SW(t)?wt(e,t):ts(t)?p5(e,t):ws(e,t)),wi=Symbol.for("effect/MutableList"),wr={[wi]:wi,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(null==t)return e=!0,this.return();let s=t.value;return t=t.next,{done:e,value:s}},return:t=>(e||(e=!0),{done:!0,value:t})}},toString(){return ek(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(ew)}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},wa=e=>({value:e,removed:!1,prev:void 0,next:void 0}),wo=()=>{let e=Object.create(wr);return e.head=void 0,e.tail=void 0,e._length=0,e},wl=e=>0===wc(e),wc=e=>e._length,wu=b(2,(e,t)=>{let s=wa(t);return void 0===e.head&&(e.head=s),void 0===e.tail||(e.tail.next=s,s.prev=e.tail),e.tail=s,e._length+=1,e}),wp=e=>{let t=e.head;if(void 0!==t)return wm(e,t),t.value},wm=(e,t)=>{!t.removed&&(t.removed=!0,void 0!==t.prev&&void 0!==t.next?(t.prev.next=t.next,t.next.prev=t.prev):void 0!==t.prev?(e.tail=t.prev,t.prev.next=void 0):void 0!==t.next?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},wh=Symbol.for("effect/MutableQueue"),wd=Symbol.for("effect/mutable/MutableQueue/Empty"),wf={[wh]:wh,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return ek(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(ew)}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},wg=e=>{let t=Object.create(wf);return t.queue=wo(),t.capacity=e,t},wb=()=>wg(void 0),wx=b(2,(e,t)=>{let s=wc(e.queue);return(void 0===e.capacity||s!==e.capacity)&&(wu(t)(e.queue),!0)}),wy=b(2,(e,t)=>wl(e.queue)?t:wp(e.queue)),wv=(e,t,s,n)=>or({_tag:"Complete",key:e,exit:t,entryStats:s,timeToLiveMillis:n}),w_=(e,t)=>or({_tag:"Pending",key:e,deferred:t}),wS=(e,t)=>or({_tag:"Refreshing",deferred:e,complete:t}),ww=Symbol.for("effect/Cache/MapKey");class wk{constructor(e){this[ww]=ww,this.previous=void 0,this.next=void 0,this.current=e}[er](){return w(ea(this.current),el(ea(this.previous)),el(ea(this.next)),eg(this))}[eb](e){return this===e||wE(e)&&ex(this.current,e.current)&&ex(this.previous,e.previous)&&ex(this.next,e.next)}}let wO=e=>new wk(e),wE=e=>z(e,ww);class wI{add(e){if(e!==this.tail){if(void 0===this.tail)this.head=e,this.tail=e;else{let t=e.previous,s=e.next;void 0!==s&&(e.next=void 0,void 0!==t?(t.next=s,s.previous=t):(this.head=s,this.head.previous=void 0)),this.tail.next=e,e.previous=this.tail,this.tail=e}}}remove(){let e=this.head;if(void 0!==e){let t=e.next;void 0!==t?(e.next=void 0,this.head=t,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return e}constructor(){this.head=void 0,this.tail=void 0}}let wT=()=>new wI,wR=(e,t,s,n,i,r)=>({map:e,keys:t,accesses:s,updating:n,hits:i,misses:r}),wN=()=>wR(x2(),wT(),wb(),ax(!1),0,0),wA=Symbol.for("effect/Cache"),wF={_Key:e=>e,_Error:e=>e,_Value:e=>e},wj=e=>e,wM=e=>({loadedMillis:e});class wC{constructor(e,t,s,n,i){this[wA]=wF,this.capacity=e,this.context=t,this.fiberId=s,this.lookup=n,this.timeToLive=i,this.cacheState=wN()}get(e){return ul(this.getEither(e),tw)}get cacheStats(){return uy(()=>wj({hits:this.cacheState.hits,misses:this.cacheState.misses,size:x9(this.cacheState.map)}))}getOption(e){return ux(()=>nU(x3(this.cacheState.map,e),{onNone:()=>{let t=wO(e);return this.trackAccess(t),this.trackMiss(),ub(nL())},onSome:e=>this.resolveMapValue(e)}))}getOptionComplete(e){return ux(()=>nU(x3(this.cacheState.map,e),{onNone:()=>{let t=wO(e);return this.trackAccess(t),this.trackMiss(),ub(nL())},onSome:e=>this.resolveMapValue(e,!0)}))}contains(e){return uy(()=>x4(this.cacheState.map,e))}entryStats(e){return uy(()=>{let t=x3(this.cacheState.map,e);if(e2(t))switch(t.value._tag){case"Complete":return e5(wM(t.value.entryStats.loadedMillis));case"Pending":break;case"Refreshing":return e5(wM(t.value.complete.entryStats.loadedMillis))}return nL()})}getEither(e){return ux(()=>{let t,s;let n=nB(x3(this.cacheState.map,e));return(void 0===n&&(s=pJ(this.fiberId),t=wO(e),x4(this.cacheState.map,e)?n=nB(x3(this.cacheState.map,e)):x6(this.cacheState.map,e,w_(t,s))),void 0===n)?(this.trackAccess(t),this.trackMiss(),ul(this.lookupValueOf(e,s),t_)):c6(this.resolveMapValue(n),nU({onNone:()=>this.getEither(e),onSome:e=>ub(tv(e))}))})}invalidate(e){return uy(()=>{x7(this.cacheState.map,e)})}invalidateWhen(e,t){return uy(()=>{let s=x3(this.cacheState.map,e);e2(s)&&"Complete"===s.value._tag&&"Success"===s.value.exit._tag&&t(s.value.exit.value)&&x7(this.cacheState.map,e)})}get invalidateAll(){return uy(()=>{this.cacheState.map=x2()})}refresh(e){return f9(t=>ux(()=>{let s=pJ(this.fiberId),n=nB(x3(this.cacheState.map,e));if(void 0===n&&(x4(this.cacheState.map,e)?n=nB(x3(this.cacheState.map,e)):x6(this.cacheState.map,e,w_(wO(e),s))),void 0===n)return cD(this.lookupValueOf(e,s));switch(n._tag){case"Complete":if(this.hasExpired(t,n.timeToLiveMillis))return ex(nB(x3(this.cacheState.map,e)),n)&&x7(this.cacheState.map,e),cD(this.get(e));return w(this.lookupValueOf(e,s),bX(()=>{if(ex(nB(x3(this.cacheState.map,e)),n)){let t=wS(s,n);return x6(this.cacheState.map,e,t),!0}return!1}),cD);case"Pending":case"Refreshing":return pG(n.deferred)}}))}set(e,t){return f9(s=>uy(()=>{let n=s.unsafeCurrentTimeMillis(),i=pD(t),r=wv(wO(e),i,wM(n),n+mO(mc(this.timeToLive(i))));x6(this.cacheState.map,e,r)}))}get size(){return uy(()=>x9(this.cacheState.map))}get values(){return uy(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[1].exit.value);return e})}get entries(){return uy(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push([t[0],t[1].exit.value]);return e})}get keys(){return uy(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[0]);return e})}resolveMapValue(e,t=!1){return f9(s=>{switch(e._tag){case"Complete":if(this.trackAccess(e.key),this.hasExpired(s,e.timeToLiveMillis))return x7(this.cacheState.map,e.key.current),ub(nL());return this.trackHit(),ul(e.exit,e5);case"Pending":if(this.trackAccess(e.key),this.trackHit(),t)return ub(nL());return ul(pG(e.deferred),e5);case"Refreshing":if(this.trackAccess(e.complete.key),this.trackHit(),this.hasExpired(s,e.complete.timeToLiveMillis)){if(t)return ub(nL());return ul(pG(e.deferred),e5)}return ul(e.complete.exit,e5)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(e){if(wx(this.cacheState.accesses,e),ay(this.cacheState.updating,!1,!0)){let e=!0;for(;e;){let t=wy(this.cacheState.accesses,wd);t===wd?e=!1:this.cacheState.keys.add(t)}let t=x9(this.cacheState.map);for(e=t>this.capacity;e;){let s=this.cacheState.keys.remove();void 0!==s?x4(this.cacheState.map,s.current)&&(x7(this.cacheState.map,s.current),t-=1,e=t>this.capacity):e=!1}a_(this.cacheState.updating,!1)}}hasExpired(e,t){return e.unsafeCurrentTimeMillis()>t}lookupValueOf(e,t){return f9(s=>ux(()=>w(this.lookup(e),p3(this.context),cZ,c6(n=>{let i=s.unsafeCurrentTimeMillis(),r=wM(i),a=wv(wO(e),n,r,i+mO(mc(this.timeToLive(n))));return x6(this.cacheState.map,e,a),uj(pW(t,n),n)}),um(()=>uj(gt(t),uy(()=>{x7(this.cacheState.map,e)}))))))}}let wL=(e,t,s)=>new wC(e,tp(),aA,t,e=>mc(s(e))),wU=(()=>uZ(wL(65536,()=>ul(pK(),e=>({listeners:new y4,handle:e})),()=>mv(60))),function(){let e;return e=1==arguments.length?arguments[0]:arguments[1].bind(arguments[0]),ux(()=>{let t=e(w),s=en(()=>t.next()),n=e=>e.done?ub(e.value):c6(et(e.value),e=>n(en(()=>t.next(e))));return n(s)})}),wP=function(){let e="string"!=typeof arguments[0],t=e?arguments[1]:arguments[0],s=cO(e?arguments[2]:arguments[1]);if(e){let e=arguments[0];return b2(t,s,t=>b3(e,t))}return e=>b2(t,s,t=>b3(e,t))},w$=(e,t=[])=>({value:e,forest:t}),wD=e=>ul(w6(e),e=>wB(e)),wz=e=>SJ(wD(e)),wB=e=>e.value+wq("\n",e.forest),wq=(e,t)=>{let s,n="",i=t.length;for(let r=0;r<i;r++){s=t[r];let a=r===i-1;n+=e+(a?"└":"├")+"─ "+s.value+wq(e+(i>1&&!a?"│  ":"   "),s.forest)}return n},wJ=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},wK=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},wV=e=>"ast"in e?e5(e.ast):nL(),wG=e=>wV(e).pipe(nV(hC),c6(t=>{let s=t(e);return R(s)?ub({message:s,override:!1}):cL(s)?ul(s,e=>({message:e,override:!1})):R(s.message)?ub({message:s.message,override:s.override}):ul(s.message,e=>({message:e,override:s.override}))})),wH=e=>t=>t._tag===e,wW=wH("Composite"),wY=wH("Refinement"),wQ=wH("Transformation"),wX=e=>wG(e).pipe(c6(t=>!t.override&&(wW(e)||wY(e)&&"From"===e.kind||wQ(e)&&"Transformation"!==e.kind)?wQ(e)||wY(e)?wX(e.issue):nL():ub(t.message))),wZ=e=>wV(e).pipe(nV(hB),nG(t=>nz(t(e)))),w0=e=>wX(e).pipe(uh(()=>wZ(e)),cK(()=>ub(e.message??`Expected ${String(e.ast)}, actual ${hs(e.actual)}`))),w1=e=>nP(wZ(e),()=>String(e.ast)),w2=e=>e.message??"is forbidden",w3=e=>e.message??"is unexpected",w5=e=>hL(e.ast).pipe(c6(e=>{let t=e();return R(t)?ub(t):t}),cK(()=>ub(e.message??"is missing"))),w4=(e,t)=>us(wX(e),{onFailure:t,onSuccess:e=>ub(w$(e))}),w6=e=>{switch(e._tag){case"Type":return ul(w0(e),w$);case"Forbidden":return ub(w$(w1(e),[w$(w2(e))]));case"Unexpected":return ub(w$(w3(e)));case"Missing":return ul(w5(e),w$);case"Transformation":return w4(e,()=>ul(w6(e.issue),t=>w$(w1(e),[w$(wJ(e.kind),[t])])));case"Refinement":return w4(e,()=>ul(w6(e.issue),t=>w$(w1(e),[w$(wK(e.kind),[t])])));case"Pointer":return ul(w6(e.issue),t=>w$(ho(e.path),[t]));case"Composite":{let t=w1(e);return w4(e,()=>hi(e.issues)?ul(vB(e.issues,w6),e=>w$(t,e)):ul(w6(e.issues),e=>w$(t,[e])))}}};class w8{constructor(e,t,s){this._tag="Pointer",this.path=e,this.actual=t,this.issue=s}}class w7{constructor(e,t){this._tag="Unexpected",this.actual=e,this.message=t}}class w9{constructor(e,t){this._tag="Missing",this.actual=void 0,this.ast=e,this.message=t}}class ke{constructor(e,t,s,n){this._tag="Composite",this.ast=e,this.actual=t,this.issues=s,this.output=n}}class kt{constructor(e,t,s,n){this._tag="Refinement",this.ast=e,this.actual=t,this.kind=s,this.issue=n}}class ks{constructor(e,t,s,n){this._tag="Transformation",this.ast=e,this.actual=t,this.kind=s,this.issue=n}}class kn{constructor(e,t,s){this._tag="Type",this.ast=e,this.actual=t,this.message=s}}class ki{constructor(e,t,s){this._tag="Forbidden",this.ast=e,this.actual=t,this.message=s}}let kr=Symbol.for("@effect/schema/ParseErrorTypeId");class ka extends me("ParseError"){get message(){return this.toString()}toString(){return wz(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[eS](){return this.toJSON()}constructor(...e){super(...e),this[kr]=kr}}let ko=e=>new ka({issue:e}),kl=t_,kc=tv,ku=tS,kp=b(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?t(e.right):c6(e,t)),km=b(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?t_(t(e.right)):ul(e,t)),kh=b(2,(e,t)=>"Left"===e._tag?tv(t(e.left)):"Right"===e._tag?e:uu(e,t)),kd=e=>{if("Left"===e._tag||"Right"===e._tag)return e},kf=b(2,(e,t)=>"Left"===e._tag?tv(t.onFailure(e.left)):"Right"===e._tag?t_(t.onSuccess(e.right)):uc(e,t)),kg=(e,t)=>void 0===t||N(t)?e:void 0===e?t:{...e,...t},kb=(e,t,s)=>{let n=kE(e,t);return(e,t)=>n(e,kg(s,t))},kx=(e,t,s)=>{let n=kb(e,t,s);return(e,t)=>tk(n(e,t),ko)},ky=(e,t,s)=>{let n=kE(e,t);return(e,t)=>n(e,{...kg(s,t),isEffectAllowed:!0})},kv=(e,t)=>ky(e.ast,!0,t),k_=(e,t)=>ky(e.ast,!1,t),kS=(e,t)=>kx(d0(e.ast),!0,t),kw=(e,t)=>{let s=kE(d0(e.ast),!0);return(e,n)=>ty(s(e,{exact:!0,...kg(t,n)}))},kk=I(Symbol.for("@effect/schema/Parser/decodeMemoMap"),()=>new WeakMap),kO=I(Symbol.for("@effect/schema/Parser/encodeMemoMap"),()=>new WeakMap),kE=(e,t)=>{let s=t?kk:kO,n=s.get(e);if(n)return n;let i=kR(e,t),r=hq(e),a=e2(r)?(e,t)=>i(e,kg(t,r.value)):i;return s.set(e,a),a},kI=e=>nB(hD(e)),kT=e=>nB(hz(e)),kR=(e,t)=>{switch(e._tag){case"Refinement":if(t){let t=kE(e.from,!0);return(s,n)=>kM(kp(kh(t(s,n),t=>new kt(e,s,"From",t)),t=>nU(e.filter(t,n??dz,e),{onNone:()=>t_(t),onSome:t=>tv(new kt(e,s,"Predicate",t))})),e,s,n)}{let t=kE(d0(e),!0),s=kE(kj(e.from),!1);return(n,i)=>kM(kp(t(n,i),e=>s(e,i)),e,n,i)}case"Transformation":{let s=kU(e.transformation,t),n=t?kE(e.from,!0):kE(e.to,!1),i=t?kE(e.to,!0):kE(e.from,!1);return(r,a)=>kM(kp(kh(n(r,a),s=>new ks(e,r,t?"Encoded":"Type",s)),n=>kp(kh(s(n,a??dz,e),t=>new ks(e,r,"Transformation",t)),s=>kh(i(s,a),s=>new ks(e,r,t?"Type":"Encoded",s)))),e,r,a)}case"Declaration":{let s=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(t,n)=>kM(s(t,n??dz,e),e,t,n)}case"Literal":return kN(e,t=>t===e.literal);case"UniqueSymbol":return kN(e,t=>t===e.symbol);case"UndefinedKeyword":case"VoidKeyword":return kN(e,C);case"NeverKeyword":return kN(e,P);case"UnknownKeyword":case"AnyKeyword":return t_;case"StringKeyword":return kN(e,R);case"NumberKeyword":return kN(e,N);case"BooleanKeyword":return kN(e,A);case"BigIntKeyword":return kN(e,F);case"SymbolKeyword":return kN(e,j);case"ObjectKeyword":return kN(e,D);case"Enums":return kN(e,t=>e.enums.some(([e,s])=>s===t));case"TemplateLiteral":{let t=dY(e);return kN(e,e=>R(e)&&t.test(e))}case"TupleType":{let s=e.elements.map(e=>kE(e.type,t)),n=e.rest.map(e=>kE(e.type,t)),i=e.elements.filter(e=>!e.isOptional);e.rest.length>0&&(i=i.concat(e.rest.slice(1)));let r=i.length,a=e.elements.length>0?e.elements.map((e,t)=>t).join(" | "):"never",o=kI(e),l=kT(e);return(t,c)=>{let u;if(!n9(t))return tv(new kn(e,t));let p=c?.errors==="all",m=[],h=0,d=[],f=t.length;for(let s=f;s<=r-1;s++){let n=new w8(s,t,new w9(i[s-f]));if(!p)return tv(new ke(e,t,n,d));m.push([h++,n])}if(0===e.rest.length)for(let s=e.elements.length;s<=f-1;s++){let n=new w8(s,t,new w7(t[s],`is unexpected, expected: ${a}`));if(!p)return tv(new ke(e,t,n,d));m.push([h++,n])}let g=0;for(;g<s.length;g++)if(f<g+1){if(e.elements[g].isOptional)continue}else{let n=(0,s[g])(t[g],c),i=kd(n);if(i){if(tx(i)){let s=new w8(g,t,i.left);if(!p)return tv(new ke(e,t,s,kL(d)));m.push([h++,s]);continue}d.push([h++,i.right])}else{let s=h++,i=g;u||(u=[]),u.push(({es:r,output:a})=>c6(cX(n),n=>{if(tx(n)){let o=new w8(i,t,n.left);return p?(r.push([s,o]),uO):tv(new ke(e,t,o,kL(a)))}return a.push([s,n.right]),uO}))}}if(it(n)){let[s,...i]=n;for(;g<f-i.length;g++){let n=s(t[g],c),i=kd(n);if(i){if(tx(i)){let s=new w8(g,t,i.left);if(!p)return tv(new ke(e,t,s,kL(d)));m.push([h++,s]);continue}d.push([h++,i.right])}else{let s=h++,i=g;u||(u=[]),u.push(({es:r,output:a})=>c6(cX(n),n=>{if(!tx(n))return a.push([s,n.right]),uO;{let o=new w8(i,t,n.left);return p?(r.push([s,o]),uO):tv(new ke(e,t,o,kL(a)))}}))}}for(let s=0;s<i.length;s++)if(!(f<(g+=s)+1)){let n=i[s](t[g],c),r=kd(n);if(r){if(tx(r)){let s=new w8(g,t,r.left);if(!p)return tv(new ke(e,t,s,kL(d)));m.push([h++,s]);continue}d.push([h++,r.right])}else{let s=h++,i=g;u||(u=[]),u.push(({es:r,output:a})=>c6(cX(n),n=>{if(tx(n)){let o=new w8(i,t,n.left);return p?(r.push([s,o]),uO):tv(new ke(e,t,o,kL(a)))}return a.push([s,n.right]),uO}))}}}let b=({es:s,output:n})=>nC(s)?tv(new ke(e,t,kL(s),kL(n))):t_(kL(n));if(u&&u.length>0){let e=u;return ux(()=>{let t={es:iw(m),output:iw(d)};return c6(vB(e,e=>e(t),{concurrency:o,batching:l,discard:!0}),()=>b(t))})}return b({output:d,es:m})}}case"TypeLiteral":{if(0===e.propertySignatures.length&&0===e.indexSignatures.length)return kN(e,J);let s=[],n={},i=[];for(let r of e.propertySignatures)s.push([kE(r.type,t),r]),n[r.name]=null,i.push(r.name);let r=e.indexSignatures.map(e=>[kE(e.parameter,t),kE(e.type,t),e.parameter]),a=dj.make(e.indexSignatures.map(e=>e.parameter).concat(i.map(e=>j(e)?new hZ(e):new hY(e)))),o=kE(a,t),l=kI(e),c=kT(e);return(t,u)=>{let p,m;if(!G(t))return tv(new kn(e,t));let h=u?.errors==="all",d=[],f=0,g=u?.onExcessProperty==="error",b=u?.onExcessProperty==="preserve",x={};if(g||b){for(let s of p=he(t))if(tx(kd(o(s,u)))){if(g){let n=new w8(s,t,new w7(t[s],`is unexpected, expected: ${String(a)}`));if(!h)return tv(new ke(e,t,n,x));d.push([f++,n]);continue}x[s]=t[s]}}let y=u?.exact===!0;for(let n=0;n<s.length;n++){let i=s[n][1],r=i.name,a=Object.prototype.hasOwnProperty.call(t,r);if(!a){if(i.isOptional)continue;if(y){let s=new w8(r,t,new w9(i));if(!h)return tv(new ke(e,t,s,x));d.push([f++,s]);continue}}let o=(0,s[n][0])(t[r],u),l=kd(o);if(l){if(tx(l)){let s=new w8(r,t,a?l.left:new w9(i));if(!h)return tv(new ke(e,t,s,x));d.push([f++,s]);continue}x[r]=l.right}else{let s=f++;m||(m=[]),m.push(({es:n,output:l})=>c6(cX(o),o=>{if(tx(o)){let c=new w8(r,t,a?o.left:new w9(i));return h?(n.push([s,c]),uO):tv(new ke(e,t,c,l))}return l[r]=o.right,uO}))}}for(let s=0;s<r.length;s++){let i=r[s],a=i[0],o=i[1];for(let s of m9(t,i[2])){let i=kd(a(s,u));if(i&&ty(i)){let i=o(t[s],u),r=kd(i);if(r){if(tx(r)){let n=new w8(s,t,r.left);if(!h)return tv(new ke(e,t,n,x));d.push([f++,n]);continue}Object.prototype.hasOwnProperty.call(n,s)||(x[s]=r.right)}else{let r=f++,a=s;m||(m=[]),m.push(({es:o,output:l})=>c6(cX(i),i=>{if(!tx(i))return Object.prototype.hasOwnProperty.call(n,s)||(l[s]=i.right),uO;{let s=new w8(a,t,i.left);return h?(o.push([r,s]),uO):tv(new ke(e,t,s,l))}}))}}}}let v=({es:s,output:n})=>{if(nC(s))return tv(new ke(e,t,kL(s),n));if(u?.propertyOrder==="original"){let e=p||he(t);for(let t of i)-1===e.indexOf(t)&&e.push(t);let s={};for(let t of e)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t]);return t_(s)}return t_(n)};if(m&&m.length>0){let e=m;return ux(()=>{let t={es:iw(d),output:Object.assign({},x)};return c6(vB(e,e=>e(t),{concurrency:l,batching:c,discard:!0}),()=>v(t))})}return v({es:d,output:x})}}case"Union":{let s=kF(e.types,t),n=he(s.keys),i=n.length,r=new Map;for(let s=0;s<e.types.length;s++)r.set(e.types[s],kE(e.types[s],t));let a=kI(e)??1,o=kT(e);return(t,l)=>{let c;let u=[],p=0,m=[];if(i>0){if(G(t))for(let e=0;e<i;e++){let i=n[e],r=s.keys[i].buckets;if(Object.prototype.hasOwnProperty.call(t,i)){let e=String(t[i]);if(Object.prototype.hasOwnProperty.call(r,e))m=m.concat(r[e]);else{let e=dj.make(s.keys[i].literals);u.push([p++,new ke(new dk([new d_(i,e,!1,!0)],[]),t,new w8(i,t,new kn(e,t[i])))])}}else{let e=dj.make(s.keys[i].literals),n=new d_(i,e,!1,!0);u.push([p++,new ke(new dk([n],[]),t,new w8(i,t,new w9(n)))])}}else u.push([p++,new kn(e,t)])}s.otherwise.length>0&&(m=m.concat(s.otherwise));for(let e=0;e<m.length;e++){let s=m[e],n=r.get(s)(t,l),i=c&&0!==c.length?void 0:kd(n);if(i){if(ty(i))return t_(i.right);u.push([p++,i.left])}else{let e=p++;c||(c=[]),c.push(t=>ux(()=>"finalResult"in t?uO:c6(cX(n),s=>(ty(s)?t.finalResult=t_(s.right):t.es.push([e,s.left]),uO))))}}let h=s=>nC(s)?1===s.length&&"Type"===s[0][1]._tag?tv(s[0][1]):tv(new ke(e,t,kL(s))):tv(new kn(e,t));if(c&&c.length>0){let e=c;return ux(()=>{let t={es:iw(u)};return c6(vB(e,e=>e(t),{concurrency:a,batching:o,discard:!0}),()=>"finalResult"in t?t.finalResult:h(t.es))})}return h(u)}}case"Suspend":{let s=ht(()=>kE(dW(e.f(),e.annotations),t));return(e,t)=>s()(e,t)}}},kN=(e,t)=>s=>t(s)?t_(s):tv(new kn(e,s)),kA=(e,t)=>{switch(e._tag){case"Declaration":{let s=hJ(e);if(e2(s))return kA(s.value,t);break}case"TypeLiteral":{let s=[];for(let n=0;n<e.propertySignatures.length;n++){let i=e.propertySignatures[n],r=t?d4(i.type):d0(i.type);hQ(r)&&!i.isOptional&&s.push([i.name,r])}return s}case"Refinement":return kA(e.from,t);case"Suspend":return kA(e.f(),t);case"Transformation":return kA(t?e.from:e.to,t)}return[]},kF=(e,t)=>{let s={},n=[];for(let i=0;i<e.length;i++){let r=e[i],a=kA(r,t);if(a.length>0)for(let e=0;e<a.length;e++){let[t,n]=a[e],i=String(n.literal);s[t]=s[t]||{buckets:{},literals:[]};let o=s[t].buckets;if(Object.prototype.hasOwnProperty.call(o,i)){if(e<a.length-1)continue;o[i].push(r),s[t].literals.push(n)}else{o[i]=[r],s[t].literals.push(n);break}}else n.push(r)}return{keys:s,otherwise:n}},kj=e=>dD(e)?kj(e.from):e,kM=(e,t,s,n)=>{let i=kd(e);if(i)return i;if(n?.isEffectAllowed===!0)return e;try{return SJ(cX(e))}catch(e){return tv(new ki(t,s,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))}},kC=([e],[t])=>e>t?1:e<t?-1:0;function kL(e){return e.sort(kC).map(e=>e[1])}let kU=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return t_;case"TypeLiteralTransformation":return s=>{let n=t_(s);for(let s of e.propertySignatureTransformations){let[e,i]=t?[s.from,s.to]:[s.to,s.from],r=t?s.decode:s.encode;n=km(n,t=>{let s=r(Object.prototype.hasOwnProperty.call(t,e)?e5(t[e]):nL());return delete t[e],e2(s)&&(t[i]=s.value),t})}return n}}},kP=Symbol.for("@effect/schema/PrettyHookId"),k$=hM(kP),kD=Symbol.for("@effect/schema/Schema"),kz=e=>class{static{this[kD]=kB}static{this.ast=e}static annotations(e){return kz(kJ(this.ast,e))}static pipe(){return eI(this,arguments)}static toString(){return String(e)}constructor(){this[kD]=kB}},kB={_A:e=>e,_I:e=>e,_R:e=>e},kq=e=>{if(!e)return{};let t={};for(let s of Object.getOwnPropertySymbols(e))t[s]=e[s];if(void 0!==e.typeId){let s=e.typeId;"object"==typeof s?(t[hx]=s.id,t[s.id]=s.annotation):t[hx]=s}let s=(s,n)=>{void 0!==e[s]&&(t[n]=e[s])};return s("message",hy),s("missingMessage",hv),s("identifier",h_),s("title",hS),s("description",hw),s("examples",hk),s("default",hO),s("documentation",hI),s("jsonSchema",hE),s("arbitrary",mH),s("pretty",kP),s("equivalence",fr),s("concurrency",hT),s("batching",hR),s("parseIssueTitle",hN),s("parseOptions",hA),t},kJ=(e,t)=>dW(e,kq(t)),kK=e=>String(e.ast),kV=e=>kz(d4(e.ast)),kG=e=>kz(d0(e.ast)),kH=(e,t)=>{let s=kv(e,t);return(e,t)=>kh(s(e,t),ko)},kW=e=>z(e,kD)&&D(e[kD]),kY=e=>dC(e)?dj.make(dM(e,e=>new hY(e))):new hY(e[0]),kQ=(e,t=kY(e))=>class extends kz(t){static annotations(e){return kQ(this.literals,kJ(this.ast,e))}static{this.literals=[...e]}};function kX(...e){return it(e)?kQ(e):k6}let kZ=e=>{switch(e._tag){case"Literal":return[String(e.literal)];case"NumberKeyword":case"StringKeyword":return[new AST.TemplateLiteral("",[new AST.TemplateLiteralSpan(e,"")])];case"Union":return array_.flatMap(e.types,kZ)}throw Error(errors_.getSchemaUnsupportedLiteralSpanErrorMessage(e))},k0=(e,t,s)=>kz(new hH(e.map(e=>e.ast),(...e)=>t.decode(...e.map(kz)),(...e)=>t.encode(...e.map(kz)),kq(s))),k1=(e,t)=>{let s=()=>(t,s,n)=>e(t)?kl(t):kc(new kn(n,t));return kz(new hH([],s,s,kq(t)))},k2=function(){if(Array.isArray(arguments[0])){let e=arguments[0],t=arguments[1],s=arguments[2];return k0(e,t,s)}let e=arguments[0],t=arguments[1];return k1(e,t)};class k3 extends kz(h1){static{this.annotations=super.annotations}}class k5 extends kz(h3){static{this.annotations=super.annotations}}class k4 extends kz(hX){static{this.annotations=super.annotations}}class k6 extends kz(h4){static{this.annotations=super.annotations}}class k8 extends kz(h8){static{this.annotations=super.annotations}}class k7 extends kz(h9){static{this.annotations=super.annotations}}class k9 extends kz(du){static{this.annotations=super.annotations}}class Oe extends kz(dm){static{this.annotations=super.annotations}}class Ot extends kz(dt){static{this.annotations=super.annotations}}class Os extends kz(di){static{this.annotations=super.annotations}}class On extends kz(dl){static{this.annotations=super.annotations}}class Oi extends kz(df){static{this.annotations=super.annotations}}let Or=e=>dj.members(e.map(e=>e.ast)),Oa=(e,t=Or(e))=>class extends kz(t){static annotations(e){return Oa(this.members,kJ(this.ast,e))}static{this.members=[...e]}};function Oo(...e){return dC(e)?Oa(e):it(e)?e[0]:k6}let Ol=e=>Oo(e,k4),Oc=e=>Oo(e,k3),Ou=e=>Oo(e,k4,k3),Op=(e,t)=>new dy(e.map(e=>kW(e)?new db(e.ast,!1):e.ast),t.map(e=>kW(e)?new dg(e.ast):e.ast),!0),Om=(e,t,s=Op(e,t))=>class extends kz(s){static annotations(e){return Om(this.elements,this.rest,kJ(this.ast,e))}static{this.elements=[...e]}static{this.rest=[...t]}},Oh=(e,t)=>class extends Om([],[e],t){static annotations(e){return Oh(this.value,kJ(this.ast,e))}static{this.value=e}},Od=e=>Oh(e),Of=e=>e?'"?:"':'":"';class Og extends db{constructor(e,t,s,n,i){super(e,t,n),this._tag="PropertySignatureDeclaration",this.isReadonly=s,this.defaultValue=i}toString(){let e=Of(this.isOptional),t=String(this.type);return`PropertySignature<${e}, ${t}, never, ${e}, ${t}>`}}class Ob extends db{constructor(e,t,s,n,i){super(e,t,n),this.isReadonly=s,this.fromKey=i}}class Ox extends db{constructor(e,t,s,n,i){super(e,t,n),this.isReadonly=s,this.defaultValue=i}}let Oy=e=>void 0===e?"never":R(e)?JSON.stringify(e):String(e);class Ov{constructor(e,t,s,n){this._tag="PropertySignatureTransformation",this.from=e,this.to=t,this.decode=s,this.encode=n}toString(){return`PropertySignature<${Of(this.to.isOptional)}, ${this.to.type}, ${Oy(this.from.fromKey)}, ${Of(this.from.isOptional)}, ${this.from.type}>`}}let O_=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new Og(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new Ov(new Ob(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new Ox(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},OS=Symbol.for("@effect/schema/PropertySignature");class Ow{constructor(e){this[OS]=null,this.ast=e}pipe(){return eI(this,arguments)}annotations(e){return new Ow(O_(this.ast,kq(e)))}toString(){return String(this.ast)}}let Ok=e=>new Ow(e);class OO extends Ow{constructor(e,t){super(e),this.from=t}annotations(e){return new OO(O_(this.ast,kq(e)),this.from)}}let OE=b(2,(e,t)=>{let s=e.ast;switch(s._tag){case"PropertySignatureDeclaration":return Ok(new Og(s.type,s.isOptional,s.isReadonly,s.annotations,t));case"PropertySignatureTransformation":return Ok(new Ov(s.from,new Ox(s.to.type,s.to.isOptional,s.to.isReadonly,s.to.annotations,t),s.decode,s.encode))}}),OI=(e,t,s)=>Ok(new Ov(new Ob(e.ast,!0,!0,{},void 0),new Ox(t.ast,!1,!0,{},void 0),e=>e5(s.decode(e)),nV(s.encode))),OT=(e,t,s)=>Ok(new Ov(new Ob(e.ast,!0,!0,{},void 0),new Ox(t.ast,!0,!0,{},void 0),s.decode,s.encode)),OR=(e,t)=>{let s=t?.exact,n=t?.default,i=t?.nullable,r=t?.as=="Option",a=t?.onNoneEncoding?n$(t.onNoneEncoding):x;return s?n?i?OE(OI(Ol(e),kG(e),{decode:nU({onNone:n,onSome:e=>null===e?n():e}),encode:e5}),n).ast:OE(OI(e,kG(e),{decode:nU({onNone:n,onSome:x}),encode:e5}),n).ast:r?i?OI(Ol(e),Ii(kG(e)),{decode:nH(U),encode:a}).ast:OI(e,Ii(kG(e)),{decode:x,encode:x}).ast:i?OT(Ol(e),kG(e),{decode:nH(U),encode:x}).ast:new Og(e.ast,!0,!0,{},void 0):n?i?OE(OI(Ou(e),kG(e),{decode:nU({onNone:n,onSome:e=>null==e?n():e}),encode:e5}),n).ast:OE(OI(Oc(e),kG(e),{decode:nU({onNone:n,onSome:e=>void 0===e?n():e}),encode:e5}),n).ast:r?i?OI(Ou(e),Ii(kG(e)),{decode:nH(e=>null!=e),encode:a}).ast:OI(Oc(e),Ii(kG(e)),{decode:nH(L),encode:a}).ast:i?OT(Ou(e),Oc(kG(e)),{decode:nH(U),encode:x}).ast:new Og(Oc(e).ast,!0,!0,{},void 0)},ON=b(e=>kW(e[0]),(e,t)=>new OO(OR(e,t),e)),OA=e=>z(e,OS),OF=(e,t)=>{let s=he(e),n=[];if(s.length>0){let i=[],r=[],a=[];for(let t=0;t<s.length;t++){let o=s[t],l=e[o];if(OA(l)){let e=l.ast;switch(e._tag){case"PropertySignatureDeclaration":{let t=e.type,s=e.isOptional,a=e.annotations;i.push(new d_(o,t,s,!0)),r.push(new d_(o,d0(t),s,!0,a)),n.push(new d_(o,t,s,!0,a));break}case"PropertySignatureTransformation":{let t=e.from.fromKey??o;i.push(new d_(t,e.from.type,e.from.isOptional,!0,e.from.annotations)),r.push(new d_(o,e.to.type,e.to.isOptional,!0,e.to.annotations)),a.push(new dV(t,o,e.decode,e.encode))}}}else i.push(new d_(o,l.ast,!1,!0)),r.push(new d_(o,d0(l.ast),!1,!0)),n.push(new d_(o,l.ast,!1,!0))}if(it(a)){let e=[],s=[];for(let n of t){let{indexSignatures:t,propertySignatures:a}=dX(n.key.ast,n.value.ast);a.forEach(e=>{i.push(e),r.push(new d_(e.name,d0(e.type),e.isOptional,e.isReadonly,e.annotations))}),t.forEach(t=>{e.push(t),s.push(new dw(t.parameter,d0(t.type),t.isReadonly))})}return new dB(new dk(i,e,{[hS]:"Struct (Encoded side)"}),new dk(r,s,{[hS]:"Struct (Type side)"}),new dG(a))}}let i=[];for(let e of t){let{indexSignatures:t,propertySignatures:s}=dX(e.key.ast,e.value.ast);s.forEach(e=>n.push(e)),t.forEach(e=>i.push(e))}return new dk(n,i)},Oj=(e,t)=>{for(let s of he(e)){let n=e[s];if(void 0===t[s]&&OA(n)){let e=n.ast,i="PropertySignatureDeclaration"===e._tag?e.defaultValue:e.to.defaultValue;void 0!==i&&(t[s]=i())}}return t},OM=(e,t,s=OF(e,t))=>class extends kz(s){static annotations(e){return OM(this.fields,this.records,kJ(this.ast,e))}static{this.fields={...e}}static{this.records=[...t]}static{this.make=(t,s)=>{let n=Oj(e,{...t});return Ix(s)?n:kS(this)(n)}}static pick(...t){return OC(mV(e,...t))}static omit(...t){return OC(mG(e,...t))}};function OC(e,...t){return OM(e,t)}let OL=(e,t,s)=>class extends OM({},[{key:e,value:t}],s){static annotations(s){return OL(e,t,kJ(this.ast,s))}static{this.key=e}static{this.value=t}},OU=(e,t)=>OL(e,t),OP=(e,t,s)=>{if(dI(e)&&dI(t)){let n=[...e.propertySignatures];for(let e of t.propertySignatures){let t=e.name,i=n.findIndex(e=>e.name===t);if(-1===i)n.push(e);else{let{isOptional:r,type:a}=n[i];n[i]=new d_(t,Oz(a,e.type,s.concat(t)),r,!0)}}return new dk(n,e.indexSignatures.concat(t.indexSignatures))}throw Error(hu(e,t,s))},O$=(m=[hy,hE],e=>{let t;for(let s of m)Object.prototype.hasOwnProperty.call(e.annotations,s)&&(void 0===t&&(t={}),t[s]=e.annotations[s]);return t}),OD=(e,t)=>t.map(t=>new d$(t,e.filter,O$(e))),Oz=(e,t,s)=>dj.make(Oq([e],[t],s)),OB=e=>dL(e)?e.types:[e],Oq=(e,t,s)=>iR(e,e=>iR(t,t=>{switch(e._tag){case"Union":return Oq(e.types,OB(t),s);case"Suspend":return[new dP(()=>Oz(e.f(),t,s))];case"Refinement":return OD(e,Oq(OB(e.from),OB(t),s));case"TypeLiteral":switch(t._tag){case"Union":return Oq([e],t.types,s);case"Suspend":return[new dP(()=>Oz(e,t.f(),s))];case"Refinement":return OD(t,Oq([e],OB(t.from),s));case"TypeLiteral":return[OP(e,t,s)];case"Transformation":if(dH(t.transformation))return[new dB(OP(e,t.from,s),OP(d0(e),t.to,s),new dG(t.transformation.propertySignatureTransformations))]}break;case"Transformation":if(dH(e.transformation))switch(t._tag){case"Union":return Oq([e],t.types,s);case"Suspend":return[new dP(()=>Oz(e,t.f(),s))];case"Refinement":return OD(t,Oq([e],OB(t.from),s));case"TypeLiteral":return[new dB(OP(e.from,t,s),OP(e.to,d0(t),s),new dG(e.transformation.propertySignatureTransformations))];case"Transformation":if(dH(t.transformation))return[new dB(OP(e.from,t.from,s),OP(e.to,t.to,s),new dG(e.transformation.propertySignatureTransformations.concat(t.transformation.propertySignatureTransformations)))]}}throw Error(hu(e,t,s))})),OJ=b(2,(e,t)=>kz(Oz(e.ast,t.ast,[]))),OK=e=>kz(new dP(()=>e().ast)),OV=Symbol.for("@effect/schema/refine"),OG=(e,t,s)=>class extends kz(s){static annotations(e){return OG(this.from,this.filter,kJ(this.ast,e))}static{this[OV]=e}static{this.from=e}static{this.filter=t}static{this.make=(e,t)=>Ix(t)?e:kS(this)(e)}},OH=(e,t,s)=>{if(A(e))return e?nL():e5(new kn(t,s));if(R(e))return e5(new kn(t,s,e));if(void 0!==e){if("_tag"in e)return e5(e);let n=new kn(t,s,e.message);return e5(it(e.path)?new w8(e.path,s,n):n)}return nL()},OW=(e,t,s)=>{if(hr(e))return OH(e,t,s);if(it(e)){let n=iA(e,e=>OH(e,t,s));if(it(n))return e5(1===n.length?n[0]:new ke(t,s,n))}return nL()};function OY(e,t){return s=>{function n(t,s,n){return OW(e(t,s,n),n,t)}let i=new d$(s.ast,n,kq(t));return OG(s,n,i)}}let OQ=(e,t,s)=>class extends kz(s){static annotations(e){return OQ(this.from,this.to,kJ(this.ast,e))}static{this.from=e}static{this.to=t}},OX=b(e=>kW(e[0])&&kW(e[1]),(e,t,s)=>OQ(e,t,new dB(e.ast,t.ast,new dJ(s.decode,s.encode)))),OZ=b(e=>kW(e[0])&&kW(e[1]),(e,t,s)=>OX(e,t,{strict:!0,decode:e=>kl(s.decode(e)),encode:e=>kl(s.encode(e))})),O0=Symbol.for("@effect/schema/TypeId/Trimmed"),O1=e=>t=>t.pipe(OY(e=>e===e.trim(),{typeId:O0,description:"a string with no leading or trailing whitespace",jsonSchema:{pattern:"^\\S[\\s\\S]*\\S$|^\\S$|^$"},...e})),O2=(e,t)=>s=>s.pipe(OY(t=>t.length>=e,{typeId:fp,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t})),O3=Symbol.for("@effect/schema/TypeId/Pattern"),O5=(e,t)=>s=>{let n=e.source;return s.pipe(OY(t=>(e.lastIndex=0,e.test(t)),{typeId:{id:O3,annotation:{regex:e}},description:`a string matching the pattern ${n}`,jsonSchema:{pattern:n},arbitrary:()=>t=>t.stringMatching(e),...t}))},O4=Symbol.for("@effect/schema/TypeId/Lowercased"),O6=e=>t=>t.pipe(OY(e=>e===e.toLowerCase(),{typeId:O4,description:"a lowercase string",...e}));class O8 extends Ot.pipe(O6({identifier:"Lowercased",title:"Lowercased"})){static{this.annotations=super.annotations}}let O7=Symbol.for("@effect/schema/TypeId/Capitalized"),O9=e=>t=>t.pipe(OY(e=>e[0]?.toUpperCase()===e[0],{typeId:O7,description:"a capitalized string",...e}));class Ee extends Ot.pipe(O9({identifier:"Capitalized",title:"Capitalized"})){static{this.annotations=super.annotations}}let Et=Symbol.for("@effect/schema/TypeId/Uncapitalized"),Es=e=>t=>t.pipe(OY(e=>e[0]?.toLowerCase()===e[0],{typeId:Et,description:"a uncapitalized string",...e}));class En extends Ot.pipe(Es({identifier:"Uncapitalized",title:"Uncapitalized"})){static{this.annotations=super.annotations}}let Ei=Symbol.for("@effect/schema/TypeId/Uppercased"),Er=e=>t=>t.pipe(OY(e=>e===e.toUpperCase(),{typeId:Ei,description:"an uppercase string",...e}));class Ea extends Ot.pipe(Er({identifier:"Uppercased",title:"Uppercased"})){static{this.annotations=super.annotations}}let Eo=(e,t)=>s=>{let n=D(e)?Math.max(0,Math.floor(e.min)):Math.max(0,Math.floor(e)),i=D(e)?Math.max(n,Math.floor(e.max)):n;return n!==i?s.pipe(OY(e=>e.length>=n&&e.length<=i,{typeId:fm,description:`a string at least ${n} character(s) and at most ${i} character(s) long`,jsonSchema:{minLength:n,maxLength:i},...t})):s.pipe(OY(e=>e.length===n,{typeId:fm,description:1===n?"a single character":`a string ${n} character(s) long`,jsonSchema:{minLength:n,maxLength:n},...t}))};class El extends Ot.pipe(Eo(1,{identifier:"Char"})){static{this.annotations=super.annotations}}let Ec=e=>O2(1,{description:"a non empty string",...e});class Eu extends OZ(Ot,O8,{strict:!0,decode:e=>e.toLowerCase(),encode:x}).annotations({identifier:"Lowercase"}){static{this.annotations=super.annotations}}class Ep extends OZ(Ot,Ea,{strict:!0,decode:e=>e.toUpperCase(),encode:x}).annotations({identifier:"Uppercase"}){static{this.annotations=super.annotations}}class Em extends OZ(Ot,Ee,{strict:!0,decode:e=>mz(e),encode:x}).annotations({identifier:"Capitalize"}){static{this.annotations=super.annotations}}class Eh extends OZ(Ot,En,{strict:!0,decode:e=>mB(e),encode:x}).annotations({identifier:"Uncapitalize"}){static{this.annotations=super.annotations}}class Ed extends Ot.pipe(O1({identifier:"Trimmed",title:"Trimmed"})){static{this.annotations=super.annotations}}class Ef extends OZ(Ot,Ed,{strict:!0,decode:e=>e.trim(),encode:x}).annotations({identifier:"Trim"}){static{this.annotations=super.annotations}}class Eg extends Ot.pipe(Ec({identifier:"NonEmpty",title:"NonEmpty"})){static{this.annotations=super.annotations}}let Eb=Symbol.for("@effect/schema/TypeId/UUID"),Ex=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;class Ey extends Ot.pipe(O5(Ex,{typeId:Eb,identifier:"UUID",title:"UUID",description:"a Universally Unique Identifier",arbitrary:()=>e=>e.uuid()})){static{this.annotations=super.annotations}}let Ev=Symbol.for("@effect/schema/TypeId/ULID"),E_=/^[0-7][0-9A-HJKMNP-TV-Z]{25}$/i;class ES extends Ot.pipe(O5(E_,{typeId:Ev,identifier:"ULID",title:"ULID",description:"a Universally Unique Lexicographically Sortable Identifier",arbitrary:()=>e=>e.ulid()})){static{this.annotations=super.annotations}}let Ew=Symbol.for("@effect/schema/TypeId/Finite"),Ek=e=>t=>t.pipe(OY(e=>Number.isFinite(e),{typeId:Ew,description:"a finite number",...e})),EO=(e,t)=>s=>s.pipe(OY(t=>t>e,{typeId:fa,description:0===e?"a positive number":`a number greater than ${e}`,jsonSchema:{exclusiveMinimum:e},...t})),EE=(e,t)=>s=>s.pipe(OY(t=>t>=e,{typeId:fo,description:0===e?"a non-negative number":`a number greater than or equal to ${e}`,jsonSchema:{minimum:e},...t})),EI=e=>t=>t.pipe(OY(e=>Number.isSafeInteger(e),{typeId:fu,title:"integer",description:"an integer",jsonSchema:{type:"integer"},...e})),ET=(e,t)=>s=>s.pipe(OY(t=>t<e,{typeId:fl,description:0===e?"a negative number":`a number less than ${e}`,jsonSchema:{exclusiveMaximum:e},...t})),ER=(e,t)=>s=>s.pipe(OY(t=>t<=e,{typeId:fc,description:0===e?"a non-positive number":`a number less than or equal to ${e}`,jsonSchema:{maximum:e},...t})),EN=Symbol.for("@effect/schema/TypeId/NonNaN"),EA=e=>t=>t.pipe(OY(e=>!Number.isNaN(e),{typeId:EN,description:"a number excluding NaN",...e})),EF=e=>EO(0,e),Ej=e=>ET(0,e),EM=e=>ER(0,e),EC=e=>EE(0,e),EL=e=>OX(e,Os,{strict:!1,decode:(e,t,s)=>ku(mP(e),()=>new kn(s,e)),encode:e=>kl(String(e))});class EU extends EL(Ot).annotations({identifier:"NumberFromString"}){static{this.annotations=super.annotations}}class EP extends Os.pipe(Ek({identifier:"Finite",title:"Finite"})){static{this.annotations=super.annotations}}class E$ extends Os.pipe(EI({identifier:"Int",title:"Int"})){static{this.annotations=super.annotations}}class ED extends Os.pipe(EA({identifier:"NonNaN",title:"NonNaN"})){static{this.annotations=super.annotations}}class Ez extends Os.pipe(EF({identifier:"Positive",title:"Positive"})){static{this.annotations=super.annotations}}class EB extends Os.pipe(Ej({identifier:"Negative",title:"Negative"})){static{this.annotations=super.annotations}}class Eq extends Os.pipe(EM({identifier:"NonPositive",title:"NonPositive"})){static{this.annotations=super.annotations}}class EJ extends Os.pipe(EC({identifier:"NonNegative",title:"NonNegative"})){static{this.annotations=super.annotations}}let EK=Symbol.for("@effect/schema/TypeId/JsonNumber");class EV extends Os.pipe(OY(e=>!Number.isNaN(e)&&Number.isFinite(e),{typeId:EK,identifier:"JsonNumber",title:"JSON-compatible number",description:"a JSON-compatible number, excluding NaN, +Infinity, and -Infinity",jsonSchema:{type:"number"}})){static{this.annotations=super.annotations}}class EG extends OZ(On,On,{strict:!0,decode:i2,encode:i2}){static{this.annotations=super.annotations}}class EH extends OZ(Ot,Oe,{strict:!1,decode:e=>Symbol.for(e),encode:e=>e.description}).annotations({identifier:"symbol"}){static{this.annotations=super.annotations}}class EW extends OX(Ot,k9,{strict:!0,decode:(e,t,s)=>ku(i0(e),()=>new kn(s,e)),encode:e=>kl(String(e))}).annotations({identifier:"bigint"}){static{this.annotations=super.annotations}}class EY extends OX(Os,k9,{strict:!0,decode:(e,t,s)=>ku(i1(e),()=>new kn(s,e)),encode:(e,t,s)=>ku(iZ(e),()=>new kn(s,e))}).annotations({identifier:"BigintFromNumber"}){static{this.annotations=super.annotations}}let EQ=(e,t,s,n)=>kf(e,{onFailure:e=>new ke(s,n,e),onSuccess:t});class EX extends k2(md,{identifier:"DurationFromSelf",pretty:()=>String,arbitrary:()=>e=>e.oneof(e.constant(mg),e.bigUint().map(e=>mb(e)),e.bigUint().map(e=>mx(e)),e.maxSafeNat().map(e=>my(e)),e.maxSafeNat().map(e=>mv(e)),e.maxSafeNat().map(e=>m_(e)),e.maxSafeNat().map(e=>mS(e)),e.maxSafeNat().map(e=>mw(e)),e.maxSafeNat().map(e=>mk(e))),equivalence:()=>mA}){static{this.annotations=super.annotations}}class EZ extends OX(k9,EX,{strict:!0,decode:e=>kl(mb(e)),encode:(e,t,s)=>nU(mE(e),{onNone:()=>kc(new kn(s,e)),onSome:e=>kl(e)})}).annotations({identifier:"DurationFromNanos"}){static{this.annotations=super.annotations}}class E0 extends OZ(Os,EX,{strict:!0,decode:e=>my(e),encode:e=>mO(e)}).annotations({identifier:"DurationFromMillis"}){static{this.annotations=super.annotations}}let E1=function(...e){return Array.isArray(e[0])?Om(e[0],e.slice(1)):Om(e,[])}(EJ.pipe(Ek({[hS]:"seconds",[hw]:"seconds"})),EJ.pipe(Ek({[hS]:"nanos",[hw]:"nanos"})));class E2 extends OZ(E1,EX,{strict:!0,decode:([e,t])=>mb(BigInt(e)*BigInt(1e9)+BigInt(t)),encode:e=>mT(e)}).annotations({identifier:"Duration"}){static{this.annotations=super.annotations}}let E3=Symbol.for("@effect/schema/TypeId/ValidDate"),E5=e=>t=>t.pipe(OY(e=>!Number.isNaN(e.getTime()),{typeId:E3,description:"a valid Date",...e}));class E4 extends k2(K,{identifier:"DateFromSelf",description:"a potentially invalid Date instance",pretty:()=>e=>`new Date(${JSON.stringify(e)})`,arbitrary:()=>e=>e.date({noInvalidDate:!1}),equivalence:()=>nj}){static{this.annotations=super.annotations}}class E6 extends E4.pipe(E5({identifier:"ValidDateFromSelf",description:"a valid Date instance"})){static{this.annotations=super.annotations}}class E8 extends OZ(Ot,E4,{strict:!0,decode:e=>new Date(e),encode:e=>e.toISOString()}).annotations({identifier:"DateFromString"}){static{this.annotations=super.annotations}}class E7 extends E8.pipe(E5({identifier:"Date"})){static{this.annotations=super.annotations}}class E9 extends OZ(Os,E4,{strict:!0,decode:e=>new Date(e),encode:e=>e.getTime()}).annotations({identifier:"DateFromNumber"}){static{this.annotations=super.annotations}}let Ie=e=>"None"===e._tag?nL():e5(e.value),It=e=>t=>t.oneof(t.record({_tag:t.constant("None")}),t.record({_tag:t.constant("Some"),value:e(t)})).map(Ie),Is=e=>nU({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),In=e=>(t,s,n)=>e0(t)?e1(t)?kl(nL()):EQ(e(t.value,s),e5,n,t):kc(new kn(n,t)),Ii=e=>k2([e],{decode:e=>In(kv(e)),encode:e=>In(k_(e))},{description:`Option<${kK(e)}>`,pretty:Is,arbitrary:It,equivalence:nW}),Ir=()=>e=>`BigDecimal(${iQ(iK(e))})`,Ia=()=>e=>e.tuple(e.bigInt(),e.integer()).map(([e,t])=>iD(e,t));class Io extends k2(i$,{identifier:"BigDecimalFromSelf",pretty:Ir,arbitrary:Ia,equivalence:()=>iG}){static{this.annotations=super.annotations}}class Il extends OX(Ot,Io,{strict:!0,decode:(e,t,s)=>iY(e).pipe(nU({onNone:()=>kc(new kn(s,e)),onSome:e=>kl(iK(e))})),encode:e=>kl(iQ(iK(e)))}).annotations({identifier:"BigDecimal"}){static{this.annotations=super.annotations}}class Ic extends OX(Os,Io,{strict:!0,decode:e=>kl(iW(e)),encode:e=>kl(iX(e))}).annotations({identifier:"BigDecimalFromNumber"}){static{this.annotations=super.annotations}}let Iu=e=>kW(e)||OA(e),Ip=e=>he(e).every(t=>Iu(e[t])),Im=e=>"fields"in e?e.fields:Im(e[OV]),Ih=e=>Ip(e)?OC(e):kW(e)?e:OC(Im(e)),Id=e=>Ip(e)?e:Im(e),If=e=>(t,s)=>Iy({kind:"Class",identifier:e,schema:Ih(t),fields:Id(t),Base:oi,annotations:s}),Ig=(e,t)=>{let s={...e};for(let n of he(t)){if(n in e)throw Error(hb(n));s[n]=t[n]}return s},Ib=(e,t)=>e1(hU(e.ast))?e.annotations({title:t}):e,Ix=e=>A(e)?e:e?.disableValidation??!1,Iy=({Base:e,annotations:t,fields:s,identifier:n,kind:i,schema:r,toStringOverride:a})=>{let o=Symbol.for(`@effect/schema/${i}/${n}`),l=Ib(r,`${n} (Constructor)`),c=Ib(r,`${n} (Encoded side)`),u=Ib(kG(r),`${n} (Type side)`),p=e=>z(e,o)&&kw(u)(e);return class extends e{constructor(e={},t=!1){e={...e},"Class"!==i&&delete e._tag,e=Oj(s,e),Ix(t)||(e=kS(l)(e)),super(e,!0)}static{this[kD]=kB}static get ast(){return OZ(c,k2([u],{decode:()=>(e,t,s)=>e instanceof this||p(e)?kl(e):kc(new kn(s,e)),encode:()=>(e,t)=>e instanceof this?kl(e):km(k_(u)(e,t),e=>new this(e,!0))},{identifier:n,title:n,description:`an instance of ${n}`,pretty:e=>t=>`${n}(${e(t)})`,arbitrary:e=>t=>e(t).map(e=>new this(e)),equivalence:x,[hF]:u.ast,...t}),{strict:!0,decode:e=>new this(e,!0),encode:x}).annotations({[hF]:r.ast}).ast}static pipe(){return eI(this,arguments)}static annotations(e){return kz(this.ast).annotations(e)}static toString(){return`(${String(c)} <-> ${n})`}static make(...e){return new this(...e)}static{this.fields={...s}}static{this.identifier=n}static extend(e){return(t,n)=>{let a=Id(t),o=Ih(t),l=Ig(s,a);return Iy({kind:i,identifier:e,schema:OJ(r,o),fields:l,Base:this,annotations:n})}}static transformOrFail(e){return(t,n,a)=>{let o=Ig(s,t);return Iy({kind:i,identifier:e,schema:OX(r,kG(OC(o)),n),fields:o,Base:this,annotations:a})}}static transformOrFailFrom(e){return(t,n,a)=>{let o=Ig(s,t);return Iy({kind:i,identifier:e,schema:OX(kV(r),OC(o),n),fields:o,Base:this,annotations:a})}}get[o](){return o}toString(){if(void 0!==a){let e=a(this);if(void 0!==e)return e}return`${n}({ ${he(s).map(e=>`${hn(e)}: ${hs(this[e])}`).join(", ")} })`}}},Iv=Oo(OC({_tag:kX("None")}).annotations({identifier:"FiberIdNoneEncoded"}),OC({_tag:kX("Runtime"),id:E$.annotations({title:"id",description:"id"}),startTimeMillis:E$.annotations({title:"startTimeMillis",description:"startTimeMillis"})}).annotations({identifier:"FiberIdRuntimeEncoded"}),OC({_tag:kX("Composite"),left:OK(()=>Iv),right:OK(()=>Iv)}).annotations({identifier:"FiberIdCompositeEncoded"})).annotations({identifier:"FiberIdEncoded"}),I_=e=>e.letrec(t=>({None:e.record({_tag:e.constant("None")}),Runtime:e.record({_tag:e.constant("Runtime"),id:e.integer(),startTimeMillis:e.integer()}),Composite:e.record({_tag:e.constant("Composite"),left:t("FiberId"),right:t("FiberId")}),FiberId:e.oneof(t("None"),t("Runtime"),t("Composite"))})).FiberId.map(Ik),IS=e=>{switch(e._tag){case"None":return"FiberId.none";case"Runtime":return`FiberId.runtime(${e.id}, ${e.startTimeMillis})`;case"Composite":return`FiberId.composite(${IS(e.right)}, ${IS(e.left)})`}};class Iw extends k2(aq,{identifier:"FiberIdFromSelf",pretty:()=>IS,arbitrary:()=>I_}){static{this.annotations=super.annotations}}let Ik=e=>{switch(e._tag){case"None":return aD;case"Runtime":return az(e.id,e.startTimeMillis);case"Composite":return aB(Ik(e.left),Ik(e.right))}},IO=e=>{switch(e._tag){case"None":return{_tag:"None"};case"Runtime":return{_tag:"Runtime",id:e.id,startTimeMillis:e.startTimeMillis};case"Composite":return{_tag:"Composite",left:IO(e.left),right:IO(e.right)}}};class IE extends OZ(Iv,Iw,{strict:!0,decode:Ik,encode:IO}).annotations({identifier:"FiberId"}){static{this.annotations=super.annotations}}class II extends OZ(k8,On,{strict:!0,decode:T,encode:x}).annotations({identifier:"BooleanFromUnknown"}){static{this.annotations=super.annotations}}let IT=(e,t=2)=>{let s=mc(e);return _X(_3(Sg,e=>mF(s,Math.pow(t,e))))},IR=e=>_V(Sg,()=>e),IN={silent:Number.NEGATIVE_INFINITY,fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,ready:3,start:3,box:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},IA={silent:{level:-1},fatal:{level:IN.fatal},error:{level:IN.error},warn:{level:IN.warn},log:{level:IN.log},info:{level:IN.info},success:{level:IN.success},fail:{level:IN.fail},ready:{level:IN.info},start:{level:IN.info},box:{level:IN.info},debug:{level:IN.debug},trace:{level:IN.trace},verbose:{level:IN.verbose}};function IF(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e))}let Ij=(...e)=>e.reduce((e,t)=>(function e(t,s,n=".",i){if(!IF(s))return e(t,{},n,i);let r=Object.assign({},s);for(let s in t){if("__proto__"===s||"constructor"===s)continue;let a=t[s];null==a||i&&i(r,s,a,n)||(Array.isArray(a)&&Array.isArray(r[s])?r[s]=[...a,...r[s]]:IF(a)&&IF(r[s])?r[s]=e(a,r[s],(n?`${n}.`:"")+s.toString(),i):r[s]=a)}return r})(e,t,"",void 0),{}),IM=!1,IC=[];class IL{constructor(e={}){let t=e.types||IA;for(let s in this.options=Ij({...e,defaults:{...e.defaults},level:IU(e.level,t),reporters:[...e.reporters||[]]},{types:IA,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}}),t){let e={type:s,...this.options.defaults,...t[s]};this[s]=this._wrapLogFn(e),this[s].raw=this._wrapLogFn(e,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=IU(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){let t=new IL({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){let t=this.options.reporters.indexOf(e);if(-1!==t)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(let e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(let e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=e=>{this[t].raw(String(e).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){IM=!0}resumeLogs(){for(let e of(IM=!1,IC.splice(0)))e[0]._logFn(e[1],e[2])}mockTypes(e){let t=e||this.options.mockFn;if(this._mockFn=t,"function"==typeof t)for(let e in this.options.types)this[e]=t(e,this.options.types[e])||this[e],this[e].raw=this[e]}_wrapLogFn(e,t){return(...s)=>{if(IM){IC.push([this,e,s,t]);return}return this._logFn(e,s,t)}}_logFn(e,t,s){var n,i;if((e.level||0)>this.level)return!1;let r={date:new Date,args:[],...e,level:IU(e.level,this.options.types)};s||1!==t.length||((i=n=t[0],"[object Object]"===Object.prototype.toString.call(i)&&(n.message||n.args)&&!n.stack)?0:1)?r.args=[...t]:Object.assign(r,t[0]),r.message&&(r.args.unshift(r.message),delete r.message),r.additional&&(Array.isArray(r.additional)||(r.additional=r.additional.split("\n")),r.args.push("\n"+r.additional.join("\n")),delete r.additional),r.type="string"==typeof r.type?r.type.toLowerCase():"log",r.tag="string"==typeof r.tag?r.tag:"";let a=(e=!1)=>{let t=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&t>0){let e=[...this._lastLog.object.args];t>1&&e.push(`(repeated ${t} times)`),this._log({...this._lastLog.object,args:e}),this._lastLog.count=1}e&&(this._lastLog.object=r,this._log(r))};clearTimeout(this._lastLog.timeout);let o=this._lastLog.time&&r.date?r.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=r.date,o<this.options.throttle)try{let e=JSON.stringify([r.type,r.tag,r.args]),t=this._lastLog.serialized===e;if(this._lastLog.serialized=e,t&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(a,this.options.throttle);return}}catch{}a(!0)}_log(e){for(let t of this.options.reporters)t.log(e,{options:this.options})}}function IU(e,t={},s=3){return void 0===e?s:"number"==typeof e?e:t[e]&&void 0!==t[e].level?t[e].level:s}IL.prototype.add=IL.prototype.addReporter,IL.prototype.remove=IL.prototype.removeReporter,IL.prototype.clear=IL.prototype.removeReporter,IL.prototype.withScope=IL.prototype.withTag,IL.prototype.mock=IL.prototype.mockTypes,IL.prototype.pause=IL.prototype.pauseLogs,IL.prototype.resume=IL.prototype.resumeLogs;let IP=b(2,(e,t)=>uQ(vA,t)(e)),I$=e=>S9(_t(vC,ao(e))),ID=e=>S9(_t(vC,al(e))),Iz=b(2,(e,t)=>S3(ID(e),()=>I$(t))),IB=Symbol("uploadthing-custom-id-symbol"),Iq=["upload","failure","multipart-complete"],IJ=e=>"string"==typeof e&&Iq.includes(e),IK=["callback"],IV=e=>"string"==typeof e&&IK.includes(e);var IG="6.13.3";let IH=kX(...["inline","attachment"]);kX(...["public-read","private"]);class IW extends If("FileUploadData")({name:Ot,size:Os,type:Ot}){}class IY extends IW.extend("FileUploadDataWithCustomId")({customId:Ol(Ot)}){}class IQ extends IY.extend("UploadedFileData")({key:Ot,url:Ot,appUrl:Ot}){}class IX extends If("PresignedBaseSchema")({key:Ot,fileName:Ot,fileType:Ot,fileUrl:Ot,appUrl:Ot,pollingJwt:Ot,pollingUrl:Ot,contentDisposition:IH,customId:Ol(Ot)}){}class IZ extends IX.extend("MPUResponseSchema")({urls:Od(Ot),uploadId:Ot,chunkSize:Os,chunkCount:Os}){}class I0 extends IX.extend("PSPResponseSchema")({url:Ot,fields:OU(Ot,Ot)}){}let I1=Od(Oo(I0,IZ));class I2 extends If("PollUploadResponse")({status:Ot,fileData:ON(OC({fileKey:Ol(Ot),fileName:Ot,fileSize:Os,fileType:Ot,metadata:Ol(Ot),customId:Ol(Ot),callbackUrl:ON(Ot),callbackSlug:ON(Ot)}))}){}class I3 extends If("FailureCallbackResponse")({success:On,message:ON(Ot)}){}class I5 extends If("ServerCallbackPostResponse")({status:Ot}){}class I4 extends If("UploadActionPayload")({files:Od(IW),input:k8}){}class I6 extends If("FailureActionPayload")({fileKey:Ot,uploadId:Ol(Ot),storageProviderError:ON(Ot),fileName:Ot}){}class I8 extends If("MultipartCompleteActionPayload")({fileKey:Ot,uploadId:Ot,etags:Od(OC({tag:Ot,partNumber:Os}))}){}let I7=e=>!!(e.ok&&!(e.status>=400)&&e.headers.has("x-uploadthing-version")),I9=(e,t)=>wU(function*(){let s=yield*nw(nm(`/v6/pollUpload/${e.key}`)).pipe(c8(nk),c8(kH(I2)),c8(e=>"done"===e.status&&e.fileData?ub(e.fileData):c0(new nr)),Su({while:e=>e instanceof nr,schedule:IT(10,4).pipe(_8(IR(1e3)),_Y(Sf),St(mM(m_(1))))}),bM("RetryError",()=>new n_({code:"UPLOAD_FAILED",message:"File took too long to upload"}))),n=s.callbackUrl+`?slug=${s.callbackSlug}`;n.startsWith("http")||(n="http://"+n),yield*bD("SIMULATING FILE UPLOAD WEBHOOK CALLBACK",n);let i=JSON.stringify({status:"uploaded",metadata:JSON.parse(s.metadata??"{}"),file:new IQ({url:e.fileUrl,appUrl:e.appUrl,key:e.key,name:s.fileName,size:s.fileSize,customId:s.customId,type:s.fileType})}),r=yield*bY({try:()=>nT(i,t),catch:e=>new n_({code:"INTERNAL_SERVER_ERROR",message:"Failed to sign payload",cause:e})});return I7((yield*nw(n,{method:"POST",body:i,headers:{"Content-Type":"application/json","uploadthing-hook":"callback","x-uploadthing-signature":r}}).pipe(bM("FetchError",()=>ub(new Response(null,{status:500}))))))?yield*bD("Successfully simulated callback for file",e.key):yield*bB(`
Failed to simulate callback for file '${s.fileKey}'. Is your webhook configured correctly?
  - Make sure the URL '${n}' is accessible without any authentication. You can verify this by running 'curl -X POST ${n}' in your terminal
  - Still facing issues? Read https://docs.uploadthing.com/faq for common issues
`.trim()),s}),Te=(e,t)=>{switch(t){case"error":case"fatal":return`\x1b[41m\x1b[30m${e}\x1b[0m`;case"warn":return`\x1b[43m\x1b[30m${e}\x1b[0m`;case"info":case"log":return`\x1b[44m\x1b[30m${e}\x1b[0m`;case"debug":case"trace":return`\x1b[47m\x1b[30m${e}\x1b[0m`;case"success":return`\x1b[42m\x1b[30m${e}\x1b[0m`;default:return e}},Tt={fatal:"⨯",error:"⨯",warn:"⚠️",info:"ℹ",log:"ℹ",debug:"⚙",trace:"→",success:"✓"},Ts=function(e={}){return new IL(e)}({reporters:[{log:e=>{let{type:t,tag:s,date:n,args:i}=e,r=Tt[t],a=Te(` ${r} ${s} ${n.toLocaleTimeString()} `,t);console.log(i.map(e=>nb(e)&&"string"==typeof e.stack?e.message+"\n"+function(e){let t="cwd"in sz&&"function"==typeof sz.cwd?sz.cwd():"__UnknownCWD__";return"  "+e.split("\n").splice(1).map(e=>e.trim().replace("file://","").replace(t+"/","")).join("\n  ")}(e.stack):e).map(e=>"string"==typeof e?e:JSON.stringify(e,null,4)).join(" ").split("\n").map(e=>a+" "+e).join("\n"))}}],defaults:{tag:"UPLOADTHING"}}),Tn={All:"verbose",Fatal:"error",Error:"error",Info:"info",Debug:"debug",Trace:"trace",Warning:"warn",None:"silent"},Ti=(e="info")=>(Ts.level=IN[e],IP({silent:uD,error:gJ,warn:gK,info:uP,debug:u$,trace:gV,verbose:uU}[e])),Tr=Iz(vj,xg(({logLevel:e,message:t})=>{Ts[Tn[e._tag]](t)})),Ta=(e,t)=>nw(nm("/v6/completeMultipart"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId,etags:t}),headers:{"Content-Type":"application/json"}}).pipe(c8(nk),c8(kH(OC({success:On,message:ON(Ot)}))),wP("completeMultipartUpload",{attributes:{etags:t,presigned:e}})),To=e=>nw(nm("/v6/failureCallback"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId}),headers:{"Content-Type":"application/json"}}).pipe(c8(nk),c8(kH(I3)),wP("abortMultipartUpload",{attributes:{presigned:e}})),Tl=e=>e||(sz.env.UPLOADTHING_SECRET?sz.env.UPLOADTHING_SECRET:void 0);class Tc extends p9{constructor(e,t,s){super({reason:`You uploaded a ${e} file that was ${nf(s)}, but the limit for that type is ${t}`}),this._tag="FileSizeMismatch",this.name="FileSizeMismatchError"}}class Tu extends p9{constructor(e,t,s,n){super({reason:`You uploaded ${n} file(s) of type '${e}', but the ${t} for that type is ${s}`}),this._tag="FileCountMismatch",this.name="FileCountMismatchError"}}let Tp=(e,t)=>wU(function*(){let s={};for(let n of e){let e=yield*np(n.name,ng(t));s[e]=(s[e]??0)+1;let i=t[e]?.maxFileSize;if(!i)return yield*new ne(e,"maxFileSize");let r=yield*nd(i);if(n.size>r)return yield*new Tc(e,i,n.size)}for(let e in s){let n=t[e];if(!n)return yield*new ne(e);let i=s[e],r=n.minFileCount,a=n.maxFileCount;if(r>a)return yield*new n_({code:"BAD_REQUEST",message:"Invalid config during file count - minFileCount > maxFileCount",cause:`minFileCount must be less than maxFileCount for key ${e}. got: ${r} > ${a}`});if(i<r)return yield*new Tu(e,"minimum",r,i);if(i>a)return yield*new Tu(e,"maximum",a,i)}return null});class Tm extends tm("uploadthing/RequestInput")(){}let Th=(e,t,s)=>wU(function*(){let n=yield*cL(e.req)?e.req:ub(e.req),i=new URL(n.url),r=n.headers,a=i.searchParams,o=a.get("actionType"),l=a.get("slug"),c=r.get("uploadthing-hook"),u=r.get("x-uploadthing-package")??"unknown",p=r.get("x-uploadthing-version"),m=Tl(t.config?.uploadthingSecret);if(null!=p&&p!==IG)return yield*bB(`Client version mismatch. Server version: ${IG}, Client version: ${p}`),yield*new n_({code:"BAD_REQUEST",message:"Client version mismatch",cause:`Server version: ${IG}, Client version: ${p}`});if(!l)return yield*bB("No slug provided in params:",a),yield*new n_({code:"BAD_REQUEST",message:"No slug provided in params"});if(l&&"string"!=typeof l){let e=`Expected slug to be of type 'string', got '${typeof l}'`;return yield*bB(e),yield*new n_({code:"BAD_REQUEST",message:"`slug` must be a string",cause:e})}if(!m){let e="No secret provided, please set UPLOADTHING_SECRET in your env file or in the config";return yield*bB(e),yield*new n_({code:"MISSING_ENV",message:"No secret provided",cause:e})}if(!m.startsWith("sk_")){let e="Invalid secret provided, UPLOADTHING_SECRET must start with 'sk_'";return yield*bB(e),yield*new n_({code:"MISSING_ENV",message:"Invalid API key. API keys must start with 'sk_'.",cause:e})}if(u&&"string"!=typeof u){let e=`Expected x-uploadthing-package to be of type 'string', got '${typeof u}'`;return yield*bB(e),yield*new n_({code:"BAD_REQUEST",message:"`x-uploadthing-package` must be a string. eg. '@uploadthing/react'",cause:e})}let h=t.router[l];if(!h){let e=`No file route found for slug ${l}`;return yield*bB(e),yield*new n_({code:"NOT_FOUND",message:e})}if(o&&!IJ(o)){let e=`Expected ${Iq.map(e=>`"${e}"`).join(", ").replace(/,(?!.*,)/," or")} but got "${o}"`;return yield*bB("Invalid action type",e),yield*new n_({code:"BAD_REQUEST",cause:`Invalid action type ${o}`,message:e})}if(c&&!IV(c)){let e=`Expected ${IK.map(e=>`"${e}"`).join(", ").replace(/,(?!.*,)/," or")} but got "${c}"`;return yield*bB("Invalid uploadthing hook",e),yield*new n_({code:"BAD_REQUEST",cause:`Invalid uploadthing hook ${c}`,message:e})}if(!o&&!c||o&&c){let e="Exactly one of 'actionType' or 'uploadthing-hook' must be provided";return yield*bB(e),yield*new n_({code:"BAD_REQUEST",message:e})}yield*b$("✔︎ All request input is valid");let d=yield*nS;d.baseHeaders["x-uploadthing-api-key"]=m,d.baseHeaders["x-uploadthing-fe-package"]=u,d.baseHeaders["x-uploadthing-be-adapter"]=s;let{isDev:f=sL}=t.config??{};f&&(yield*bD("UploadThing dev server is now running!"));let g={req:n,config:t.config??{},middlewareArgs:e.middlewareArgs,isDev:f,apiKey:m,slug:l,uploadable:h,hook:null,action:null};return o?{...g,action:o}:{...g,hook:c}}),Td=wU(function*(){let{config:e,req:t,isDev:s}=yield*Tm,n=new URL(t.url);if(e?.callbackUrl?n=yield*nx(e.callbackUrl):sz.env.UPLOADTHING_URL&&(n=yield*nx(sz.env.UPLOADTHING_URL)),s||!n.host.includes("localhost"))return n;let i=t.headers.get("origin")??t.headers.get("referer")??t.headers.get("host")??t.headers.get("x-forwarded-host");return(i&&!i.includes("http")&&(i=(t.headers.get("x-forwarded-proto")??"https")+"://"+i),!i||i.includes("localhost"))?(bz("You are using a localhost callback url in production which is not supported.","Read more and learn how to fix it here: https://docs.uploadthing.com/faq#my-callback-runs-in-development-but-not-in-production"),n):yield*nx(i)}),Tf=(e,t,s)=>e(t).pipe(Ti(s?.logLevel),wn(Tr),bV(nS,{fetch:s?.fetch??globalThis.fetch,baseHeaders:{"x-uploadthing-version":IG,"x-uploadthing-api-key":void 0,"x-uploadthing-be-adapter":void 0,"x-uploadthing-fe-package":void 0}}),Tg,Sq),Tg=e=>cK(e,e=>ub({success:!1,error:e})),Tb=Tm.pipe(c8(({action:e,hook:t})=>{if("callback"===t)return Ty;switch(e){case"upload":return T_;case"multipart-complete":return TS;case"failure":return Tw}}),ul(e=>({success:!0,...e}))),Tx=(e,t)=>s=>Tb.pipe(bG(Tm,Th(s,e,t)),bC({InvalidJson:e=>new n_({code:"INTERNAL_SERVER_ERROR",message:"An error occured while parsing input/output",cause:e}),BadRequestError:e=>new n_({code:"INTERNAL_SERVER_ERROR",message:e.getMessage(),cause:e,data:e.json}),FetchError:e=>new n_({code:"INTERNAL_SERVER_ERROR",message:"string"==typeof e.error?e.error:e.message,cause:e,data:e.error}),ParseError:e=>new n_({code:"INTERNAL_SERVER_ERROR",message:"An error occured while parsing input/output",cause:e})}),bW(e=>bB(e.message))),Ty=wU(function*(){let{req:e,uploadable:t,apiKey:s}=yield*Tm,n=yield*bY({try:async()=>nR(await e.clone().text(),e.headers.get("x-uploadthing-signature"),s),catch:()=>new n_({code:"BAD_REQUEST",message:"Invalid signature"})});if(yield*b$("Signature verified:",n),!n)return yield*bB("Invalid signature"),yield*new n_({code:"BAD_REQUEST",message:"Invalid signature"});let i=yield*c6(nO(e),kH(OC({status:Ot,file:IQ,metadata:OU(Ot,k8)})));yield*b$("Handling callback request with input:",i);let r=yield*bY({try:async()=>t.resolver({file:i.file,metadata:i.metadata}),catch:e=>new n_({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadComplete",cause:e})}).pipe(bW(e=>bB("Failed to run onUploadComplete. You probably shouldn't be throwing errors here.",e))),a={fileKey:i.file.key,callbackData:r??null};return yield*b$("'onUploadComplete' callback finished. Sending response to UploadThing:",a),yield*nw(nm("/v6/serverCallback"),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).pipe(c8(nk),c8(kH(I5))),{body:null}}),Tv=e=>wU(function*(){let{uploadable:t,middlewareArgs:s}=yield*Tm,{files:n,input:i}=e;yield*b$("Running middleware");let r=yield*bY({try:async()=>t._def.middleware({...s,input:i,files:n}),catch:e=>e instanceof n_?e:new n_({code:"INTERNAL_SERVER_ERROR",message:"Failed to run middleware",cause:e})}).pipe(bW(e=>bB("An error occured in your middleware function",e)));if(r[IB]&&r[IB].length!==n.length){let e=`Expected files override to have the same length as original files, got ${r[IB].length} but expected ${n.length}`;return yield*bB(e),yield*new n_({code:"BAD_REQUEST",message:"Files override must have the same length as files",cause:e})}let a=yield*vB(n,(e,t)=>wU(function*(){let s=r[IB]?.[t];return s&&s.size!==e.size&&(yield*bz("File size mismatch. Reverting to original size")),{name:s?.name??e.name,size:e.size,customId:s?.customId}}));return{metadata:r,filesWithCustomIds:a}}),T_=wU(function*(){let e;let t=yield*Tm,{files:s,input:n}=yield*c6(nO(t.req),kH(I4));yield*b$("Handling upload request with input:",{files:s,input:n}),yield*b$("Parsing user input");let i=t.uploadable._def.inputParser,r=yield*bY({try:async()=>(function(e){if("function"==typeof e.parse)return e.parse;throw Error("Invalid parser")})(i)(n),catch:e=>new n_({code:"BAD_REQUEST",message:"Invalid input",cause:e})}).pipe(bW(e=>bB("An error occured trying to parse input",e)));yield*b$("Input parsed successfully",r);let{metadata:a,filesWithCustomIds:o}=yield*Tv({input:r,files:s});yield*b$("Parsing route config",t.uploadable._def.routerConfig);let l=yield*nu(t.uploadable._def.routerConfig).pipe(bM("InvalidRouteConfig",e=>new n_({code:"BAD_REQUEST",message:"Invalid config",cause:e})));yield*b$("Route config parsed successfully",l),yield*b$("Validating files meet the config requirements",s),yield*Tp(s,l).pipe(uu(e=>new n_({code:"BAD_REQUEST",message:`Invalid config: ${e._tag}`,cause:"reason"in e?e.reason:e.message})));let c=yield*Td.pipe(bW(e=>bB("Failed to resolve callback URL",e)),bM("InvalidURL",e=>new n_({code:"INTERNAL_SERVER_ERROR",message:e.message})));yield*b$("Retrieving presigned URLs from UploadThing. Callback URL is:",c.href);let u=yield*nw(nm("/v6/prepareUpload"),{method:"POST",body:JSON.stringify({files:o,routeConfig:l,metadata:a,callbackUrl:c.origin+c.pathname,callbackSlug:t.slug}),headers:{"Content-Type":"application/json"}}).pipe(c8(nk),c8(kH(I1)));if(yield*b$("UploadThing responded with:",u),yield*b$("Sending presigned URLs to client"),t.isDev){let s=yield*nS;e=vB(u,e=>I9(e,t.apiKey).pipe(cX),{concurrency:10}).pipe(wn(Tr),bV(nS,s),Sq)}return{body:u,cleanup:e}}),TS=wU(function*(){let e=yield*Tm,t=yield*c6(nO(e.req),kH(I8));yield*b$("Handling multipart-complete request with input:",t),yield*b$("Notifying UploadThing that multipart upload is complete");let s=yield*Ta({key:t.fileKey,uploadId:t.uploadId},t.etags);return yield*b$("UploadThing responded with:",s),{body:null}}),Tw=wU(function*(){let{req:e,uploadable:t}=yield*Tm,{fileKey:s,uploadId:n}=yield*c6(nO(e),kH(I6));yield*b$("Handling failure request with input:",{fileKey:s,uploadId:n}),yield*b$("Notifying UploadThing that upload failed");let i=yield*To({key:s,uploadId:n});return yield*b$("UploadThing responded with:",i),yield*b$("Running 'onUploadError' callback"),yield*bj({try:()=>{t._def.onUploadError({error:new n_({code:"UPLOAD_FAILED",message:`Upload failed for ${s}`}),fileKey:s})},catch:e=>new n_({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadError",cause:e})}).pipe(bW(e=>bB("Failed to run onUploadError. You probably shouldn't be throwing errors here.",e))),{body:null}}),Tk=e=>()=>ng(e.router).map(t=>{let s=SJ(nu(e.router[t]._def.routerConfig));return{slug:t,config:s}}),TO=(e,t)=>{!function(){let e,t;if(void 0===sz)return;let s=sz.versions?.node?.split(".");s&&([e,t]=s.map(e=>parseInt(e,10)));let n=sz.env?.NODE;if(!e&&n){let s=/v(\d+)\.(\d+)\.(\d+)/.exec(n)?.[0];s&&([e,t]=s.substring(1).split(".").map(e=>parseInt(e,10)))}e&&t&&!(e>18)&&(18===e&&t>=13||(SJ(bB(`YOU ARE USING A LEGACY (${e}.${t}) NODE VERSION WHICH ISN'T OFFICIALLY SUPPORTED. PLEASE UPGRADE TO NODE ^18.13.`)),sz.exit?.(1)))}();let s=Tx(e,t),n=Tk(e);return{GET:e=>Response.json(n(),{headers:{"x-uploadthing-version":IG}}),POST:async t=>{let n=t instanceof Request?t:t.request,i=await Tf(s,{req:n,middlewareArgs:{req:n,event:void 0,res:void 0}},e.config);if(!1===i.success)return Response.json(function(e,t){return(t[Object.keys(t)[0]]?._def.errorFormatter??function(e){return{message:e.message}})(e)}(i.error,e.router),{status:nv[i.error.code]??500,headers:{"x-uploadthing-version":IG}});let r=Response.json(i.body,{headers:{"x-uploadthing-version":IG}});return r.cleanup=i.cleanup,r}}};function TE(e){return{message:e.message}}var TI=s(32455),TT=s(46082),TR=s.n(TT);let TN=(e=>{var t;return t=void 0,e=>(function e(t={}){let s={routerConfig:{image:{maxFileSize:"4MB"}},inputParser:{parse:()=>void 0,_input:void 0,_output:void 0},middleware:()=>({}),onUploadError:()=>({}),errorFormatter:t.errorFormatter??TE,...t};return{input:t=>e({...s,inputParser:t}),middleware:t=>e({...s,middleware:t}),onUploadComplete:e=>({_def:s,resolver:e}),onUploadError:t=>e({...s,onUploadError:t})}})({routerConfig:e,...t})})(),TA=async()=>{try{let e=await (0,TI.cookies)(),t=e.get("auth-token")?.value;if(!t)throw Error("No token found");return TR().verify(t,process.env.NEXTAUTH_SECRET||"fallback-secret")}catch(e){throw Error("Invalid token")}},{GET:TF,POST:Tj}=(e=>{let t=TO(e,"nextjs-app");return{POST:e=>t.POST(e),GET:e=>t.GET(e)}})({router:{imageUploader:TN({image:{maxFileSize:"4MB",maxFileCount:1}}).middleware(async()=>{let e=await TA();if(!e)throw Error("Unauthorized");return{userId:e.userId}}).onUploadComplete(async({metadata:e,file:t})=>(console.log("Upload complete for userId:",e.userId),console.log("File URL:",t.url),{uploadedBy:e.userId,url:t.url})),videoUploader:TN({video:{maxFileSize:"16MB",maxFileCount:1}}).middleware(async()=>{let e=await TA();if(!e)throw Error("Unauthorized");return{userId:e.userId}}).onUploadComplete(async({metadata:e,file:t})=>(console.log("Video upload complete for userId:",e.userId),console.log("Video URL:",t.url),{uploadedBy:e.userId,url:t.url})),documentUploader:TN({pdf:{maxFileSize:"8MB",maxFileCount:1},text:{maxFileSize:"1MB",maxFileCount:1}}).middleware(async()=>{let e=await TA();if(!e)throw Error("Unauthorized");return{userId:e.userId}}).onUploadComplete(async({metadata:e,file:t})=>(console.log("Document upload complete for userId:",e.userId),console.log("Document URL:",t.url),{uploadedBy:e.userId,url:t.url})),courseThumbnail:TN({image:{maxFileSize:"2MB",maxFileCount:1}}).middleware(async()=>{let e=await TA();if(!e)throw Error("Unauthorized");return{userId:e.userId}}).onUploadComplete(async({metadata:e,file:t})=>(console.log("Course thumbnail upload complete for userId:",e.userId),console.log("Thumbnail URL:",t.url),{uploadedBy:e.userId,url:t.url}))}}),TM=new d.AppRouteRouteModule({definition:{kind:f.x.APP_ROUTE,page:"/api/uploadthing/route",pathname:"/api/uploadthing",filename:"route",bundlePath:"app/api/uploadthing/route"},resolvedPagePath:"E:\\BigDentist Website\\app\\api\\uploadthing\\route.ts",nextConfigOutput:"",userland:h}),{requestAsyncStorage:TC,staticGenerationAsyncStorage:TL,serverHooks:TU,headerHooks:TP,staticGenerationBailout:T$}=TM,TD="/api/uploadthing/route";function Tz(){return(0,g.patchFetch)({serverHooks:TU,staticGenerationAsyncStorage:TL})}},58284:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraftMode",{enumerable:!0,get:function(){return i}});let n=s(72973);class i{get isEnabled(){return this._provider.isEnabled}enable(){if(!(0,n.staticGenerationBailout)("draftMode().enable()"))return this._provider.enable()}disable(){if(!(0,n.staticGenerationBailout)("draftMode().disable()"))return this._provider.disable()}constructor(e){this._provider=e}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},28290:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{headers:function(){return u},cookies:function(){return p},draftMode:function(){return m}});let n=s(97366),i=s(3022),r=s(63608),a=s(91877),o=s(25528),l=s(72973),c=s(58284);function u(){if((0,l.staticGenerationBailout)("headers",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return i.HeadersAdapter.seal(new Headers({}));let e=a.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: headers() expects to have requestAsyncStorage, none available.");return e.headers}function p(){if((0,l.staticGenerationBailout)("cookies",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return n.RequestCookiesAdapter.seal(new r.RequestCookies(new Headers({})));let e=a.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: cookies() expects to have requestAsyncStorage, none available.");let t=o.actionAsyncStorage.getStore();return t&&(t.isAction||t.isAppRoute)?e.mutableCookies:e.cookies}function m(){let e=a.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: draftMode() expects to have requestAsyncStorage, none available.");return new c.DraftMode(e.draftMode)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},48096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{DYNAMIC_ERROR_CODE:function(){return s},DynamicServerError:function(){return n}});let s="DYNAMIC_SERVER_USAGE";class n extends Error{constructor(e){super("Dynamic server usage: "+e),this.digest=s}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},72973:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"staticGenerationBailout",{enumerable:!0,get:function(){return o}});let n=s(48096),i=s(25319);class r extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}function a(e,t){let{dynamic:s,link:n}=t||{};return"Page"+(s?' with `dynamic = "'+s+'"`':"")+" couldn't be rendered statically because it used `"+e+"`."+(n?" See more info here: "+n:"")}let o=(e,t)=>{let{dynamic:s,link:o}=void 0===t?{}:t,l=i.staticGenerationAsyncStorage.getStore();if(!l)return!1;if(l.forceStatic)return!0;if(l.dynamicShouldError)throw new r(a(e,{link:o,dynamic:null!=s?s:"error"}));let c=a(e,{dynamic:s,link:"https://nextjs.org/docs/messages/dynamic-server-error"});if(null==l.postpone||l.postpone.call(l,e),l.revalidate=0,l.isStaticGeneration){let t=new n.DynamicServerError(c);throw l.dynamicUsageDescription=e,l.dynamicUsageStack=t.stack,t}return!1};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},97347:e=>{"use strict";var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,r={};function a(e){var t;let s=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean);return`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}; ${s.join("; ")}`}function o(e){let t=new Map;for(let s of e.split(/; */)){if(!s)continue;let e=s.indexOf("=");if(-1===e){t.set(s,"true");continue}let[n,i]=[s.slice(0,e),s.slice(e+1)];try{t.set(n,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}function l(e){var t,s;if(!e)return;let[[n,i],...r]=o(e),{domain:a,expires:l,httponly:p,maxage:m,path:h,samesite:d,secure:f,priority:g}=Object.fromEntries(r.map(([e,t])=>[e.toLowerCase(),t]));return function(e){let t={};for(let s in e)e[s]&&(t[s]=e[s]);return t}({name:n,value:decodeURIComponent(i),domain:a,...l&&{expires:new Date(l)},...p&&{httpOnly:!0},..."string"==typeof m&&{maxAge:Number(m)},path:h,...d&&{sameSite:c.includes(t=(t=d).toLowerCase())?t:void 0},...f&&{secure:!0},...g&&{priority:u.includes(s=(s=g).toLowerCase())?s:void 0}})}((e,s)=>{for(var n in s)t(e,n,{get:s[n],enumerable:!0})})(r,{RequestCookies:()=>p,ResponseCookies:()=>m,parseCookie:()=>o,parseSetCookie:()=>l,stringifyCookie:()=>a}),e.exports=((e,r,a,o)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let a of n(r))i.call(e,a)||void 0===a||t(e,a,{get:()=>r[a],enumerable:!(o=s(r,a))||o.enumerable});return e})(t({},"__esModule",{value:!0}),r);var c=["strict","lax","none"],u=["low","medium","high"],p=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,s]of o(t))this._parsed.set(e,{name:e,value:s})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let s=Array.from(this._parsed);if(!e.length)return s.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return s.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,s]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:s}),this._headers.set("cookie",Array.from(n).map(([e,t])=>a(t)).join("; ")),this}delete(e){let t=this._parsed,s=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>a(t)).join("; ")),s}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},m=class{constructor(e){var t,s,n;this._parsed=new Map,this._headers=e;let i=null!=(n=null!=(s=null==(t=e.getSetCookie)?void 0:t.call(e))?s:e.get("set-cookie"))?n:[];for(let e of Array.isArray(i)?i:function(e){if(!e)return[];var t,s,n,i,r,a=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,r=!1;l();)if(","===(s=e.charAt(o))){for(n=o,o+=1,l(),i=o;o<e.length&&"="!==(s=e.charAt(o))&&";"!==s&&","!==s;)o+=1;o<e.length&&"="===e.charAt(o)?(r=!0,o=i,a.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!r||o>=e.length)&&a.push(e.substring(t,e.length))}return a}(i)){let t=l(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let s=Array.from(this._parsed.values());if(!e.length)return s;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return s.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,s,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:s,...n})),function(e,t){for(let[,s]of(t.delete("set-cookie"),e)){let e=a(s);t.append("set-cookie",e)}}(i,this._headers),this}delete(...e){let[t,s,n]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:s,domain:n,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(a).join("; ")}}},95419:(e,t,s)=>{"use strict";e.exports=s(30517)},3022:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{ReadonlyHeadersError:function(){return i},HeadersAdapter:function(){return r}});let n=s(6250);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class r extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,s,i){if("symbol"==typeof s)return n.ReflectAdapter.get(t,s,i);let r=s.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===r);if(void 0!==a)return n.ReflectAdapter.get(t,a,i)},set(t,s,i,r){if("symbol"==typeof s)return n.ReflectAdapter.set(t,s,i,r);let a=s.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);return n.ReflectAdapter.set(t,o??s,i,r)},has(t,s){if("symbol"==typeof s)return n.ReflectAdapter.has(t,s);let i=s.toLowerCase(),r=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==r&&n.ReflectAdapter.has(t,r)},deleteProperty(t,s){if("symbol"==typeof s)return n.ReflectAdapter.deleteProperty(t,s);let i=s.toLowerCase(),r=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===r||n.ReflectAdapter.deleteProperty(t,r)}})}static seal(e){return new Proxy(e,{get(e,t,s){switch(t){case"append":case"delete":case"set":return i.callable;default:return n.ReflectAdapter.get(e,t,s)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new r(e)}append(e,t){let s=this.headers[e];"string"==typeof s?this.headers[e]=[s,t]:Array.isArray(s)?s.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[s,n]of this.entries())e.call(t,n,s,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),s=this.get(t);yield[t,s]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},6250:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return s}});class s{static get(e,t,s){let n=Reflect.get(e,t,s);return"function"==typeof n?n.bind(e):n}static set(e,t,s,n){return Reflect.set(e,t,s,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},97366:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{ReadonlyRequestCookiesError:function(){return r},RequestCookiesAdapter:function(){return a},getModifiedCookieValues:function(){return l},appendMutableCookies:function(){return c},MutableRequestCookiesAdapter:function(){return u}});let n=s(63608),i=s(6250);class r extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new r}}class a{static seal(e){return new Proxy(e,{get(e,t,s){switch(t){case"clear":case"delete":case"set":return r.callable;default:return i.ReflectAdapter.get(e,t,s)}}})}}let o=Symbol.for("next.mutated.cookies");function l(e){let t=e[o];return t&&Array.isArray(t)&&0!==t.length?t:[]}function c(e,t){let s=l(t);if(0===s.length)return!1;let i=new n.ResponseCookies(e),r=i.getAll();for(let e of s)i.set(e);for(let e of r)i.set(e);return!0}class u{static wrap(e,t){let s=new n.ResponseCookies(new Headers);for(let t of e.getAll())s.set(t);let r=[],a=new Set,l=()=>{var e;let i=null==fetch.__nextGetStaticStore?void 0:null==(e=fetch.__nextGetStaticStore.call(fetch))?void 0:e.getStore();if(i&&(i.pathWasRevalidated=!0),r=s.getAll().filter(e=>a.has(e.name)),t){let e=[];for(let t of r){let s=new n.ResponseCookies(new Headers);s.set(t),e.push(s.toString())}t(e)}};return new Proxy(s,{get(e,t,s){switch(t){case o:return r;case"delete":return function(...t){a.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{l()}};case"set":return function(...t){a.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{l()}};default:return i.ReflectAdapter.get(e,t,s)}}})}}},63608:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{RequestCookies:function(){return n.RequestCookies},ResponseCookies:function(){return n.ResponseCookies}});let n=s(97347)},32455:(e,t,s)=>{e.exports=s(28290)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[1638,6082],()=>s(94583));module.exports=n})();