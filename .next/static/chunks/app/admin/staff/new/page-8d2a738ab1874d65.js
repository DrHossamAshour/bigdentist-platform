(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6258],{8800:function(e,s,a){Promise.resolve().then(a.bind(a,2723))},2723:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return w}});var r=a(7437),l=a(2265),t=a(4033),n=a(1396),i=a.n(n),o=a(3067),d=a(7972),c=a(1295),m=a(2741),u=a(9036),x=a(2812),g=a(7216),p=a(9670),b=a(2549),h=a(6245),f=a(5925);let v=[{value:"SUPER_ADMIN",label:"Super Admin",color:"bg-red-100 text-red-800"},{value:"ADMIN",label:"Admin",color:"bg-purple-100 text-purple-800"},{value:"SUPPORT",label:"Support",color:"bg-blue-100 text-blue-800"},{value:"CONTENT_MANAGER",label:"Content Manager",color:"bg-green-100 text-green-800"},{value:"MODERATOR",label:"Moderator",color:"bg-yellow-100 text-yellow-800"},{value:"INSTRUCTOR",label:"Instructor",color:"bg-indigo-100 text-indigo-800"}],N=["IT","Management","Customer Service","Content","Marketing","Sales","Finance","HR","Operations"],y=[{value:"manage_users",label:"Manage Users"},{value:"manage_courses",label:"Manage Courses"},{value:"manage_staff",label:"Manage Staff"},{value:"view_analytics",label:"View Analytics"},{value:"manage_content",label:"Manage Content"},{value:"manage_organizations",label:"Manage Organizations"},{value:"manage_payments",label:"Manage Payments"},{value:"view_reports",label:"View Reports"},{value:"manage_settings",label:"Manage Settings"},{value:"moderate_content",label:"Moderate Content"},{value:"view_users",label:"View Users"},{value:"view_courses",label:"View Courses"}],j={SUPER_ADMIN:y.map(e=>e.value),ADMIN:["manage_users","manage_courses","manage_staff","view_analytics","manage_content","view_reports"],SUPPORT:["view_users","view_courses","view_analytics"],CONTENT_MANAGER:["manage_courses","manage_content","view_analytics"],MODERATOR:["moderate_content","view_users","view_courses"],INSTRUCTOR:["manage_courses","view_analytics"]};function w(){let e=(0,t.useRouter)(),[s,a]=(0,l.useState)(!1),[n,w]=(0,l.useState)(!1),[_,C]=(0,l.useState)(!1),[P,S]=(0,l.useState)({firstName:"",lastName:"",email:"",phone:"",role:"SUPPORT",department:"Customer Service",supervisor:"",permissions:j.SUPPORT,password:"",confirmPassword:""}),M=(e,s)=>{S(a=>({...a,[e]:s})),"role"===e&&"string"==typeof s&&S(e=>({...e,role:s,permissions:j[s]||[]}))},R=e=>{S(s=>({...s,permissions:s.permissions.includes(e)?s.permissions.filter(s=>s!==e):[...s.permissions,e]}))},k=()=>P.firstName&&P.lastName&&P.email&&P.password?P.password!==P.confirmPassword?(f.default.error("Passwords do not match"),!1):P.password.length<6?(f.default.error("Password must be at least 6 characters long"),!1):!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P.email)||(f.default.error("Please enter a valid email address"),!1):(f.default.error("Please fill in all required fields"),!1),E=async s=>{if(s.preventDefault(),k()){C(!0);try{let s=await fetch("/api/admin/staff",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(s.ok)f.default.success("Staff member created successfully!"),e.push("/admin/staff");else{let e=await s.json();f.default.error(e.message||"Failed to create staff member")}}catch(e){console.error("Error creating staff member:",e),f.default.error("An error occurred while creating the staff member")}finally{C(!1)}}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(i(),{href:"/admin/staff",className:"text-gray-600 hover:text-gray-900",children:(0,r.jsx)(o.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Add New Staff Member"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Create a new staff account with specific roles and permissions"})]})]})})})}),(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("form",{onSubmit:E,className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Basic Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,r.jsx)(d.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:"firstName",type:"text",required:!0,value:P.firstName,onChange:e=>M("firstName",e.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter first name"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,r.jsx)(d.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:"lastName",type:"text",required:!0,value:P.lastName,onChange:e=>M("lastName",e.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter last name"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,r.jsx)(c.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:"email",type:"email",required:!0,value:P.email,onChange:e=>M("email",e.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,r.jsx)(m.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:"phone",type:"tel",value:P.phone,onChange:e=>M("phone",e.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter phone number"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Role & Department"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,r.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("select",{id:"role",required:!0,value:P.role,onChange:e=>M("role",e.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:v.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-2",children:"Department *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,r.jsx)(x.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("select",{id:"department",required:!0,value:P.department,onChange:e=>M("department",e.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:N.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"supervisor",className:"block text-sm font-medium text-gray-700 mb-2",children:"Supervisor"}),(0,r.jsx)("input",{id:"supervisor",type:"text",value:P.supervisor,onChange:e=>M("supervisor",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter supervisor name"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Permissions"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(e=>(0,r.jsxs)("label",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:P.permissions.includes(e.value),onChange:()=>R(e.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.label})]},e.value))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Account Password"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{id:"password",type:s?"text":"password",required:!0,value:P.password,onChange:e=>M("password",e.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password"}),(0,r.jsx)("button",{type:"button",onClick:()=>a(!s),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s?(0,r.jsx)(g.Z,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(p.Z,{className:"h-5 w-5 text-gray-400"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{id:"confirmPassword",type:n?"text":"password",required:!0,value:P.confirmPassword,onChange:e=>M("confirmPassword",e.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm password"}),(0,r.jsx)("button",{type:"button",onClick:()=>w(!n),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n?(0,r.jsx)(g.Z,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(p.Z,{className:"h-5 w-5 text-gray-400"})})]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsxs)(i(),{href:"/admin/staff",className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[(0,r.jsx)(b.Z,{className:"w-4 h-4"}),"Cancel"]}),(0,r.jsxs)("button",{type:"submit",disabled:_,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"w-4 h-4"}),_?"Creating...":"Create Staff Member"]})]})]})})]})}}},function(e){e.O(0,[5250,939,2971,4938,1744],function(){return e(e.s=8800)}),_N_E=e.O()}]);