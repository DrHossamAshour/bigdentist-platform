(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2460],{8043:function(e,s,t){Promise.resolve().then(t.bind(t,8381))},8381:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return w}});var a=t(7437),l=t(2265),r=t(1396),i=t.n(r),c=t(2104),n=t(2894),d=t(3008),o=t(7480),x=t(4280),m=t(3423),h=t(8339),u=t(6141),g=t(9670),p=t(7810),j=t(1827),N=t(1813),f=t(4689),y=t(6224),b=t(3711),v=t(5925);function w(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)({totalVideos:0,totalDuration:0,totalPlays:0,totalLikes:0}),[w,k]=(0,l.useState)(!0),[S,C]=(0,l.useState)(!1),[V,Z]=(0,l.useState)(""),[L,E]=(0,l.useState)("grid"),[_,T]=(0,l.useState)("all"),[P,A]=(0,l.useState)("all");(0,l.useEffect)(()=>{U()},[]);let U=async()=>{try{k(!0);let e=await fetch("/api/admin/vimeo/videos");if(e.ok){let t=await e.json();s(t.videos),r(t.summary)}else v.default.error("Failed to fetch Vimeo videos")}catch(e){console.error("Error fetching Vimeo videos:",e),v.default.error("Error fetching Vimeo videos")}finally{k(!1)}},F=async()=>{try{C(!0);let t=await fetch("/api/admin/vimeo/sync",{method:"POST",headers:{"Content-Type":"application/json"}}),a=await t.json();if(t.ok&&a.success){let t=new Set(e.map(e=>e.id)),l=a.videos.filter(e=>!t.has(e.id));s(e=>[...e,...l]),r(a.summary),v.default.success(a.message)}else v.default.error(a.error||"Failed to sync from Vimeo")}catch(e){console.error("Error syncing from Vimeo:",e),v.default.error("Error syncing from Vimeo")}finally{C(!1)}},M=e.filter(e=>{let s=e.title.toLowerCase().includes(V.toLowerCase())||e.description.toLowerCase().includes(V.toLowerCase())||e.usage.items.some(e=>e.title.toLowerCase().includes(V.toLowerCase())||e.instructor.toLowerCase().includes(V.toLowerCase())),t="all"===_||"valid"===_&&!e.error||"error"===_&&e.error||"private"===_&&"nobody"===e.privacy,a="all"===P||"courses"===P&&"course"===e.usage.type||"vimeo_account"===P&&"vimeo_account"===e.usage.type;return s&&t&&a}),D=e=>{navigator.clipboard.writeText(e),v.default.success("Copied to clipboard")},O=e=>e.error?(0,a.jsx)(c.Z,{className:"w-5 h-5 text-red-500"}):"nobody"===e.privacy?(0,a.jsx)(n.Z,{className:"w-5 h-5 text-yellow-500"}):(0,a.jsx)(d.Z,{className:"w-5 h-5 text-green-500"}),R=e=>e.error?"Error":"nobody"===e.privacy?"Private":"Valid",q=e=>"vimeo_account"===e.usage.type?(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Vimeo Account"}):(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Course Linked"});return w?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading Vimeo videos..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(i(),{href:"/admin",className:"text-gray-600 hover:text-gray-900",children:(0,a.jsx)(o.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Vimeo Video Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage all external Vimeo videos used in courses"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("button",{onClick:F,disabled:S,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[S?(0,a.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(m.Z,{className:"w-4 h-4"}),S?"Syncing...":"Sync from Vimeo"]}),(0,a.jsxs)("button",{onClick:U,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Refresh"]})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"w-8 h-8 text-blue-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Videos"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.totalVideos})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"w-8 h-8 text-green-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Duration"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(e=>{let s=Math.floor(e/3600),t=Math.floor(e%3600/60);return s>0?"".concat(s,"h ").concat(t,"m"):"".concat(t,"m ").concat(e%60,"s")})(t.totalDuration)})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"w-8 h-8 text-purple-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Plays"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.totalPlays.toLocaleString()})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"w-8 h-8 text-red-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Likes"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.totalLikes.toLocaleString()})]})]})})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 flex-1",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(j.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search videos, courses, or instructors...",value:V,onChange:e=>Z(e.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:_,onChange:e=>T(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"valid",children:"Valid Videos"}),(0,a.jsx)("option",{value:"error",children:"Error Videos"}),(0,a.jsx)("option",{value:"private",children:"Private Videos"})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:P,onChange:e=>A(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Sources"}),(0,a.jsx)("option",{value:"courses",children:"Course Linked"}),(0,a.jsx)("option",{value:"vimeo_account",children:"Vimeo Account"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>E("grid"),className:"p-2 rounded ".concat("grid"===L?"bg-blue-100 text-blue-600":"text-gray-400"),children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>E("list"),className:"p-2 rounded ".concat("list"===L?"bg-blue-100 text-blue-600":"text-gray-400"),children:(0,a.jsx)(f.Z,{className:"w-4 h-4"})})]})]})}),0===M.length?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,a.jsx)(h.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No videos found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"No Vimeo videos match your search criteria."}),(0,a.jsxs)("button",{onClick:F,disabled:S,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-2 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[S?(0,a.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(m.Z,{className:"w-4 h-4"}),S?"Syncing...":"Sync from Vimeo"]})]}):"grid"===L?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-full h-48 object-cover",onError:e=>{e.currentTarget.src="/placeholder-video.jpg"}}),(0,a.jsx)("div",{className:"absolute top-2 right-2",children:O(e)}),(0,a.jsx)("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-sm",children:e.durationFormatted})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 line-clamp-2",children:e.title}),q(e)]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-1"}),e.stats.plays.toLocaleString()]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-1"}),e.stats.likes.toLocaleString()]})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.error?"bg-red-100 text-red-800":"nobody"===e.privacy?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:R(e)})]}),e.usage.items.length>0&&(0,a.jsxs)("div",{className:"space-y-2 mb-3",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 font-medium",children:"Used in:"}),e.usage.items.slice(0,2).map(e=>(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["• ",e.title," (by ",e.instructor,")"]},e.id)),e.usage.items.length>2&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["+",e.usage.items.length-2," more courses"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-4 pt-4 border-t border-gray-200",children:[(0,a.jsxs)("button",{onClick:()=>D(e.embedUrl),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded text-sm transition-colors flex items-center justify-center gap-1",children:[(0,a.jsx)(y.Z,{className:"w-3 h-3"}),"Copy URL"]}),(0,a.jsxs)("a",{href:"https://vimeo.com/".concat(e.id),target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded text-sm transition-colors flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"w-3 h-3"}),"View"]})]})]})]},e.id))}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Video"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stats"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usage"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-16 h-12 object-cover rounded",onError:e=>{e.currentTarget.src="/placeholder-video.jpg"}}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.durationFormatted})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:q(e)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[O(e),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-900",children:R(e)})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"text-sm text-gray-900",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-1"}),e.stats.plays.toLocaleString()]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-1"}),e.stats.likes.toLocaleString()]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-900",children:[e.usage.items.length," course",1!==e.usage.items.length?"s":""]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.usage.items.slice(0,2).map(e=>e.title).join(", "),e.usage.items.length>2&&" +".concat(e.usage.items.length-2," more")]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>D(e.embedUrl),className:"text-blue-600 hover:text-blue-900",children:(0,a.jsx)(y.Z,{className:"w-4 h-4"})}),(0,a.jsx)("a",{href:"https://vimeo.com/".concat(e.id),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-900",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})})]})]})}}},function(e){e.O(0,[5250,3820,2971,4938,1744],function(){return e(e.s=8043)}),_N_E=e.O()}]);